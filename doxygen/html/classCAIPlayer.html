<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECS 160 Project: CAIPlayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ECS 160 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classCAIPlayer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CAIPlayer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="AIPlayer_8h_source.html">AIPlayer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab8b156d5fdce4d5ecf24624523fe5337"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#ab8b156d5fdce4d5ecf24624523fe5337">CAIPlayer</a> (std::shared_ptr&lt; <a class="el" href="classCPlayerData.html">CPlayerData</a> &gt; playerdata, int downsample)</td></tr>
<tr class="memdesc:ab8b156d5fdce4d5ecf24624523fe5337"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="classCAIPlayer.html">CAIPlayer</a>.  <a href="#ab8b156d5fdce4d5ecf24624523fe5337">More...</a><br /></td></tr>
<tr class="separator:ab8b156d5fdce4d5ecf24624523fe5337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2742efd250c7d6c00b659ccc29c4be3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3">CalculateCommand</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="memdesc:ae2742efd250c7d6c00b659ccc29c4be3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decides what actions the AI should take.  <a href="#ae2742efd250c7d6c00b659ccc29c4be3">More...</a><br /></td></tr>
<tr class="separator:ae2742efd250c7d6c00b659ccc29c4be3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:afafbe8fc589e09a16ae1f02f2794d7b0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="separator:afafbe8fc589e09a16ae1f02f2794d7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33b1533570e7a00114d1b85b3551e395"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#a33b1533570e7a00114d1b85b3551e395">FindEnemies</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="memdesc:a33b1533570e7a00114d1b85b3551e395"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used by the AI to find enemies by searching assets that are visible to it on the map.  <a href="#a33b1533570e7a00114d1b85b3551e395">More...</a><br /></td></tr>
<tr class="separator:a33b1533570e7a00114d1b85b3551e395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf7feeba7debf9f19b000887616d7bfb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#adf7feeba7debf9f19b000887616d7bfb">AttackEnemies</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="memdesc:adf7feeba7debf9f19b000887616d7bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used by the AI to select fighters and attack the enemy.  <a href="#adf7feeba7debf9f19b000887616d7bfb">More...</a><br /></td></tr>
<tr class="separator:adf7feeba7debf9f19b000887616d7bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41cdefbe14210fb70b793a32778c5141"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#a41cdefbe14210fb70b793a32778c5141">BuildTownHall</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="memdesc:a41cdefbe14210fb70b793a32778c5141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used by the AI to build a Town Hall. Returns true or false, depending on whether it was able to build or not.  <a href="#a41cdefbe14210fb70b793a32778c5141">More...</a><br /></td></tr>
<tr class="separator:a41cdefbe14210fb70b793a32778c5141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff5263cbaa6bfc62ffec4dbce87ba88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88">BuildBuilding</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command, <a class="el" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> buildingtype, <a class="el" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> neartype)</td></tr>
<tr class="memdesc:a2ff5263cbaa6bfc62ffec4dbce87ba88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used by the AI to build a building other than the Town Hall. Returns true or false, depending on whether it was able to build or not.  <a href="#a2ff5263cbaa6bfc62ffec4dbce87ba88">More...</a><br /></td></tr>
<tr class="separator:a2ff5263cbaa6bfc62ffec4dbce87ba88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fab1c955fd68bb53fa80bb1872d2819"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819">ActivatePeasants</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command, bool trainmore)</td></tr>
<tr class="memdesc:a3fab1c955fd68bb53fa80bb1872d2819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used by the AI to produce peasants and to make them gather resources.  <a href="#a3fab1c955fd68bb53fa80bb1872d2819">More...</a><br /></td></tr>
<tr class="separator:a3fab1c955fd68bb53fa80bb1872d2819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4216d7e76315234a4fe22fb3a0a89c1d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#a4216d7e76315234a4fe22fb3a0a89c1d">ActivateFighters</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="memdesc:a4216d7e76315234a4fe22fb3a0a89c1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects fighting units that will be able to receive orders as a group. Returns true or false depending on whether it was able to select any fighters or not.  <a href="#a4216d7e76315234a4fe22fb3a0a89c1d">More...</a><br /></td></tr>
<tr class="separator:a4216d7e76315234a4fe22fb3a0a89c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3f9c1d0d449a45a24e065d2086527b0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#aa3f9c1d0d449a45a24e065d2086527b0">TrainFootman</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="memdesc:aa3f9c1d0d449a45a24e065d2086527b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used by the AI to train Footmen.  <a href="#aa3f9c1d0d449a45a24e065d2086527b0">More...</a><br /></td></tr>
<tr class="separator:aa3f9c1d0d449a45a24e065d2086527b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2edf1e3c54d6af693f768f86d484fd6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#af2edf1e3c54d6af693f768f86d484fd6">TrainArcher</a> (<a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;command)</td></tr>
<tr class="memdesc:af2edf1e3c54d6af693f768f86d484fd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used by the AI to train Archers.  <a href="#af2edf1e3c54d6af693f768f86d484fd6">More...</a><br /></td></tr>
<tr class="separator:af2edf1e3c54d6af693f768f86d484fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a83b5113c8f7e80df54940b647c5ee2e6"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classCPlayerData.html">CPlayerData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a></td></tr>
<tr class="separator:a83b5113c8f7e80df54940b647c5ee2e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf12a7afe7ea86410b18eff47fa95253"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#adf12a7afe7ea86410b18eff47fa95253">DCycle</a></td></tr>
<tr class="separator:adf12a7afe7ea86410b18eff47fa95253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a091aed92cb9ad1a789900a6394d2f352"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCAIPlayer.html#a091aed92cb9ad1a789900a6394d2f352">DDownSample</a></td></tr>
<tr class="separator:a091aed92cb9ad1a789900a6394d2f352"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="AIPlayer_8h_source.html#l00028">28</a> of file <a class="el" href="AIPlayer_8h_source.html">AIPlayer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab8b156d5fdce4d5ecf24624523fe5337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b156d5fdce4d5ecf24624523fe5337">&sect;&nbsp;</a></span>CAIPlayer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CAIPlayer::CAIPlayer </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classCPlayerData.html">CPlayerData</a> &gt;&#160;</td>
          <td class="paramname"><em>playerdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>downsample</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="classCAIPlayer.html">CAIPlayer</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DPlayerData</td><td>- Holds data about the AI player (gold, lumber, etc.).</td></tr>
    <tr><td class="paramname">DCycle</td><td>- Clock that increments whenever the AI tries to make a decision.</td></tr>
    <tr><td class="paramname">DDownSample</td><td>- Determines how often the AI can perform an action.</td></tr>
  </table>
  </dd>
</dl>
<h1><a class="anchor" id="constrhow_sec"></a>
How It Works</h1>
<p>It sets all the parameters to their default values.</p>
<p>For more information about how DCycle and DDownSample work check <a class="el" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3">CAIPlayer::CalculateCommand</a>. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00096">96</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="AIPlayer_8h_source.html#l00031">DCycle</a>, <a class="el" href="AIPlayer_8h_source.html#l00032">DDownSample</a>, and <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                                           {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Sets the AI Player&#39;s data to default values (e.g. lumber = 0, etc.)</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a> = playerdata;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// Sets the current cycle to 0.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classCAIPlayer.html#adf12a7afe7ea86410b18eff47fa95253">DCycle</a> = 0;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Initializes to DDownSample</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classCAIPlayer.html#a091aed92cb9ad1a789900a6394d2f352">DDownSample</a> = downsample;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div><div class="ttc" id="classCAIPlayer_html_adf12a7afe7ea86410b18eff47fa95253"><div class="ttname"><a href="classCAIPlayer.html#adf12a7afe7ea86410b18eff47fa95253">CAIPlayer::DCycle</a></div><div class="ttdeci">int DCycle</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00031">AIPlayer.h:31</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a091aed92cb9ad1a789900a6394d2f352"><div class="ttname"><a href="classCAIPlayer.html#a091aed92cb9ad1a789900a6394d2f352">CAIPlayer::DDownSample</a></div><div class="ttdeci">int DDownSample</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00032">AIPlayer.h:32</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4216d7e76315234a4fe22fb3a0a89c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4216d7e76315234a4fe22fb3a0a89c1d">&sect;&nbsp;</a></span>ActivateFighters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::ActivateFighters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Selects fighting units that will be able to receive orders as a group. Returns true or false depending on whether it was able to select any fighters or not. </p>
<h1><a class="anchor" id="afhow_sec"></a>
How It Works</h1>
<p>The function looks through all the idle assets it has and checks whether they have a speed property and whether they are not a peasant. Then it checks whether the asset is not currently standing ground. If the asset is not standing ground, it is added to a list of actors (assets that can perform actions). The function checks whether that list is empty and if it isn't it will make all the actors on the list stand ground. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00574">574</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00039">aaStandGround</a>, <a class="el" href="GameDataTypes_8h_source.html#l00075">actStandGround</a>, <a class="el" href="GameDataTypes_8h_source.html#l00094">atPeasant</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, and <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                                              {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// Variable that holds the idle assets of the player.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keyword">auto</span> IdleAssets = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;IdleAssets();</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    </div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// Searches through all the IdleAssets.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// &quot;:&quot; is the range operator in c++ 11. It goes through all the elements</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// in a list.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : IdleAssets){</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="comment">// Checks whether the asset can be assigned to the current asset.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="comment">// lock() checks whether the pointer is valid.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="comment">// Checks whether the current asset has a speed property and that</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="comment">// it is not a peasant. If those two things are true, then the unit</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="comment">// should be a fighter.</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;Speed() &amp;&amp; (<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61">atPeasant</a> != Asset-&gt;Type())){</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="comment">// Checks if the asset is currently not standing ground.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">if</span>(!Asset-&gt;HasAction(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3">aaStandGround</a>) &amp;&amp; !Asset-&gt;HasActiveCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea60ecb1b155c04190174a46d8053b5a04">actStandGround</a>)){</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <span class="comment">// If the unit is not standing ground it is added to a list</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <span class="comment">// of actors (assets that can act) which will perform an</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    <span class="comment">// action as a group.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(Asset);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// Checks whether there are any actors ready to receive orders.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span>(command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.size()){</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="comment">// Makes the fighters Stand Ground</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea60ecb1b155c04190174a46d8053b5a04">actStandGround</a>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// returns true because it was able to activate some fighters</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// returns false if there are no fighters to activate</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div><div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3">aaStandGround</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00039">GameDataTypes.h:39</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61">atPeasant</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00094">GameDataTypes.h:94</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea60ecb1b155c04190174a46d8053b5a04"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea60ecb1b155c04190174a46d8053b5a04">actStandGround</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00075">GameDataTypes.h:75</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d_icgraph.png" border="0" usemap="#classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d_icgraph" alt=""/></div>
<map name="classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d_icgraph" id="classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="253,5,476,32"/>
</map>
</div>

</div>
</div>
<a id="a3fab1c955fd68bb53fa80bb1872d2819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fab1c955fd68bb53fa80bb1872d2819">&sect;&nbsp;</a></span>ActivatePeasants()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::ActivatePeasants </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>trainmore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used by the AI to produce peasants and to make them gather resources. </p>
<h1><a class="anchor" id="aphow_sec"></a>
How It Works</h1>
<p>The function checks if there are any peasants that are idle or if there are any that could be interrupted from what they are doing. Then it has some logic that determines whether the peasants should be gathering wood or gold. For example if the AI currently has too much gold or too many gold miners, those peasants will be reassigned to harvest lumber. If there are no idle peasants or none that need to be switched, but trainmore is true, the function will check if the AI has enough resources to train a peasant, and if it can it will do so. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00439">439</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00041">aaHarvestLumber</a>, <a class="el" href="GameDataTypes_8h_source.html#l00042">aaMineGold</a>, <a class="el" href="GameDataTypes_8h_source.html#l00034">aaNone</a>, <a class="el" href="GameDataTypes_8h_source.html#l00052">actBuildPeasant</a>, <a class="el" href="GameDataTypes_8h_source.html#l00071">actConvey</a>, <a class="el" href="GameDataTypes_8h_source.html#l00068">actMine</a>, <a class="el" href="GameDataTypes_8h_source.html#l00098">atGoldMine</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00027">SPlayerCommandRequest::DTargetColor</a>, <a class="el" href="PlayerCommand_8h_source.html#l00029">SPlayerCommandRequest::DTargetLocation</a>, <a class="el" href="PlayerCommand_8h_source.html#l00028">SPlayerCommandRequest::DTargetType</a>, <a class="el" href="PlayerAsset_8cpp_source.html#l00097">CPlayerCapability::FindCapability()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00106">SearchMap()</a>, <a class="el" href="Position_8cpp_source.html#l00121">CPosition::SetFromTile()</a>, <a class="el" href="TerrainMap_8h_source.html#l00031">CTerrainMap::ttTree</a>, and <a class="el" href="Position_8h_source.html#l00062">CPosition::X()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                                                              {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">//auto IdleAssets = DPlayerData-&gt;IdleAssets();</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; MiningAsset;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; InterruptibleAsset;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; TownHallAsset;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordtype">int</span> GoldMiners = 0;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordtype">int</span> LumberHarvesters = 0;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordtype">bool</span> SwitchToGold = <span class="keyword">false</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordtype">bool</span> SwitchToLumber = <span class="keyword">false</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    </div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// Iterates through all of the AI&#39;s assets.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;Assets()){</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="comment">// Checks that the asset pointer is valid.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="comment">// Checks if the asset has the ability to mine (is a peasant).</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b">actMine</a>)){</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                <span class="comment">// Checks there is no peasant mining and if the current asset</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="comment">// is idle.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <span class="keywordflow">if</span>(!MiningAsset &amp;&amp; (<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> == Asset-&gt;Action())){</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    MiningAsset = Asset;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                <span class="comment">// Checks if the asset is currently mining.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                <span class="keywordflow">if</span>(Asset-&gt;HasAction(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b">aaMineGold</a>)){</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    GoldMiners++; </div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                    <span class="comment">// Checks if the asset can be interrupted (stopped from its</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                    <span class="comment">// current action), and if it is not idle.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                    <span class="keywordflow">if</span>(Asset-&gt;Interruptible() &amp;&amp; (<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> != Asset-&gt;Action())){</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        InterruptibleAsset = Asset;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                    }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="comment">// Checks if the asset is currently harvesting wood.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(Asset-&gt;HasAction(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee">aaHarvestLumber</a>)){</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    LumberHarvesters++;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                    <span class="keywordflow">if</span>(Asset-&gt;Interruptible() &amp;&amp; (<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> != Asset-&gt;Action())){</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                        InterruptibleAsset = Asset;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                    }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="comment">// Checks if the asset is a Town Hall and whether it is idle.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a>) &amp;&amp; (<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> == Asset-&gt;Action())){</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                TownHallAsset = Asset;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span>((2 &lt;= GoldMiners)&amp;&amp;(0 == LumberHarvesters)){</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        SwitchToLumber = <span class="keyword">true</span>; </div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((2 &lt;= LumberHarvesters)&amp;&amp;(0 == GoldMiners)){</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        SwitchToGold = <span class="keyword">true</span>; </div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// Checks if there is an idle peasant, or if a peasant must switch from</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// gathering wood to gathering gold, or vice versa.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span>(MiningAsset || (InterruptibleAsset &amp;&amp; (SwitchToLumber || SwitchToGold))){</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// Checks if there is a peasant that just finished gathering a resource.</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span>(MiningAsset &amp;&amp; (MiningAsset-&gt;Lumber() || MiningAsset-&gt;Gold())){</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="comment">// Makes that peasant take the resources back to Town Hall.</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cead52ccba78becf1f7411bcea19f1276a8">actConvey</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a3690a5117efe6214d92f18d672b5714f">DTargetColor</a> = TownHallAsset-&gt;Color();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(MiningAsset);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a864e47c641127665751091876a6d3c5e">DTargetType</a> = TownHallAsset-&gt;Type();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a> = TownHallAsset-&gt;Position();</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="comment">// Checks if there are no idle peasants.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="keywordflow">if</span>(!MiningAsset){</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="comment">// Since the function got here, it means that the AI needs to </span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <span class="comment">// gather a different resource, but there are no idle peasants,</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="comment">// so one of them must be interrupted.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                MiningAsset = InterruptibleAsset;   </div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="comment">// Finds the nearest gold mine.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keyword">auto</span> GoldMineAsset = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FindNearestAsset(MiningAsset-&gt;Position(), <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="comment">// Checks if there are peasants gathering gold and either the </span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="comment">// AI has three times more gold than lumber, or there </span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="comment">// are too many peasants mining gold.</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">if</span>(GoldMiners &amp;&amp; ((<a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;Gold() &gt; <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;Lumber() * 3) || SwitchToLumber)){</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <span class="comment">// Finds the nearest tree tile location</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> LumberLocation = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerMap()-&gt;FindNearestReachableTileType(MiningAsset-&gt;TilePosition(), <a class="code" href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c">CTerrainMap::ttTree</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <span class="comment">// Checks if a tree tile was found.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <span class="keywordflow">if</span>(0 &lt;= LumberLocation.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    <span class="comment">// Makes the peasant start gathering wood.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b">actMine</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(MiningAsset);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a>.<a class="code" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">SetFromTile</a>(LumberLocation);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <span class="keywordflow">else</span>{</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    <span class="comment">// If no wood was found, the map must be explored so wood is</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    <span class="comment">// found.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>(command);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="comment">// If there aren&#39;t too many gold miners or if the AI doesn&#39;t </span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="comment">// have too much gold, the peasants will be given the command</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="comment">// to mine gold.</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b">actMine</a>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(MiningAsset);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a864e47c641127665751091876a6d3c5e">DTargetType</a> = <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a> = GoldMineAsset-&gt;Position();</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="comment">// Peasants successfully activated.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">// If no changes must be made regarding gathering, but more peasants must</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// be produced.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(TownHallAsset &amp;&amp; trainmore){</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keyword">auto</span> PlayerCapability = <a class="code" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a>(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a>); </div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        </div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="comment">// Checks if the AI player has the capability to produce peasants.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">if</span>(PlayerCapability){</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="comment">// Checks if the AI has enough resources to produce a peasant.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">if</span>(PlayerCapability-&gt;CanApply(TownHallAsset, <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>, TownHallAsset)){</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(TownHallAsset);       </div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a> = TownHallAsset-&gt;Position();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <span class="comment">// Successfully started producing a peasant.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// Was unable to make peasants gather or to produce any peasants.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div><div class="ttc" id="classCAIPlayer_html_afafbe8fc589e09a16ae1f02f2794d7b0"><div class="ttname"><a href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a></div><div class="ttdeci">bool SearchMap(SPlayerCommandRequest &amp;command)</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00106">AIPlayer.cpp:106</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00052">GameDataTypes.h:52</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a3690a5117efe6214d92f18d672b5714f"><div class="ttname"><a href="structSPlayerCommandRequest.html#a3690a5117efe6214d92f18d672b5714f">SPlayerCommandRequest::DTargetColor</a></div><div class="ttdeci">EPlayerColor DTargetColor</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00027">PlayerCommand.h:27</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="classCPosition_html"><div class="ttname"><a href="classCPosition.html">CPosition</a></div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00022">Position.h:22</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee">aaHarvestLumber</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00041">GameDataTypes.h:41</a></div></div>
<div class="ttc" id="classCPosition_html_a9a6b94d3b91df1492d166d9964c865fc"><div class="ttname"><a href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">CPosition::X</a></div><div class="ttdeci">int X() const</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00062">Position.h:62</a></div></div>
<div class="ttc" id="classCTerrainMap_html_aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c"><div class="ttname"><a href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c">CTerrainMap::ttTree</a></div><div class="ttdef"><b>Definition:</b> <a href="TerrainMap_8h_source.html#l00031">TerrainMap.h:31</a></div></div>
<div class="ttc" id="classCPlayerCapability_html_a881ba4b87385d7cfe5cb6ced2d26f226"><div class="ttname"><a href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a></div><div class="ttdeci">static std::shared_ptr&lt; CPlayerCapability &gt; FindCapability(EAssetCapabilityType type)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00097">PlayerAsset.cpp:97</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a701702b94ca2fd2738e95ef6711dd41a"><div class="ttname"><a href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">SPlayerCommandRequest::DTargetLocation</a></div><div class="ttdeci">CPosition DTargetLocation</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00029">PlayerCommand.h:29</a></div></div>
<div class="ttc" id="classCPosition_html_a46994e6a8b8e3b4237edd7259ad844b6"><div class="ttname"><a href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">CPosition::SetFromTile</a></div><div class="ttdeci">void SetFromTile(const CPosition &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8cpp_source.html#l00121">Position.cpp:121</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b">actMine</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00068">GameDataTypes.h:68</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cead52ccba78becf1f7411bcea19f1276a8"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cead52ccba78becf1f7411bcea19f1276a8">actConvey</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00071">GameDataTypes.h:71</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00034">GameDataTypes.h:34</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00098">GameDataTypes.h:98</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b">aaMineGold</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00042">GameDataTypes.h:42</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a864e47c641127665751091876a6d3c5e"><div class="ttname"><a href="structSPlayerCommandRequest.html#a864e47c641127665751091876a6d3c5e">SPlayerCommandRequest::DTargetType</a></div><div class="ttdeci">EAssetType DTargetType</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00028">PlayerCommand.h:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_cgraph.png" border="0" usemap="#classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_cgraph" alt=""/></div>
<map name="classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_cgraph" id="classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_cgraph">
<area shape="rect" id="node2" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226" title="CPlayerCapability::\lFindCapability" alt="" coords="272,5,417,47"/>
<area shape="rect" id="node3" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0" title="CAIPlayer::SearchMap" alt="" coords="261,122,428,149"/>
<area shape="rect" id="node4" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc" title="CPosition::X" alt="" coords="511,97,613,123"/>
<area shape="rect" id="node5" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6" title="CPosition::SetFromTile" alt="" coords="476,159,648,186"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_icgraph.png" border="0" usemap="#classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_icgraph" alt=""/></div>
<map name="classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_icgraph" id="classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="261,5,484,32"/>
</map>
</div>

</div>
</div>
<a id="adf7feeba7debf9f19b000887616d7bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf7feeba7debf9f19b000887616d7bfb">&sect;&nbsp;</a></span>AttackEnemies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::AttackEnemies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used by the AI to select fighters and attack the enemy. </p>
<h1><a class="anchor" id="aehow_sec"></a>
How It Works</h1>
<p>The function looks through all the assets of the AI and tries to find fighters that are not currently fighting, and adds them to a list. If the list isn't empty, all those fighters are ordered to attack the nearest enemy. If none are found, the AI starts searching the map. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00184">184</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00040">aaAttack</a>, <a class="el" href="GameDataTypes_8h_source.html#l00074">actAttack</a>, <a class="el" href="GameDataTypes_8h_source.html#l00096">atArcher</a>, <a class="el" href="GameDataTypes_8h_source.html#l00095">atFootman</a>, <a class="el" href="GameDataTypes_8h_source.html#l00097">atRanger</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00027">SPlayerCommandRequest::DTargetColor</a>, <a class="el" href="PlayerCommand_8h_source.html#l00029">SPlayerCommandRequest::DTargetLocation</a>, <a class="el" href="PlayerCommand_8h_source.html#l00028">SPlayerCommandRequest::DTargetType</a>, <a class="el" href="Position_8h_source.html#l00070">CPosition::IncrementX()</a>, <a class="el" href="Position_8h_source.html#l00088">CPosition::IncrementY()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00106">SearchMap()</a>, <a class="el" href="Position_8h_source.html#l00062">CPosition::X()</a>, and <a class="el" href="Position_8h_source.html#l00080">CPosition::Y()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                                           {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classCPosition.html">CPosition</a> AverageLocation(0,0);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    </div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// The functions searches through all of the AI&#39;s assets to find fighters.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;Assets()){</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2">atFootman</a> == Asset-&gt;Type())||(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8">atArcher</a> == Asset-&gt;Type())||(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0">atRanger</a> == Asset-&gt;Type())){</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="comment">// Checks if the fighter is currently not attacking.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="keywordflow">if</span>(!Asset-&gt;HasAction(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d">aaAttack</a>)){</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="comment">// The fighter is added to a list of actors, ready to</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    <span class="comment">// receive orders.</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(Asset);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    AverageLocation.IncrementX(Asset-&gt;PositionX());</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    AverageLocation.IncrementY(Asset-&gt;PositionY());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// Checks if there are any actors on the list.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span>(command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.size()){</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">// The average location of the group is calculated, since every unit</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">// is on a different tile. </span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        AverageLocation.X(AverageLocation.X() / command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.size());</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        AverageLocation.Y(AverageLocation.Y() / command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.size());</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">// Finds the location of the nearest enemy.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keyword">auto</span> TargetEnemy = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FindNearestEnemy(AverageLocation, -1).lock();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">// If there are no nearby enemies, get back to searching the map.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span>(!TargetEnemy){</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.clear();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>(command);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// Attacks the enemy.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaf90bc0c36c70d816217d0d4b08b0ba4c">actAttack</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a> = TargetEnemy-&gt;Position();</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        command.<a class="code" href="structSPlayerCommandRequest.html#a3690a5117efe6214d92f18d672b5714f">DTargetColor</a> = TargetEnemy-&gt;Color();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        command.<a class="code" href="structSPlayerCommandRequest.html#a864e47c641127665751091876a6d3c5e">DTargetType</a> = TargetEnemy-&gt;Type(); </div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">// Successfully attacked the enemy.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Failed to attack the enemy.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;    </div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div><div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ceaf90bc0c36c70d816217d0d4b08b0ba4c"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaf90bc0c36c70d816217d0d4b08b0ba4c">actAttack</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00074">GameDataTypes.h:74</a></div></div>
<div class="ttc" id="classCAIPlayer_html_afafbe8fc589e09a16ae1f02f2794d7b0"><div class="ttname"><a href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a></div><div class="ttdeci">bool SearchMap(SPlayerCommandRequest &amp;command)</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00106">AIPlayer.cpp:106</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0">atRanger</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00097">GameDataTypes.h:97</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a3690a5117efe6214d92f18d672b5714f"><div class="ttname"><a href="structSPlayerCommandRequest.html#a3690a5117efe6214d92f18d672b5714f">SPlayerCommandRequest::DTargetColor</a></div><div class="ttdeci">EPlayerColor DTargetColor</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00027">PlayerCommand.h:27</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="classCPosition_html"><div class="ttname"><a href="classCPosition.html">CPosition</a></div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00022">Position.h:22</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2">atFootman</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00095">GameDataTypes.h:95</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a701702b94ca2fd2738e95ef6711dd41a"><div class="ttname"><a href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">SPlayerCommandRequest::DTargetLocation</a></div><div class="ttdeci">CPosition DTargetLocation</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00029">PlayerCommand.h:29</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d">aaAttack</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00040">GameDataTypes.h:40</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8">atArcher</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00096">GameDataTypes.h:96</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a864e47c641127665751091876a6d3c5e"><div class="ttname"><a href="structSPlayerCommandRequest.html#a864e47c641127665751091876a6d3c5e">SPlayerCommandRequest::DTargetType</a></div><div class="ttdeci">EAssetType DTargetType</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00028">PlayerCommand.h:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_cgraph.png" border="0" usemap="#classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_cgraph" alt=""/></div>
<map name="classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_cgraph" id="classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_cgraph">
<area shape="rect" id="node2" href="classCPosition.html#aa5955d67d5ab7ca74d80cb7303b6eaa9" title="CPosition::IncrementX" alt="" coords="245,5,415,32"/>
<area shape="rect" id="node3" href="classCPosition.html#a3f2a26798bb27b1252ff1be303b3adfc" title="CPosition::IncrementY" alt="" coords="246,56,414,83"/>
<area shape="rect" id="node4" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0" title="CAIPlayer::SearchMap" alt="" coords="247,157,413,184"/>
<area shape="rect" id="node5" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc" title="CPosition::X" alt="" coords="497,107,600,133"/>
<area shape="rect" id="node7" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87" title="CPosition::Y" alt="" coords="279,208,381,235"/>
<area shape="rect" id="node6" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6" title="CPosition::SetFromTile" alt="" coords="463,157,635,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_icgraph.png" border="0" usemap="#classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_icgraph" alt=""/></div>
<map name="classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_icgraph" id="classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="245,5,468,32"/>
</map>
</div>

</div>
</div>
<a id="a2ff5263cbaa6bfc62ffec4dbce87ba88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff5263cbaa6bfc62ffec4dbce87ba88">&sect;&nbsp;</a></span>BuildBuilding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::BuildBuilding </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a>&#160;</td>
          <td class="paramname"><em>buildingtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a>&#160;</td>
          <td class="paramname"><em>neartype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used by the AI to build a building other than the Town Hall. Returns true or false, depending on whether it was able to build or not. </p>
<h1><a class="anchor" id="bthhow_sec"></a>
How It Works</h1>
<p>First he function tries to find a builder, the Town Hall and the building next to which it is supposed to build. The functions has multiple checks for determining whether a building is currently being built. If another building is being built, the function returns false. Otherwise it can proceed. In case no neartype was passed in, the building will be constructed next to the town hall. The building will be built such that the AI expands its base toward the center of the map. This means that for example, if the center of the map is to the North-West of the AI's Town Hall, the building will be constructed to the North-West of the neartype building. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00294">294</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00035">aaConstruct</a>, <a class="el" href="GameDataTypes_8h_source.html#l00034">aaNone</a>, <a class="el" href="GameDataTypes_8h_source.html#l00058">actBuildBarracks</a>, <a class="el" href="GameDataTypes_8h_source.html#l00060">actBuildBlacksmith</a>, <a class="el" href="GameDataTypes_8h_source.html#l00056">actBuildFarm</a>, <a class="el" href="GameDataTypes_8h_source.html#l00059">actBuildLumberMill</a>, <a class="el" href="GameDataTypes_8h_source.html#l00052">actBuildPeasant</a>, <a class="el" href="GameDataTypes_8h_source.html#l00103">atBarracks</a>, <a class="el" href="GameDataTypes_8h_source.html#l00105">atBlacksmith</a>, <a class="el" href="GameDataTypes_8h_source.html#l00104">atLumberMill</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="Position_8h_source.html#l00075">CPosition::DecrementX()</a>, <a class="el" href="Position_8h_source.html#l00093">CPosition::DecrementY()</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00029">SPlayerCommandRequest::DTargetLocation</a>, <a class="el" href="PlayerAsset_8cpp_source.html#l00097">CPlayerCapability::FindCapability()</a>, <a class="el" href="Position_8h_source.html#l00070">CPosition::IncrementX()</a>, <a class="el" href="Position_8h_source.html#l00088">CPosition::IncrementY()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00106">SearchMap()</a>, <a class="el" href="Position_8cpp_source.html#l00121">CPosition::SetFromTile()</a>, <a class="el" href="Position_8h_source.html#l00062">CPosition::X()</a>, and <a class="el" href="Position_8h_source.html#l00080">CPosition::Y()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                                                                                         {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; BuilderAsset;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; TownHallAsset;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; NearAsset;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ce">EAssetCapabilityType</a> BuildAction;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordtype">bool</span> AssetIsIdle = <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    </div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Assigns an action based on the type of building that must be built.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">switch</span>(buildingtype){</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230">atBarracks</a>:    BuildAction = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaea47e79df21160eb97064a18e6d36cac">actBuildBarracks</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c">atLumberMill</a>:  BuildAction = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaea7fb8009561a58e7b9f2cf741989242">actBuildLumberMill</a>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca2b2badd6cba3212eef87ac295bf9642e">atBlacksmith</a>:  BuildAction = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea45224b077989530810879da4e225eac7">actBuildBlacksmith</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">default</span>:            BuildAction = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea4de8df4d0a9c3bb6fe33e380bc407078">actBuildFarm</a>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// Loops through all the AI&#39;s assets.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;Assets()){</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">// Checks that the asset pointer is valid.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="comment">// Checks if the asset is able to build a specific building, </span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="comment">// and whether it can be interrupted from whatever it is doing.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(BuildAction) &amp;&amp; Asset-&gt;Interruptible()){</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="comment">// Checks if no builder was assinged yet, or if there is a </span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="comment">// mismatch between the local bool AssetIsIdle and whether</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="comment">// the asset really is idle.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span>(!BuilderAsset || (!AssetIsIdle &amp;&amp; (<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> == Asset-&gt;Action()))){</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    BuilderAsset = Asset;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    <span class="comment">// Sets AssetIsIdle to true if the asset isn&#39;t doing </span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    <span class="comment">// anything.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    AssetIsIdle = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> == Asset-&gt;Action();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="comment">// Checks if the asset can build peasants (basically looking for a </span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="comment">// Town Hall).</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a>)){</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                TownHallAsset = Asset;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="comment">// Checks if the asset is currently building.</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasActiveCapability(BuildAction)){</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="comment">// Returns false, most likely because it can better determine </span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="comment">// what it needs to do after the building is completed. It might</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <span class="comment">// change where this building should be built, or whether it </span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="comment">// should be built at all.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;    </div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="comment">// Checks if this asset is a building of type neartype, and if </span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="comment">// that building isn&#39;t currently being contructed.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span>((neartype == Asset-&gt;Type())&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> != Asset-&gt;Action())){</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                NearAsset = Asset;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="comment">// Checks if the asset is a building of type buildingtype.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">if</span>(buildingtype == Asset-&gt;Type()){</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="comment">// Checks if the building is currently being built.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    <span class="comment">// Returns false to avoid building more buildings than</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    <span class="comment">// needed.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;   </div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">//Checks if the building the AI is trying to build is not the same as the </span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// building it is supposed to be build near, and  if there is no building</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// of the neartype.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span>((buildingtype != neartype) &amp;&amp; !NearAsset){</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">// Returns false because there is no building that buildingtype can be</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="comment">// built near. </span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;    </div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// Checks if there is a builder (peasant).</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span>(BuilderAsset){</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keyword">auto</span> PlayerCapability = <a class="code" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a>(BuildAction);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="comment">// Sets the position where to build at the Town Hall, in case no</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="comment">// neartype is passed in.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="classCPosition.html">CPosition</a> SourcePosition = TownHallAsset-&gt;TilePosition();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="classCPosition.html">CPosition</a> MapCenter(<a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerMap()-&gt;Width()/2, <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerMap()-&gt;Height()/2);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        </div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="comment">// If a neartype is passed in, it sets the source to that.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span>(NearAsset){</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            SourcePosition = NearAsset-&gt;TilePosition();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">/*  </span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">            The next four if statements are used to determine how to adjust the</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">            source position. The adjustment is calculated based on where the </span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">            center of the map is. The source position is adjusted in such a way </span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">            that the AI will expand its base toward the center of the map.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">        */</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span>(MapCenter.X() &lt; SourcePosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            SourcePosition.<a class="code" href="classCPosition.html#a64f0d8ef8ca26c8b66b0997b3b132416">DecrementX</a>(TownHallAsset-&gt;Size()/2);   </div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(MapCenter.X() &gt; SourcePosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            SourcePosition.<a class="code" href="classCPosition.html#aa5955d67d5ab7ca74d80cb7303b6eaa9">IncrementX</a>(TownHallAsset-&gt;Size()/2);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span>(MapCenter.Y() &lt; SourcePosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>()){</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            SourcePosition.<a class="code" href="classCPosition.html#a51ee44d9e0457d6277567fd8a66fdec7">DecrementY</a>(TownHallAsset-&gt;Size()/2);   </div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(MapCenter.Y() &gt; SourcePosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>()){</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            SourcePosition.<a class="code" href="classCPosition.html#a3f2a26798bb27b1252ff1be303b3adfc">IncrementY</a>(TownHallAsset-&gt;Size()/2);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment">// Finds the best location to build, based on the source position.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="classCPosition.html">CPosition</a> Placement = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FindBestAssetPlacement(SourcePosition, BuilderAsset, buildingtype, 1);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="comment">// Checks if a placement was not found.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">if</span>(0 &gt; Placement.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="comment">// Searches the map for another place where it could build.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>(command);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">// Checks if the AI Player is capable of building.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span>(PlayerCapability){</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="comment">// Checks if the AI Player can start building, based on the chosen</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="comment">// peasant and the AI&#39;s current resources.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">if</span>(PlayerCapability-&gt;CanInitiate(BuilderAsset, <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>)){</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <span class="comment">// Checks if a placement was found. </span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keywordflow">if</span>(0 &lt;= Placement.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    <span class="comment">// The builder is commanded to build at the chosen position,</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    <span class="comment">// and true is returned.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = BuildAction;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(BuilderAsset);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a>.<a class="code" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">SetFromTile</a>(Placement);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// Returns false if it was unable to build the building.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="ttc" id="classCAIPlayer_html_afafbe8fc589e09a16ae1f02f2794d7b0"><div class="ttname"><a href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a></div><div class="ttdeci">bool SearchMap(SPlayerCommandRequest &amp;command)</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00106">AIPlayer.cpp:106</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ceaea7fb8009561a58e7b9f2cf741989242"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaea7fb8009561a58e7b9f2cf741989242">actBuildLumberMill</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00059">GameDataTypes.h:59</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00052">GameDataTypes.h:52</a></div></div>
<div class="ttc" id="classCPosition_html_a51ee44d9e0457d6277567fd8a66fdec7"><div class="ttname"><a href="classCPosition.html#a51ee44d9e0457d6277567fd8a66fdec7">CPosition::DecrementY</a></div><div class="ttdeci">int DecrementY(int y)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00093">Position.h:93</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="classCPosition_html"><div class="ttname"><a href="classCPosition.html">CPosition</a></div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00022">Position.h:22</a></div></div>
<div class="ttc" id="classCPosition_html_a9a6b94d3b91df1492d166d9964c865fc"><div class="ttname"><a href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">CPosition::X</a></div><div class="ttdeci">int X() const</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00062">Position.h:62</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c">atLumberMill</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00104">GameDataTypes.h:104</a></div></div>
<div class="ttc" id="classCPlayerCapability_html_a881ba4b87385d7cfe5cb6ced2d26f226"><div class="ttname"><a href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a></div><div class="ttdeci">static std::shared_ptr&lt; CPlayerCapability &gt; FindCapability(EAssetCapabilityType type)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00097">PlayerAsset.cpp:97</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a701702b94ca2fd2738e95ef6711dd41a"><div class="ttname"><a href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">SPlayerCommandRequest::DTargetLocation</a></div><div class="ttdeci">CPosition DTargetLocation</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00029">PlayerCommand.h:29</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ce"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ce">EAssetCapabilityType</a></div><div class="ttdeci">EAssetCapabilityType</div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00050">GameDataTypes.h:50</a></div></div>
<div class="ttc" id="classCPosition_html_a46994e6a8b8e3b4237edd7259ad844b6"><div class="ttname"><a href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">CPosition::SetFromTile</a></div><div class="ttdeci">void SetFromTile(const CPosition &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8cpp_source.html#l00121">Position.cpp:121</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00035">GameDataTypes.h:35</a></div></div>
<div class="ttc" id="classCPosition_html_a1aa8a30e2f08dda1f797736ba8c13a87"><div class="ttname"><a href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">CPosition::Y</a></div><div class="ttdeci">int Y() const</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00080">Position.h:80</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="classCPosition_html_a64f0d8ef8ca26c8b66b0997b3b132416"><div class="ttname"><a href="classCPosition.html#a64f0d8ef8ca26c8b66b0997b3b132416">CPosition::DecrementX</a></div><div class="ttdeci">int DecrementX(int x)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00075">Position.h:75</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ceaea47e79df21160eb97064a18e6d36cac"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaea47e79df21160eb97064a18e6d36cac">actBuildBarracks</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00058">GameDataTypes.h:58</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea4de8df4d0a9c3bb6fe33e380bc407078"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea4de8df4d0a9c3bb6fe33e380bc407078">actBuildFarm</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00056">GameDataTypes.h:56</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea45224b077989530810879da4e225eac7"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea45224b077989530810879da4e225eac7">actBuildBlacksmith</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00060">GameDataTypes.h:60</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00034">GameDataTypes.h:34</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca2b2badd6cba3212eef87ac295bf9642e"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca2b2badd6cba3212eef87ac295bf9642e">atBlacksmith</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00105">GameDataTypes.h:105</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230">atBarracks</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00103">GameDataTypes.h:103</a></div></div>
<div class="ttc" id="classCPosition_html_a3f2a26798bb27b1252ff1be303b3adfc"><div class="ttname"><a href="classCPosition.html#a3f2a26798bb27b1252ff1be303b3adfc">CPosition::IncrementY</a></div><div class="ttdeci">int IncrementY(int y)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00088">Position.h:88</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
<div class="ttc" id="classCPosition_html_aa5955d67d5ab7ca74d80cb7303b6eaa9"><div class="ttname"><a href="classCPosition.html#aa5955d67d5ab7ca74d80cb7303b6eaa9">CPosition::IncrementX</a></div><div class="ttdeci">int IncrementX(int x)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00070">Position.h:70</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_cgraph.png" border="0" usemap="#classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_cgraph" alt=""/></div>
<map name="classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_cgraph" id="classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_cgraph">
<area shape="rect" id="node2" href="classCPosition.html#a64f0d8ef8ca26c8b66b0997b3b132416" title="CPosition::DecrementX" alt="" coords="229,5,405,32"/>
<area shape="rect" id="node3" href="classCPosition.html#a51ee44d9e0457d6277567fd8a66fdec7" title="CPosition::DecrementY" alt="" coords="230,208,405,235"/>
<area shape="rect" id="node4" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6" title="CPosition::SetFromTile" alt="" coords="458,56,630,83"/>
<area shape="rect" id="node10" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226" title="CPlayerCapability::\lFindCapability" alt="" coords="245,259,390,301"/>
<area shape="rect" id="node11" href="classCPosition.html#aa5955d67d5ab7ca74d80cb7303b6eaa9" title="CPosition::IncrementX" alt="" coords="233,325,402,352"/>
<area shape="rect" id="node12" href="classCPosition.html#a3f2a26798bb27b1252ff1be303b3adfc" title="CPosition::IncrementY" alt="" coords="233,376,401,403"/>
<area shape="rect" id="node13" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0" title="CAIPlayer::SearchMap" alt="" coords="234,107,401,133"/>
<area shape="rect" id="node14" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc" title="CPosition::X" alt="" coords="493,107,595,133"/>
<area shape="rect" id="node15" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87" title="CPosition::Y" alt="" coords="266,427,369,453"/>
<area shape="rect" id="node5" href="classCPosition.html#ac6a1eeaeb98e20942efea7cf253b2ec4" title="CPosition::SetXFromTile" alt="" coords="453,208,635,235"/>
<area shape="rect" id="node6" href="classCPosition.html#a4be1caa5ce58297e9d371f6bc1db32d9" title="CPosition::SetYFromTile" alt="" coords="454,259,634,285"/>
<area shape="rect" id="node7" href="classCPosition.html#ae302aa21792de64c97de29e2cbbfeb94" title="CPosition::SetToTile" alt="" coords="467,309,621,336"/>
<area shape="rect" id="node8" href="classCPosition.html#a12795d06d34e608697b7b4c9bf202a10" title="CPosition::SetXToTile" alt="" coords="463,360,625,387"/>
<area shape="rect" id="node9" href="classCPosition.html#a5805485f623398197ac595a5d389f691" title="CPosition::SetYToTile" alt="" coords="463,157,625,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_icgraph.png" border="0" usemap="#classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_icgraph" alt=""/></div>
<map name="classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_icgraph" id="classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="229,5,452,32"/>
</map>
</div>

</div>
</div>
<a id="a41cdefbe14210fb70b793a32778c5141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41cdefbe14210fb70b793a32778c5141">&sect;&nbsp;</a></span>BuildTownHall()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::BuildTownHall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used by the AI to build a Town Hall. Returns true or false, depending on whether it was able to build or not. </p>
<h1><a class="anchor" id="bthhow_sec"></a>
How It Works</h1>
<p>First the function looks through all the AI's assets to find one that can build things. Once a builder is found, the function looks for the closest gold mine to the builder. Next, it determines the best position to build the Town Hall. Usually that is right next to the mine, so the peasants can mine gold faster. If it finds a good position, it commands that builder to build a Town Hall. If it can't find a placement for the building, it will search the map. If a Town Hall can't be built, the function returns false. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00236">236</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00057">actBuildTownHall</a>, <a class="el" href="GameDataTypes_8h_source.html#l00098">atGoldMine</a>, <a class="el" href="GameDataTypes_8h_source.html#l00099">atTownHall</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00029">SPlayerCommandRequest::DTargetLocation</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00106">SearchMap()</a>, <a class="el" href="Position_8cpp_source.html#l00121">CPosition::SetFromTile()</a>, and <a class="el" href="Position_8h_source.html#l00062">CPosition::X()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                                           {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// Creates a list of the AI&#39;s idle assets.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">auto</span> IdleAssets = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;IdleAssets();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// Declares a pointer to an asset.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; BuilderAsset;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    </div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// Looks through every idle asset</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : IdleAssets){</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// Checks whether the asset pointer is valid and assigns it to Asset.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="comment">// Checks whether the asset is able to build a Town Hall.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea0b5f001e8c77b8a87998da6320595498">actBuildTownHall</a>)){</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="comment">// If the asset can build a Town Hall, the BuilderAsset will be </span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="comment">// set to point to that asset.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                BuilderAsset = Asset;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// Checks if an asset that can build was found (or peasant).</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span>(BuilderAsset){</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">// Find the gold mine that is nearest to the peasant and assign it to a</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// variable.</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keyword">auto</span> GoldMineAsset = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FindNearestAsset(BuilderAsset-&gt;Position(), <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="comment">// Finds the best place to build the Town Hall, based on the gold mine&#39;s</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">// position.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="classCPosition.html">CPosition</a> Placement = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FindBestAssetPlacement(GoldMineAsset-&gt;TilePosition(), BuilderAsset, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a>, 1);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// Checks if a position for the Town Hall was found</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">if</span>(0 &lt;= Placement.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="comment">// Assigns up the command to execute (Build Town Hall).</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea0b5f001e8c77b8a87998da6320595498">actBuildTownHall</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">// Adds the actor who is supposed to perform the action to DActors.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(BuilderAsset);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="comment">// Sets the location where the action should be performed.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a>.<a class="code" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">SetFromTile</a>(Placement);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="comment">// Returns true because the peasant started building.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="comment">// Searches the map to find another position. Possible reason</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="comment">// could be that there was no gold mine nearby. Returns the result</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="comment">// of that search.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>(command);  </div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Returns false if it couldn&#39;t build a Town Hall.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div><div class="ttc" id="classCAIPlayer_html_afafbe8fc589e09a16ae1f02f2794d7b0"><div class="ttname"><a href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a></div><div class="ttdeci">bool SearchMap(SPlayerCommandRequest &amp;command)</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00106">AIPlayer.cpp:106</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="classCPosition_html"><div class="ttname"><a href="classCPosition.html">CPosition</a></div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00022">Position.h:22</a></div></div>
<div class="ttc" id="classCPosition_html_a9a6b94d3b91df1492d166d9964c865fc"><div class="ttname"><a href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">CPosition::X</a></div><div class="ttdeci">int X() const</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00062">Position.h:62</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a701702b94ca2fd2738e95ef6711dd41a"><div class="ttname"><a href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">SPlayerCommandRequest::DTargetLocation</a></div><div class="ttdeci">CPosition DTargetLocation</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00029">PlayerCommand.h:29</a></div></div>
<div class="ttc" id="classCPosition_html_a46994e6a8b8e3b4237edd7259ad844b6"><div class="ttname"><a href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">CPosition::SetFromTile</a></div><div class="ttdeci">void SetFromTile(const CPosition &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8cpp_source.html#l00121">Position.cpp:121</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea0b5f001e8c77b8a87998da6320595498"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea0b5f001e8c77b8a87998da6320595498">actBuildTownHall</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00057">GameDataTypes.h:57</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00098">GameDataTypes.h:98</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00099">GameDataTypes.h:99</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_cgraph.png" border="0" usemap="#classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_cgraph" alt=""/></div>
<map name="classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_cgraph" id="classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_cgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0" title="CAIPlayer::SearchMap" alt="" coords="240,31,407,57"/>
<area shape="rect" id="node3" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc" title="CPosition::X" alt="" coords="489,5,592,32"/>
<area shape="rect" id="node4" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6" title="CPosition::SetFromTile" alt="" coords="455,68,627,95"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_icgraph.png" border="0" usemap="#classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_icgraph" alt=""/></div>
<map name="classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_icgraph" id="classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="240,5,463,32"/>
</map>
</div>

</div>
</div>
<a id="ae2742efd250c7d6c00b659ccc29c4be3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2742efd250c7d6c00b659ccc29c4be3">&sect;&nbsp;</a></span>CalculateCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CAIPlayer::CalculateCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decides what actions the AI should take. </p>
<h1><a class="anchor" id="cchow_sec"></a>
How It Works</h1>
<p>Explanation of how it works on <a class="el" href="index.html">AI Main Page</a>. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00714">714</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="AIPlayer_8cpp_source.html#l00574">ActivateFighters()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00439">ActivatePeasants()</a>, <a class="el" href="GameDataTypes_8h_source.html#l00051">actNone</a>, <a class="el" href="GameDataTypes_8h_source.html#l00096">atArcher</a>, <a class="el" href="GameDataTypes_8h_source.html#l00103">atBarracks</a>, <a class="el" href="GameDataTypes_8h_source.html#l00101">atCastle</a>, <a class="el" href="GameDataTypes_8h_source.html#l00102">atFarm</a>, <a class="el" href="GameDataTypes_8h_source.html#l00095">atFootman</a>, <a class="el" href="GameDataTypes_8h_source.html#l00098">atGoldMine</a>, <a class="el" href="GameDataTypes_8h_source.html#l00100">atKeep</a>, <a class="el" href="GameDataTypes_8h_source.html#l00104">atLumberMill</a>, <a class="el" href="GameDataTypes_8h_source.html#l00093">atNone</a>, <a class="el" href="GameDataTypes_8h_source.html#l00094">atPeasant</a>, <a class="el" href="GameDataTypes_8h_source.html#l00097">atRanger</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00184">AttackEnemies()</a>, <a class="el" href="GameDataTypes_8h_source.html#l00099">atTownHall</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00294">BuildBuilding()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00236">BuildTownHall()</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="AIPlayer_8h_source.html#l00031">DCycle</a>, <a class="el" href="AIPlayer_8h_source.html#l00032">DDownSample</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00027">SPlayerCommandRequest::DTargetColor</a>, <a class="el" href="PlayerCommand_8h_source.html#l00028">SPlayerCommandRequest::DTargetType</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00150">FindEnemies()</a>, <a class="el" href="GameDataTypes_8h_source.html#l00021">pcNone</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00106">SearchMap()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00663">TrainArcher()</a>, and <a class="el" href="AIPlayer_8cpp_source.html#l00618">TrainFootman()</a>.</p>
<div class="fragment"><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                                                              {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaa8df154ad276f6f62054e9b5b0696f92">actNone</a>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.clear();    </div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    command.<a class="code" href="structSPlayerCommandRequest.html#a3690a5117efe6214d92f18d672b5714f">DTargetColor</a> = <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729">pcNone</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    command.<a class="code" href="structSPlayerCommandRequest.html#a864e47c641127665751091876a6d3c5e">DTargetType</a> = <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593">atNone</a>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// Checks if the AI is allowed to take an action yet. </span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="classCAIPlayer.html#adf12a7afe7ea86410b18eff47fa95253">DCycle</a> % <a class="code" href="classCAIPlayer.html#a091aed92cb9ad1a789900a6394d2f352">DDownSample</a>) == 0){</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="comment">// Checks if the AI has any gold left in the local gold mine.</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span>(0 == <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FoundAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a>)){</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="comment">// Search for gold mine</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <a class="code" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>(command);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        } </div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="comment">// Checks if there is a Town Hall</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((0 == <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a>))&amp;&amp;(0 == <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a>))&amp;&amp;(0 == <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a">atCastle</a>))){</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <a class="code" href="classCAIPlayer.html#a41cdefbe14210fb70b793a32778c5141">BuildTownHall</a>(command);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        } </div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment">// Checks if the AI has fewer than five peasants</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(5 &gt; <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61">atPeasant</a>)){</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="comment">// Makes the peasants gather resources/ produce more peasants.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <a class="code" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819">ActivatePeasants</a>(command, <span class="keyword">true</span>);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="comment">// Checks if the AI has enough map visibility.</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(12 &gt; <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;VisibilityMap()-&gt;SeenPercent(100)){</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="comment">// Starts searching the map to get more visibility.</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <a class="code" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>(command);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <span class="comment">// CompletedAction is initialized to false, and set to true if the </span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="comment">// AI has completed an action. To prevent the AI from completing</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="comment">// multiple actions in one cycle, every if statement checks</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="comment">// !CompletedAction</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keywordtype">bool</span> CompletedAction = <span class="keyword">false</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="keywordtype">int</span> BarracksCount = 0;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordtype">int</span> FootmanCount = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2">atFootman</a>);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordtype">int</span> ArcherCount = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8">atArcher</a>)+<a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0">atRanger</a>);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="comment">// Checks whether the food consumption of units is bigger than</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <span class="comment">// the food production</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction &amp;&amp; (<a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FoodConsumption() &gt;= <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FoodProduction())){</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <span class="comment">// Builds a farm to have more food production</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88">BuildBuilding</a>(command, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5">atFarm</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5">atFarm</a>);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction){</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                <span class="comment">// Makes peasants go back to gathering, because they will be</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                <span class="comment">// idle after building a farm.</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819">ActivatePeasants</a>(command, <span class="keyword">false</span>);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="comment">// Checks whether the AI has a Barracks</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction &amp;&amp; (0 == (BarracksCount = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230">atBarracks</a>)))){</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                <span class="comment">// Builds a Barracks next to a Farm</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88">BuildBuilding</a>(command, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230">atBarracks</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5">atFarm</a>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <span class="comment">// Checks if there are fewer than five Footmen</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction &amp;&amp; (5 &gt; FootmanCount)){</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                <span class="comment">// Trains a footman</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#aa3f9c1d0d449a45a24e065d2086527b0">TrainFootman</a>(command);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="comment">// Checks whether the AI has a Lumber Mill</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction &amp;&amp; (0 == <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c">atLumberMill</a>))){</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <span class="comment">// Builds a Lumber Mill next to the Barracks</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88">BuildBuilding</a>(command, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c">atLumberMill</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230">atBarracks</a>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="comment">// Checks whether the AI has fewer than five archers</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction &amp;&amp;  (5 &gt; ArcherCount)){</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <span class="comment">// Trains an Archer</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#af2edf1e3c54d6af693f768f86d484fd6">TrainArcher</a>(command);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="comment">// It checks whether it has a Footman.</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction &amp;&amp; <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerAssetCount(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2">atFootman</a>)){</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <span class="comment">// Sends the Footman to find the enemy.</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#a33b1533570e7a00114d1b85b3551e395">FindEnemies</a>(command);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction){</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                <span class="comment">// Selects the fighters</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#a4216d7e76315234a4fe22fb3a0a89c1d">ActivateFighters</a>(command);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="comment">// Checks if the AI has at least five Footmen and five Archers.</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">if</span>(!CompletedAction &amp;&amp; ((5 &lt;= FootmanCount) &amp;&amp; (5 &lt;= ArcherCount))){</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                CompletedAction = <a class="code" href="classCAIPlayer.html#adf7feeba7debf9f19b000887616d7bfb">AttackEnemies</a>(command);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="classCAIPlayer.html#adf12a7afe7ea86410b18eff47fa95253">DCycle</a>++;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}</div><div class="ttc" id="classCAIPlayer_html_afafbe8fc589e09a16ae1f02f2794d7b0"><div class="ttname"><a href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a></div><div class="ttdeci">bool SearchMap(SPlayerCommandRequest &amp;command)</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00106">AIPlayer.cpp:106</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a">atCastle</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00101">GameDataTypes.h:101</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0">atRanger</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00097">GameDataTypes.h:97</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ceaa8df154ad276f6f62054e9b5b0696f92"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaa8df154ad276f6f62054e9b5b0696f92">actNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00051">GameDataTypes.h:51</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a3690a5117efe6214d92f18d672b5714f"><div class="ttname"><a href="structSPlayerCommandRequest.html#a3690a5117efe6214d92f18d672b5714f">SPlayerCommandRequest::DTargetColor</a></div><div class="ttdeci">EPlayerColor DTargetColor</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00027">PlayerCommand.h:27</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a3fab1c955fd68bb53fa80bb1872d2819"><div class="ttname"><a href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819">CAIPlayer::ActivatePeasants</a></div><div class="ttdeci">bool ActivatePeasants(SPlayerCommandRequest &amp;command, bool trainmore)</div><div class="ttdoc">Function used by the AI to produce peasants and to make them gather resources. </div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00439">AIPlayer.cpp:439</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a4216d7e76315234a4fe22fb3a0a89c1d"><div class="ttname"><a href="classCAIPlayer.html#a4216d7e76315234a4fe22fb3a0a89c1d">CAIPlayer::ActivateFighters</a></div><div class="ttdeci">bool ActivateFighters(SPlayerCommandRequest &amp;command)</div><div class="ttdoc">Selects fighting units that will be able to receive orders as a group. Returns true or false dependin...</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00574">AIPlayer.cpp:574</a></div></div>
<div class="ttc" id="classCAIPlayer_html_adf7feeba7debf9f19b000887616d7bfb"><div class="ttname"><a href="classCAIPlayer.html#adf7feeba7debf9f19b000887616d7bfb">CAIPlayer::AttackEnemies</a></div><div class="ttdeci">bool AttackEnemies(SPlayerCommandRequest &amp;command)</div><div class="ttdoc">Function used by the AI to select fighters and attack the enemy. </div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00184">AIPlayer.cpp:184</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2">atFootman</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00095">GameDataTypes.h:95</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c">atLumberMill</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00104">GameDataTypes.h:104</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00100">GameDataTypes.h:100</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729"><div class="ttname"><a href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729">pcNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00021">GameDataTypes.h:21</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5">atFarm</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00102">GameDataTypes.h:102</a></div></div>
<div class="ttc" id="classCAIPlayer_html_af2edf1e3c54d6af693f768f86d484fd6"><div class="ttname"><a href="classCAIPlayer.html#af2edf1e3c54d6af693f768f86d484fd6">CAIPlayer::TrainArcher</a></div><div class="ttdeci">bool TrainArcher(SPlayerCommandRequest &amp;command)</div><div class="ttdoc">Function used by the AI to train Archers. </div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00663">AIPlayer.cpp:663</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593">atNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00093">GameDataTypes.h:93</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61">atPeasant</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00094">GameDataTypes.h:94</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8">atArcher</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00096">GameDataTypes.h:96</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00098">GameDataTypes.h:98</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a33b1533570e7a00114d1b85b3551e395"><div class="ttname"><a href="classCAIPlayer.html#a33b1533570e7a00114d1b85b3551e395">CAIPlayer::FindEnemies</a></div><div class="ttdeci">bool FindEnemies(SPlayerCommandRequest &amp;command)</div><div class="ttdoc">Function used by the AI to find enemies by searching assets that are visible to it on the map...</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00150">AIPlayer.cpp:150</a></div></div>
<div class="ttc" id="classCAIPlayer_html_adf12a7afe7ea86410b18eff47fa95253"><div class="ttname"><a href="classCAIPlayer.html#adf12a7afe7ea86410b18eff47fa95253">CAIPlayer::DCycle</a></div><div class="ttdeci">int DCycle</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00031">AIPlayer.h:31</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230">atBarracks</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00103">GameDataTypes.h:103</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00099">GameDataTypes.h:99</a></div></div>
<div class="ttc" id="classCAIPlayer_html_aa3f9c1d0d449a45a24e065d2086527b0"><div class="ttname"><a href="classCAIPlayer.html#aa3f9c1d0d449a45a24e065d2086527b0">CAIPlayer::TrainFootman</a></div><div class="ttdeci">bool TrainFootman(SPlayerCommandRequest &amp;command)</div><div class="ttdoc">Function used by the AI to train Footmen. </div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00618">AIPlayer.cpp:618</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a091aed92cb9ad1a789900a6394d2f352"><div class="ttname"><a href="classCAIPlayer.html#a091aed92cb9ad1a789900a6394d2f352">CAIPlayer::DDownSample</a></div><div class="ttdeci">int DDownSample</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00032">AIPlayer.h:32</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a2ff5263cbaa6bfc62ffec4dbce87ba88"><div class="ttname"><a href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88">CAIPlayer::BuildBuilding</a></div><div class="ttdeci">bool BuildBuilding(SPlayerCommandRequest &amp;command, EAssetType buildingtype, EAssetType neartype)</div><div class="ttdoc">Function used by the AI to build a building other than the Town Hall. Returns true or false...</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00294">AIPlayer.cpp:294</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a41cdefbe14210fb70b793a32778c5141"><div class="ttname"><a href="classCAIPlayer.html#a41cdefbe14210fb70b793a32778c5141">CAIPlayer::BuildTownHall</a></div><div class="ttdeci">bool BuildTownHall(SPlayerCommandRequest &amp;command)</div><div class="ttdoc">Function used by the AI to build a Town Hall. Returns true or false, depending on whether it was able...</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00236">AIPlayer.cpp:236</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a864e47c641127665751091876a6d3c5e"><div class="ttname"><a href="structSPlayerCommandRequest.html#a864e47c641127665751091876a6d3c5e">SPlayerCommandRequest::DTargetType</a></div><div class="ttdeci">EAssetType DTargetType</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00028">PlayerCommand.h:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3_cgraph.png" border="0" usemap="#classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3_cgraph" alt=""/></div>
<map name="classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3_cgraph" id="classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3_cgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#a4216d7e76315234a4fe22fb3a0a89c1d" title="Selects fighting units that will be able to receive orders as a group. Returns true or false dependin..." alt="" coords="280,5,480,32"/>
<area shape="rect" id="node3" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819" title="Function used by the AI to produce peasants and to make them gather resources. " alt="" coords="276,157,484,184"/>
<area shape="rect" id="node5" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0" title="CAIPlayer::SearchMap" alt="" coords="537,259,703,285"/>
<area shape="rect" id="node8" href="classCAIPlayer.html#adf7feeba7debf9f19b000887616d7bfb" title="Function used by the AI to select fighters and attack the enemy. " alt="" coords="284,385,476,412"/>
<area shape="rect" id="node12" href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88" title="Function used by the AI to build a building other than the Town Hall. Returns true or false..." alt="" coords="292,487,468,513"/>
<area shape="rect" id="node20" href="classCAIPlayer.html#a41cdefbe14210fb70b793a32778c5141" title="Function used by the AI to build a Town Hall. Returns true or false, depending on whether it was able..." alt="" coords="287,309,473,336"/>
<area shape="rect" id="node21" href="classCAIPlayer.html#a33b1533570e7a00114d1b85b3551e395" title="Function used by the AI to find enemies by searching assets that are visible to it on the map..." alt="" coords="291,259,469,285"/>
<area shape="rect" id="node22" href="classCAIPlayer.html#af2edf1e3c54d6af693f768f86d484fd6" title="Function used by the AI to train Archers. " alt="" coords="295,56,465,83"/>
<area shape="rect" id="node23" href="classCAIPlayer.html#aa3f9c1d0d449a45a24e065d2086527b0" title="Function used by the AI to train Footmen. " alt="" coords="287,107,473,133"/>
<area shape="rect" id="node4" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226" title="CPlayerCapability::\lFindCapability" alt="" coords="547,41,693,82"/>
<area shape="rect" id="node6" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc" title="CPosition::X" alt="" coords="795,259,898,285"/>
<area shape="rect" id="node7" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6" title="CPosition::SetFromTile" alt="" coords="761,360,933,387"/>
<area shape="rect" id="node9" href="classCPosition.html#aa5955d67d5ab7ca74d80cb7303b6eaa9" title="CPosition::IncrementX" alt="" coords="535,411,705,437"/>
<area shape="rect" id="node10" href="classCPosition.html#a3f2a26798bb27b1252ff1be303b3adfc" title="CPosition::IncrementY" alt="" coords="536,461,704,488"/>
<area shape="rect" id="node11" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87" title="CPosition::Y" alt="" coords="569,512,671,539"/>
<area shape="rect" id="node13" href="classCPosition.html#a64f0d8ef8ca26c8b66b0997b3b132416" title="CPosition::DecrementX" alt="" coords="532,715,708,741"/>
<area shape="rect" id="node14" href="classCPosition.html#a51ee44d9e0457d6277567fd8a66fdec7" title="CPosition::DecrementY" alt="" coords="533,664,707,691"/>
<area shape="rect" id="node15" href="classCPosition.html#ac6a1eeaeb98e20942efea7cf253b2ec4" title="CPosition::SetXFromTile" alt="" coords="756,715,937,741"/>
<area shape="rect" id="node16" href="classCPosition.html#a4be1caa5ce58297e9d371f6bc1db32d9" title="CPosition::SetYFromTile" alt="" coords="757,765,937,792"/>
<area shape="rect" id="node17" href="classCPosition.html#ae302aa21792de64c97de29e2cbbfeb94" title="CPosition::SetToTile" alt="" coords="769,563,924,589"/>
<area shape="rect" id="node18" href="classCPosition.html#a12795d06d34e608697b7b4c9bf202a10" title="CPosition::SetXToTile" alt="" coords="765,613,928,640"/>
<area shape="rect" id="node19" href="classCPosition.html#a5805485f623398197ac595a5d389f691" title="CPosition::SetYToTile" alt="" coords="765,664,928,691"/>
</map>
</div>

</div>
</div>
<a id="a33b1533570e7a00114d1b85b3551e395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33b1533570e7a00114d1b85b3551e395">&sect;&nbsp;</a></span>FindEnemies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::FindEnemies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used by the AI to find enemies by searching assets that are visible to it on the map. </p>
<h1><a class="anchor" id="fehow_sec"></a>
How It Works</h1>
<p>It first finds a Town Hall of the AI, then it searches in a range around that building. The range in this case is unlimited. The function calls <a class="el" href="classCPlayerData.html#a5f0a1280933f7bb9a65ab256ecff1a69">CPlayerData::FindNearestEnemy</a>, which iterates through all the assets the AI can see on the map and checks whether its player color is different than the AI's. It also checks if that asset it found is alive. If the pointer to the nearest enemy is expired, the function returns the result of <a class="el" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>. It returns false if it can't find anything. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00150">150</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00052">actBuildPeasant</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, and <a class="el" href="AIPlayer_8cpp_source.html#l00106">SearchMap()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                                         {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; TownHallAsset;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    </div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// This loop looks through assets to find a Town Hall.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;Assets()){</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a>)){</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                TownHallAsset = Asset;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// Checks if the pointer to the enemy has expired (was deleted).</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// It starts searching for an enemy from the Town Hall. </span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// The range is unlimited (-1).</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// FindNearestEnemy searches for an asset on the map that has a different </span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// color than the AI and that is alive.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;FindNearestEnemy(TownHallAsset-&gt;Position(), -1).expired()){</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// If the asset pointer is expired it starts exploring the map.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">SearchMap</a>(command);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// Returns false if it didn&#39;t find an enemy.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;    </div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="ttc" id="classCAIPlayer_html_afafbe8fc589e09a16ae1f02f2794d7b0"><div class="ttname"><a href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a></div><div class="ttdeci">bool SearchMap(SPlayerCommandRequest &amp;command)</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8cpp_source.html#l00106">AIPlayer.cpp:106</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71">actBuildPeasant</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00052">GameDataTypes.h:52</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_cgraph.png" border="0" usemap="#classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_cgraph" alt=""/></div>
<map name="classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_cgraph" id="classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_cgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0" title="CAIPlayer::SearchMap" alt="" coords="232,31,399,57"/>
<area shape="rect" id="node3" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc" title="CPosition::X" alt="" coords="481,5,584,32"/>
<area shape="rect" id="node4" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6" title="CPosition::SetFromTile" alt="" coords="447,56,619,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_icgraph.png" border="0" usemap="#classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_icgraph" alt=""/></div>
<map name="classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_icgraph" id="classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="232,5,455,32"/>
</map>
</div>

</div>
</div>
<a id="afafbe8fc589e09a16ae1f02f2794d7b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afafbe8fc589e09a16ae1f02f2794d7b0">&sect;&nbsp;</a></span>SearchMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::SearchMap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00106">106</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00066">actMove</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00029">SPlayerCommandRequest::DTargetLocation</a>, <a class="el" href="Position_8cpp_source.html#l00121">CPosition::SetFromTile()</a>, <a class="el" href="TerrainMap_8h_source.html#l00027">CTerrainMap::ttNone</a>, and <a class="el" href="Position_8h_source.html#l00062">CPosition::X()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00439">ActivatePeasants()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00184">AttackEnemies()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00294">BuildBuilding()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00236">BuildTownHall()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>, and <a class="el" href="AIPlayer_8cpp_source.html#l00150">FindEnemies()</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                                       {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">auto</span> IdleAssets = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;IdleAssets();</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; MovableAsset;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    </div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// This loop searches through all the idle assets of the AI to find one that</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// can move.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : IdleAssets){</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;Speed()){</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                MovableAsset = Asset;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Checks if a unit was found.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span>(MovableAsset){</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">// Finds the nearest tile that is still covered by fog of war.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="classCPosition.html">CPosition</a> UnknownPosition = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;PlayerMap()-&gt;FindNearestReachableTileType(MovableAsset-&gt;TilePosition(), <a class="code" href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a481e779132fb16414d17870bd6229eb5">CTerrainMap::ttNone</a>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        </div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="comment">// Checks if it has found an unexplored tile.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span>(0 &lt;= UnknownPosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="comment">//printf(&quot;Unkown Position (%d, %d)\n&quot;, UnknownPosition.X(), UnknownPosition.Y());</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="comment">// Moves the unit toward that tile.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaac071f5baee87f2a5ce94c03750a44af">actMove</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(MovableAsset);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a>.<a class="code" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">SetFromTile</a>(UnknownPosition);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="comment">// Successfully explored more of the map.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// Couldn&#39;t explore more of the map.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div><div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="classCPosition_html"><div class="ttname"><a href="classCPosition.html">CPosition</a></div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00022">Position.h:22</a></div></div>
<div class="ttc" id="classCPosition_html_a9a6b94d3b91df1492d166d9964c865fc"><div class="ttname"><a href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">CPosition::X</a></div><div class="ttdeci">int X() const</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00062">Position.h:62</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a701702b94ca2fd2738e95ef6711dd41a"><div class="ttname"><a href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">SPlayerCommandRequest::DTargetLocation</a></div><div class="ttdeci">CPosition DTargetLocation</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00029">PlayerCommand.h:29</a></div></div>
<div class="ttc" id="classCPosition_html_a46994e6a8b8e3b4237edd7259ad844b6"><div class="ttname"><a href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">CPosition::SetFromTile</a></div><div class="ttdeci">void SetFromTile(const CPosition &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8cpp_source.html#l00121">Position.cpp:121</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ceaac071f5baee87f2a5ce94c03750a44af"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaac071f5baee87f2a5ce94c03750a44af">actMove</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00066">GameDataTypes.h:66</a></div></div>
<div class="ttc" id="classCTerrainMap_html_aff2ab991e237269941416dd79d8871d4a481e779132fb16414d17870bd6229eb5"><div class="ttname"><a href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a481e779132fb16414d17870bd6229eb5">CTerrainMap::ttNone</a></div><div class="ttdef"><b>Definition:</b> <a href="TerrainMap_8h_source.html#l00027">TerrainMap.h:27</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_cgraph.png" border="0" usemap="#classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_cgraph" alt=""/></div>
<map name="classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_cgraph" id="classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_cgraph">
<area shape="rect" id="node2" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6" title="CPosition::SetFromTile" alt="" coords="220,5,392,32"/>
<area shape="rect" id="node3" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc" title="CPosition::X" alt="" coords="255,56,357,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_icgraph.png" border="0" usemap="#classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_icgraph" alt=""/></div>
<map name="classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_icgraph" id="classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819" title="Function used by the AI to produce peasants and to make them gather resources. " alt="" coords="220,5,428,32"/>
<area shape="rect" id="node3" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="476,132,699,159"/>
<area shape="rect" id="node4" href="classCAIPlayer.html#adf7feeba7debf9f19b000887616d7bfb" title="Function used by the AI to select fighters and attack the enemy. " alt="" coords="228,107,420,133"/>
<area shape="rect" id="node5" href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88" title="Function used by the AI to build a building other than the Town Hall. Returns true or false..." alt="" coords="236,157,412,184"/>
<area shape="rect" id="node6" href="classCAIPlayer.html#a41cdefbe14210fb70b793a32778c5141" title="Function used by the AI to build a Town Hall. Returns true or false, depending on whether it was able..." alt="" coords="231,208,417,235"/>
<area shape="rect" id="node7" href="classCAIPlayer.html#a33b1533570e7a00114d1b85b3551e395" title="Function used by the AI to find enemies by searching assets that are visible to it on the map..." alt="" coords="235,259,413,285"/>
</map>
</div>

</div>
</div>
<a id="af2edf1e3c54d6af693f768f86d484fd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2edf1e3c54d6af693f768f86d484fd6">&sect;&nbsp;</a></span>TrainArcher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::TrainArcher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used by the AI to train Archers. </p>
<h1><a class="anchor" id="tfhow_sec"></a>
How It Works</h1>
<p>The function first checks whether the AI has an idle asset which can train Archers. Then it checks whether the AI has the ability to train archers and the resources necessary to do so. If those conditions are met, the Barracks is given a command to build a Footman. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00663">663</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00054">actBuildArcher</a>, <a class="el" href="GameDataTypes_8h_source.html#l00055">actBuildRanger</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00029">SPlayerCommandRequest::DTargetLocation</a>, and <a class="el" href="PlayerAsset_8cpp_source.html#l00097">CPlayerCapability::FindCapability()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                                                         {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keyword">auto</span> IdleAssets = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;IdleAssets();</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; TrainingAsset;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ce">EAssetCapabilityType</a> BuildType = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b">actBuildArcher</a>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// Searches through a list of all idle assets for one which has the </span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// capability of training Archers (Lumber Mill).</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : IdleAssets){</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b">actBuildArcher</a>)){</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                TrainingAsset = Asset;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                BuildType = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b">actBuildArcher</a>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cead539d31a3eb945161800e6342a05fb11">actBuildRanger</a>)){</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                TrainingAsset = Asset;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                BuildType = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cead539d31a3eb945161800e6342a05fb11">actBuildRanger</a>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            </div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// Checks if Lumber Mill was found.</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span>(TrainingAsset){</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="comment">// Finds the AI&#39;s ability to train Archers.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keyword">auto</span> PlayerCapability = <a class="code" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a>(BuildType); </div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">if</span>(PlayerCapability){</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="comment">// Checks if the AI has enough resources to train an Archer.</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">if</span>(PlayerCapability-&gt;CanApply(TrainingAsset, <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>, TrainingAsset)){</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <span class="comment">// Gives the Lumber Mill the command to train an archer</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = BuildType;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(TrainingAsset);       </div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a> = TrainingAsset-&gt;Position();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="comment">// Returns true because it was successful.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;     <span class="comment">// Returns false because it was unable to train an Archer.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b">actBuildArcher</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00054">GameDataTypes.h:54</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cead539d31a3eb945161800e6342a05fb11"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cead539d31a3eb945161800e6342a05fb11">actBuildRanger</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00055">GameDataTypes.h:55</a></div></div>
<div class="ttc" id="classCPlayerCapability_html_a881ba4b87385d7cfe5cb6ced2d26f226"><div class="ttname"><a href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a></div><div class="ttdeci">static std::shared_ptr&lt; CPlayerCapability &gt; FindCapability(EAssetCapabilityType type)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00097">PlayerAsset.cpp:97</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a701702b94ca2fd2738e95ef6711dd41a"><div class="ttname"><a href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">SPlayerCommandRequest::DTargetLocation</a></div><div class="ttdeci">CPosition DTargetLocation</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00029">PlayerCommand.h:29</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ce"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ce">EAssetCapabilityType</a></div><div class="ttdeci">EAssetCapabilityType</div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00050">GameDataTypes.h:50</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_cgraph.png" border="0" usemap="#classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_cgraph" alt=""/></div>
<map name="classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_cgraph" id="classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_cgraph">
<area shape="rect" id="node2" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226" title="CPlayerCapability::\lFindCapability" alt="" coords="223,5,368,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_icgraph.png" border="0" usemap="#classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_icgraph" alt=""/></div>
<map name="classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_icgraph" id="classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="223,5,445,32"/>
</map>
</div>

</div>
</div>
<a id="aa3f9c1d0d449a45a24e065d2086527b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3f9c1d0d449a45a24e065d2086527b0">&sect;&nbsp;</a></span>TrainFootman()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CAIPlayer::TrainFootman </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPlayerCommandRequest.html">SPlayerCommandRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used by the AI to train Footmen. </p>
<h1><a class="anchor" id="tfhow_sec"></a>
How It Works</h1>
<p>The function first checks whether the AI has an idle asset which can train Footmen. Then it checks whether the AI has the ability to train footmen and the resources necessary to do so. If those conditions are met, the Barracks is given a command to build a Footman. </p>

<p>Definition at line <a class="el" href="AIPlayer_8cpp_source.html#l00618">618</a> of file <a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a>.</p>

<p>References <a class="el" href="GameDataTypes_8h_source.html#l00053">actBuildFootman</a>, <a class="el" href="PlayerCommand_8h_source.html#l00025">SPlayerCommandRequest::DAction</a>, <a class="el" href="PlayerCommand_8h_source.html#l00026">SPlayerCommandRequest::DActors</a>, <a class="el" href="AIPlayer_8h_source.html#l00030">DPlayerData</a>, <a class="el" href="PlayerCommand_8h_source.html#l00029">SPlayerCommandRequest::DTargetLocation</a>, and <a class="el" href="PlayerAsset_8cpp_source.html#l00097">CPlayerCapability::FindCapability()</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                                          {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keyword">auto</span> IdleAssets = <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>-&gt;IdleAssets();</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; TrainingAsset;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    </div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// Searches through a list of all idle assets for one which has the </span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">// capability of training Footmen (Barracks).</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : IdleAssets){</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;HasCapability(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662">actBuildFootman</a>)){</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                TrainingAsset = Asset;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        }</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// Checks if a Barracks was found</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">if</span>(TrainingAsset){</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="comment">// Finds the AI&#39;s ability to train Footmen</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keyword">auto</span> PlayerCapability = <a class="code" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a>(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662">actBuildFootman</a>); </div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        </div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="comment">// Checks if the AI has the capability of training Footmen.</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span>(PlayerCapability){</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="comment">// Checks if the AI has enough resources to train a Footman.</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span>(PlayerCapability-&gt;CanApply(TrainingAsset, <a class="code" href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">DPlayerData</a>, TrainingAsset)){</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="comment">// Gives the Barracks the command to train a Footman.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">DAction</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662">actBuildFootman</a>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">DActors</a>.push_back(TrainingAsset);       </div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                command.<a class="code" href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">DTargetLocation</a> = TrainingAsset-&gt;Position();</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="comment">// Returns true because it was successful.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">// Returns false because it was unable to train a Footman.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div><div class="ttc" id="structSPlayerCommandRequest_html_aa37fc01519676345703d78b9f573894a"><div class="ttname"><a href="structSPlayerCommandRequest.html#aa37fc01519676345703d78b9f573894a">SPlayerCommandRequest::DActors</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DActors</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00026">PlayerCommand.h:26</a></div></div>
<div class="ttc" id="classCPlayerCapability_html_a881ba4b87385d7cfe5cb6ced2d26f226"><div class="ttname"><a href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a></div><div class="ttdeci">static std::shared_ptr&lt; CPlayerCapability &gt; FindCapability(EAssetCapabilityType type)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00097">PlayerAsset.cpp:97</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a701702b94ca2fd2738e95ef6711dd41a"><div class="ttname"><a href="structSPlayerCommandRequest.html#a701702b94ca2fd2738e95ef6711dd41a">SPlayerCommandRequest::DTargetLocation</a></div><div class="ttdeci">CPosition DTargetLocation</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00029">PlayerCommand.h:29</a></div></div>
<div class="ttc" id="structSPlayerCommandRequest_html_a80897bbccf2c4e0b148a7aa815a926c6"><div class="ttname"><a href="structSPlayerCommandRequest.html#a80897bbccf2c4e0b148a7aa815a926c6">SPlayerCommandRequest::DAction</a></div><div class="ttdeci">EAssetCapabilityType DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerCommand_8h_source.html#l00025">PlayerCommand.h:25</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662">actBuildFootman</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00053">GameDataTypes.h:53</a></div></div>
<div class="ttc" id="classCAIPlayer_html_a83b5113c8f7e80df54940b647c5ee2e6"><div class="ttname"><a href="classCAIPlayer.html#a83b5113c8f7e80df54940b647c5ee2e6">CAIPlayer::DPlayerData</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; DPlayerData</div><div class="ttdef"><b>Definition:</b> <a href="AIPlayer_8h_source.html#l00030">AIPlayer.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_cgraph.png" border="0" usemap="#classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_cgraph" alt=""/></div>
<map name="classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_cgraph" id="classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_cgraph">
<area shape="rect" id="node2" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226" title="CPlayerCapability::\lFindCapability" alt="" coords="240,5,385,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_icgraph.png" border="0" usemap="#classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_icgraph" alt=""/></div>
<map name="classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_icgraph" id="classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_icgraph">
<area shape="rect" id="node2" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3" title="Decides what actions the AI should take. " alt="" coords="240,5,463,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="adf12a7afe7ea86410b18eff47fa95253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf12a7afe7ea86410b18eff47fa95253">&sect;&nbsp;</a></span>DCycle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CAIPlayer::DCycle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AIPlayer_8h_source.html#l00031">31</a> of file <a class="el" href="AIPlayer_8h_source.html">AIPlayer.h</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00096">CAIPlayer()</a>, and <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>

</div>
</div>
<a id="a091aed92cb9ad1a789900a6394d2f352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a091aed92cb9ad1a789900a6394d2f352">&sect;&nbsp;</a></span>DDownSample</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CAIPlayer::DDownSample</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AIPlayer_8h_source.html#l00032">32</a> of file <a class="el" href="AIPlayer_8h_source.html">AIPlayer.h</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00096">CAIPlayer()</a>, and <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>.</p>

</div>
</div>
<a id="a83b5113c8f7e80df54940b647c5ee2e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83b5113c8f7e80df54940b647c5ee2e6">&sect;&nbsp;</a></span>DPlayerData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classCPlayerData.html">CPlayerData</a> &gt; CAIPlayer::DPlayerData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AIPlayer_8h_source.html#l00030">30</a> of file <a class="el" href="AIPlayer_8h_source.html">AIPlayer.h</a>.</p>

<p>Referenced by <a class="el" href="AIPlayer_8cpp_source.html#l00574">ActivateFighters()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00439">ActivatePeasants()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00184">AttackEnemies()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00294">BuildBuilding()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00236">BuildTownHall()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00096">CAIPlayer()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00714">CalculateCommand()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00150">FindEnemies()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00106">SearchMap()</a>, <a class="el" href="AIPlayer_8cpp_source.html#l00663">TrainArcher()</a>, and <a class="el" href="AIPlayer_8cpp_source.html#l00618">TrainFootman()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="AIPlayer_8h_source.html">AIPlayer.h</a></li>
<li>src/<a class="el" href="AIPlayer_8cpp_source.html">AIPlayer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
