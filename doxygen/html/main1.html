<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECS 160 Project: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ECS 160 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#intro_sec">How the AI Works</a><ul><li class="level2"><a href="#gdm_sec">General Decision Making</a></li>
<li class="level2"><a href="#bdm_sec">Battle Decision Making</a></li>
<li class="level2"><a href="#c_sec">How to Improve the AI</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
How the AI Works</h1>
<pre class="fragment">The game AI is contained in two files: \ref AIPlayer.h and \ref AIPlayer.cpp. 

The class \ref CAIPlayer is used to make all the decisions for the AI. The AI Player may only decide which actions to take and when. It cannot do anything that the Human player can't do. This keeps the game balanced and fair. 

The function in \ref CAIPlayer that decides what actions the AI should take is \ref CAIPlayer::CalculateCommand. One of the first things that this function does is determine whether it is allowed to perform an action yet. To manage difficulty, the AI is only allowed to perform an action every so often. To determine when the AI is allowed to perform an action, \ref CAIPlayer has a member variable DCycle, which is an int that is set to zero in the constructor (\ref CAIPlayer::CAIPlayer) and is incremented whenever \ref CAIPlayer::CalculateCommand is called. The AI is only allowed to perform an action if DCycle is currently a multiple of another member variable: DDownSample. By adjusting the value of DDownSample you change the APM (Actions Per Minute) of the AI and therefore you adjust the difficulty. 
</pre><h2><a class="anchor" id="gdm_sec"></a>
General Decision Making</h2>
<p>If the AI is allowed to take an action, it first checks whether it has any gold left at its gold mine; if not it does a <a class="el" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a> to try to find another gold mine.</p>
<p>If it still has gold in the gold mine, the AI next checks whether it has a Town Hall (this is the building that produces peasants, which are used to gather resources and build buildings). Even though you start by default with a Town Hall, if your main gold mine runs out and you need to find another gold mine, it is better to build another Town Hall close to the second mine so the peasants don't have to travel as far, and therefore you gather gold faster.</p>
<p>If the AI has both gold in the mine and a Town Hall, and less than 5 peasants, the AI calls <a class="el" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819">CAIPlayer::ActivatePeasants</a> which makes peasants gather resources.</p>
<p>If the AI has at least 5 peasants and doesn't have enough visibility of the map, it will send a unit (the 5th peasant) to explore.</p>
<p>If the AI has enough map visibility it will start getting ready for battle.</p>
<h2><a class="anchor" id="bdm_sec"></a>
Battle Decision Making</h2>
<pre class="fragment">To get ready for battle, the AI will first check whether it has enough food to produce more units. Producing a unit costs a certain amount of food, and you get food by building farms. If the AI doesn't have enough food, it will build another farm next to another farm if one exists.

If the AI has enough food it activates the peasants, so they get back to gathering resources after building.

When the peasants are gathering again, the AI will check if it has a Barracks. The Barracks is the building used to produce melee units. If there is no Barracks, the AI will build one next to a Farm. After the Barracks is built, the AI will train Footmen until it has five. 

Next it will build a Lumber Mill, which is used to produce ranged units. If the AI doesn't already have one, it will build one next to the Barracks. Once that is done, it will train five Archers.

Once its army is ready, the AI will try to \ref CAIPlayer::FindEnemies. Then it will \ref CAIPlayer::ActivateFighters and if it still has five of each offensive unit type it will \ref CAIPlayer::AttackEnemies. 
</pre><h2><a class="anchor" id="c_sec"></a>
How to Improve the AI</h2>
<pre class="fragment">The AI is currently static. We need to create different difficulty levels by making the following changes: 

-Increase or decrease AI APM.

-Change how many of each type of building the AI should build. (Currently it only builds one Barracks and one Lumber Mill, but if you want to produce more units faster, you need to build more buildings)

-Change how many of each type of unit the AI produces. 

-Give the AI access to the buildings, units and upgrades the player has.(Currently the AI only has access to four buildings and three units, whereas the player has access to all of them)

-Make a way for the AI to use upgrades.

-Make the AI spend more of its money. (Holding on to resources is bad, because it isn't being used to produce anything, and doing anything takes time. So, the AI should keep producing units or building buildings if it can afford to).</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
