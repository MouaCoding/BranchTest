<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECS 160 Project: src/GameModel.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ECS 160 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GameModel.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="GameModel_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    Copyright (c) 2015, Christopher Nitta</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    All source material (source code, images, sounds, etc.) have been provided to</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    University of California, Davis students of course ECS 160 for educational</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    purposes. It may not be distributed beyond those enrolled in the course without</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    prior permission from the copyright holder.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    All sound files, sound fonts, midi files, and images that have been included </span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    that were extracted from original Warcraft II by Blizzard Entertainment </span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    were found freely available via internet sources and have been labeld as </span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    abandonware. They have been included in this distribution for educational </span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    purposes only and this copyright notice does not attempt to claim any </span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    ownership of this material.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GameModel_8h.html">GameModel.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">Debug.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef MIN</span></div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="GameModel_8cpp.html#a3acffbd305ee72dcd4593c0d8af64a4f">   21</a></span>&#160;<span class="preprocessor">    #define MIN(a, b)               ((a) &lt; (b) ? (a) : (b))</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#ifndef MAX</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="GameModel_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">   24</a></span>&#160;<span class="preprocessor">    #define MAX(a, b)               ((a) &gt; (b) ? (a) : (b))</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="GameModel_8cpp.html#afd5c111a1369dc53d1b1230506e99f7c">   27</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="GameModel_8cpp.html#afd5c111a1369dc53d1b1230506e99f7c">RangeToDistanceSquared</a>(<span class="keywordtype">int</span> range){</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    range *= <a class="code" href="classCPosition.html#a27a7a8b9a5541da0aa8d97d785650fb8">CPosition::TileWidth</a>();</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    range *= range;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    range += <a class="code" href="classCPosition.html#a27a7a8b9a5541da0aa8d97d785650fb8">CPosition::TileWidth</a>() * <a class="code" href="classCPosition.html#a27a7a8b9a5541da0aa8d97d785650fb8">CPosition::TileWidth</a>();</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">return</span> range;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classCPlayerData.html#af60332b967ddb3044bd71376656bcdc0">   34</a></span>&#160;<a class="code" href="classCPlayerData.html#af60332b967ddb3044bd71376656bcdc0">CPlayerData::CPlayerData</a>(std::shared_ptr&lt; CAssetDecoratedMap &gt; map, <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602f">EPlayerColor</a> color){</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classCPlayerData.html#ad3fcb8740d4e37b4654c01c8c595e6d5">DIsAI</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classCPlayerData.html#ae92ca06a63a01681dd9f3ddc17c0e106">DGameCycle</a> = 0;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="classCPlayerData.html#a65d69aaa09c8fc0f7ddfa5e858313085">DColor</a> = color;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a> = map;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="classCPlayerData.html#ad922f283c60b1c885dac955815ae2b05">DAssetTypes</a> = <a class="code" href="classCPlayerAssetType.html#a6dfbccbbed7fecec6b7e2c51ac22fe5a">CPlayerAssetType::DuplicateRegistry</a>(color);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a> = <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;CreateInitializeMap();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="classCPlayerData.html#a804ea65e7ec7c90b2e335414d106cc78">DVisibilityMap</a> = <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;CreateVisibilityMap();</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="classCPlayerData.html#afa66ff31262c9b287ae8c13259aae6f3">DGold</a> = 0;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="classCPlayerData.html#adf3bf2fa49b5c8a4fb9a478d95f688c4">DLumber</a> = 0;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    </div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classCPlayerData.html#ae7cb90c31ec46b65ba88485368a4b96a">DUpgrades</a>.resize(<a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea77dccd39fc9e5ee854223444006a6f70">actMax</a>);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Index = 0; Index &lt; <a class="code" href="classCPlayerData.html#ae7cb90c31ec46b65ba88485368a4b96a">DUpgrades</a>.size(); Index++){</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <a class="code" href="classCPlayerData.html#ae7cb90c31ec46b65ba88485368a4b96a">DUpgrades</a>[Index] = <span class="keyword">false</span>;   </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;ResourceInit : <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;ResourceInitializationList()){</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">if</span>(ResourceInit.DColor == color){</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <a class="code" href="classCPlayerData.html#afa66ff31262c9b287ae8c13259aae6f3">DGold</a> = ResourceInit.DGold;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <a class="code" href="classCPlayerData.html#adf3bf2fa49b5c8a4fb9a478d95f688c4">DLumber</a> = ResourceInit.DLumber;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;AssetInit : <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;AssetInitializationList()){</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">if</span>(AssetInit.DColor == color){</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <a class="code" href="Debug_8h.html#aa5f00f5537c9760f6ae1782460748ab9">PrintDebug</a>(<a class="code" href="Debug_8h.html#a3a5f3fc09784650d8388cb854882f840">DEBUG_LOW</a>, <span class="stringliteral">&quot;Init %s %d (%d, %d)\n&quot;</span>, AssetInit.DType.c_str(), AssetInit.DColor, AssetInit.DTilePosition.X(), AssetInit.DTilePosition.Y());</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            std::shared_ptr&lt; CPlayerAsset &gt; InitAsset = <a class="code" href="classCPlayerData.html#a4d203da2adbd6d00b0cd5b334bddba4f">CreateAsset</a>(AssetInit.DType);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            InitAsset-&gt;TilePosition(AssetInit.DTilePosition);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a> == <a class="code" href="classCPlayerAssetType.html#a42d55b6d7606e021c063fce3a14c56de">CPlayerAssetType::NameToType</a>(AssetInit.DType)){</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                InitAsset-&gt;Gold(<a class="code" href="classCPlayerData.html#afa66ff31262c9b287ae8c13259aae6f3">DGold</a>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a45b5ba15a17796acdbaca7eacc7532d0">   67</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCPlayerData.html#a45b5ba15a17796acdbaca7eacc7532d0">CPlayerData::FoodConsumption</a>()<span class="keyword"> const</span>{</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">int</span> TotalConsumption = 0;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    </div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="keywordtype">int</span> AssetConsumption = Asset-&gt;FoodConsumption();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">if</span>(0 &lt; AssetConsumption){</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                TotalConsumption += AssetConsumption;    </div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> TotalConsumption;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="classCPlayerData.html#ae71ad19439d31ba0eb7f59809885ed6d">   81</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCPlayerData.html#ae71ad19439d31ba0eb7f59809885ed6d">CPlayerData::FoodProduction</a>()<span class="keyword"> const</span>{</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">int</span> TotalProduction = 0;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    </div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keywordtype">int</span> AssetConsumption = Asset-&gt;FoodConsumption();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">if</span>((0 &gt; AssetConsumption)&amp;&amp;((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> != Asset-&gt;Action())||(!Asset-&gt;CurrentCommand().DAssetTarget))){</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                TotalProduction += -AssetConsumption;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> TotalProduction;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a4ef7c98c3b0f28354a2bccc2782b57ad">   95</a></span>&#160;std::shared_ptr&lt; CPlayerAsset &gt; <a class="code" href="classCPlayerData.html#a4ef7c98c3b0f28354a2bccc2782b57ad">CPlayerData::CreateMarker</a>(<span class="keyword">const</span> <a class="code" href="classCPosition.html">CPosition</a> &amp;pos, <span class="keywordtype">bool</span> addtomap){</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; NewMarker = (*DAssetTypes)[<span class="stringliteral">&quot;None&quot;</span>]-&gt;Construct();</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classCPosition.html">CPosition</a> TilePosition;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    </div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    TilePosition.<a class="code" href="classCPosition.html#ae302aa21792de64c97de29e2cbbfeb94">SetToTile</a>(pos);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    NewMarker-&gt;TilePosition(TilePosition);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span>(addtomap){</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;AddAsset(NewMarker);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> NewMarker;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a4d203da2adbd6d00b0cd5b334bddba4f">  108</a></span>&#160;std::shared_ptr&lt; CPlayerAsset &gt; <a class="code" href="classCPlayerData.html#a4d203da2adbd6d00b0cd5b334bddba4f">CPlayerData::CreateAsset</a>(<span class="keyword">const</span> std::string &amp;assettypename){</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; CreatedAsset = (*DAssetTypes)[assettypename]-&gt;Construct();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    CreatedAsset-&gt;CreationCycle(<a class="code" href="classCPlayerData.html#ae92ca06a63a01681dd9f3ddc17c0e106">DGameCycle</a>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>.push_back(CreatedAsset);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;AddAsset(CreatedAsset);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> CreatedAsset;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a24f56e033f6d68ceba0f876d854201f0">  117</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCPlayerData.html#a24f56e033f6d68ceba0f876d854201f0">CPlayerData::DeleteAsset</a>(std::shared_ptr&lt; CPlayerAsset &gt; asset){</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">auto</span> Iterator = <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>.begin();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">while</span>(Iterator != <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>.end()){</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">if</span>(Iterator-&gt;lock() == asset){</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>.erase(Iterator);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        Iterator++;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;RemoveAsset(asset);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a21238056db09447e0ed054aafbd953c1">  129</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCPlayerData.html#a21238056db09447e0ed054aafbd953c1">CPlayerData::AssetRequirementsMet</a>(<span class="keyword">const</span> std::string &amp;assettypename){</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    std::vector&lt; int &gt; AssetCount;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    </div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    AssetCount.resize(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca92fbf60b4e5c335160f915b6a1c17c05">atMax</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    </div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> != Asset-&gt;Action()){</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                AssetCount[Asset-&gt;Type()]++;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> Requirement : (*<a class="code" href="classCPlayerData.html#ad922f283c60b1c885dac955815ae2b05">DAssetTypes</a>)[assettypename]-&gt;AssetRequirements()){</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span>(0 == AssetCount[Requirement]){</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a> == Requirement)&amp;&amp;(AssetCount[<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a">atCastle</a>])){</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                <span class="keywordflow">continue</span>;               </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a> == Requirement)&amp;&amp;(AssetCount[<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a>]||AssetCount[atCastle])){</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">continue</span>;               </div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;    </div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a3ac1393306e8a3f7c95d13ca01e429a7">  155</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCPlayerData.html#a3ac1393306e8a3f7c95d13ca01e429a7">CPlayerData::UpdateVisibility</a>(){</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    std::list&lt; std::shared_ptr&lt; CPlayerAsset &gt; &gt; RemoveList;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classCPlayerData.html#a804ea65e7ec7c90b2e335414d106cc78">DVisibilityMap</a>-&gt;Update(<a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;UpdateMap(*<a class="code" href="classCPlayerData.html#a804ea65e7ec7c90b2e335414d106cc78">DVisibilityMap</a>, *<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Asset : <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Assets()){</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593">atNone</a> == Asset-&gt;Type())&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> == Asset-&gt;Action())){</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            Asset-&gt;IncrementStep();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>() &lt; Asset-&gt;Step() * 2){</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                RemoveList.push_back(Asset);   </div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Asset : RemoveList){</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;RemoveAsset(Asset);     </div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    </div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classCPlayerData.html#afb3303a53687383e4101d4de37391d84">  174</a></span>&#160;std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; <a class="code" href="classCPlayerData.html#afb3303a53687383e4101d4de37391d84">CPlayerData::SelectAssets</a>(<span class="keyword">const</span> <a class="code" href="structSRectangle.html">SRectangle</a> &amp;selectarea, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> assettype, <span class="keywordtype">bool</span> selectidentical){</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; ReturnList;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    </div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span>((!selectarea.<a class="code" href="structSRectangle.html#a4150898b3f7d90f6e4b0d44bf1ae3bd2">DWidth</a>)||(!selectarea.<a class="code" href="structSRectangle.html#a84ea3c2314c43cab6186170662188899">DHeight</a>)){</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        std::weak_ptr&lt; CPlayerAsset &gt; BestAsset = <a class="code" href="classCPlayerData.html#a1c926b101513f871ec85e34ac3c83ec4">SelectAsset</a>(<a class="code" href="classCPosition.html">CPosition</a>(selectarea.<a class="code" href="structSRectangle.html#abcbddb03b3ee416cc33109833b5f075c">DXPosition</a>, selectarea.<a class="code" href="structSRectangle.html#a120aa0a90033bc6e07c36c151a3bbc71">DYPosition</a>), assettype);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> LockedAsset = BestAsset.lock()){</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            ReturnList.push_back(BestAsset);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">if</span>(selectidentical &amp;&amp; LockedAsset-&gt;Speed()){</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        <span class="keywordflow">if</span>((LockedAsset != Asset)&amp;&amp;(Asset-&gt;Type() == assettype)){</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                            ReturnList.push_back(Asset);   </div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">else</span>{</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordtype">bool</span> AnyMovable = <span class="keyword">false</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="keywordflow">if</span>((selectarea.<a class="code" href="structSRectangle.html#abcbddb03b3ee416cc33109833b5f075c">DXPosition</a> &lt;= Asset-&gt;PositionX())&amp;&amp;(Asset-&gt;PositionX() &lt; selectarea.<a class="code" href="structSRectangle.html#abcbddb03b3ee416cc33109833b5f075c">DXPosition</a> + selectarea.<a class="code" href="structSRectangle.html#a4150898b3f7d90f6e4b0d44bf1ae3bd2">DWidth</a>)&amp;&amp;(selectarea.<a class="code" href="structSRectangle.html#a120aa0a90033bc6e07c36c151a3bbc71">DYPosition</a> &lt;= Asset-&gt;PositionY())&amp;&amp;(Asset-&gt;PositionY() &lt; selectarea.<a class="code" href="structSRectangle.html#a120aa0a90033bc6e07c36c151a3bbc71">DYPosition</a> + selectarea.<a class="code" href="structSRectangle.html#a84ea3c2314c43cab6186170662188899">DHeight</a>)){</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    <span class="keywordflow">if</span>(AnyMovable){</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="keywordflow">if</span>(Asset-&gt;Speed()){</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                            ReturnList.push_back(Asset);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <span class="keywordflow">else</span>{</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        <span class="keywordflow">if</span>(Asset-&gt;Speed()){</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            ReturnList.clear();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                            ReturnList.push_back(Asset);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                            AnyMovable = <span class="keyword">true</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            <span class="keywordflow">if</span>(ReturnList.empty()){</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                ReturnList.push_back(Asset);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                            }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                        }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> ReturnList;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a1c926b101513f871ec85e34ac3c83ec4">  221</a></span>&#160;std::weak_ptr&lt; CPlayerAsset &gt; <a class="code" href="classCPlayerData.html#a1c926b101513f871ec85e34ac3c83ec4">CPlayerData::SelectAsset</a>(<span class="keyword">const</span> <a class="code" href="classCPosition.html">CPosition</a> &amp;pos, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> assettype){</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; BestAsset;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">int</span> BestDistanceSquared = -1;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    </div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593">atNone</a> != assettype){</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">if</span>(Asset-&gt;Type() == assettype){</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="keywordtype">int</span> CurrentDistance = Asset-&gt;Position().DistanceSquared(pos);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                    </div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    <span class="keywordflow">if</span>((-1 == BestDistanceSquared)||(CurrentDistance &lt; BestDistanceSquared)){</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                        BestDistanceSquared = CurrentDistance;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                        BestAsset = Asset;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> BestAsset;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a53c9e046c6f43fd83a0feb32b4fe999d">  242</a></span>&#160;std::weak_ptr&lt; CPlayerAsset &gt; <a class="code" href="classCPlayerData.html#a53c9e046c6f43fd83a0feb32b4fe999d">CPlayerData::FindNearestOwnedAsset</a>(<span class="keyword">const</span> <a class="code" href="classCPosition.html">CPosition</a> &amp;pos, <span class="keyword">const</span> std::vector&lt; EAssetType &gt; assettypes){</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; BestAsset;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span> BestDistanceSquared = -1;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;AssetType : assettypes){</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="keywordflow">if</span>((Asset-&gt;Type() == AssetType)&amp;&amp;((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> != Asset-&gt;Action())||(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a> == AssetType)||(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a">atCastle</a> == AssetType))){</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                    <span class="keywordtype">int</span> CurrentDistance = Asset-&gt;Position().DistanceSquared(pos);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                    </div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    <span class="keywordflow">if</span>((-1 == BestDistanceSquared)||(CurrentDistance &lt; BestDistanceSquared)){</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                        BestDistanceSquared = CurrentDistance;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        BestAsset = Asset;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> BestAsset;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a5f70ad16e9b4e8aa9edc6e8fc4136527">  264</a></span>&#160;std::shared_ptr&lt; CPlayerAsset &gt; <a class="code" href="classCPlayerData.html#a5f70ad16e9b4e8aa9edc6e8fc4136527">CPlayerData::FindNearestAsset</a>(<span class="keyword">const</span> <a class="code" href="classCPosition.html">CPosition</a> &amp;pos, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> assettype){</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; BestAsset;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">int</span> BestDistanceSquared = -1;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Asset : <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Assets()){</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span>(Asset-&gt;Type() == assettype){</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordtype">int</span> CurrentDistance = Asset-&gt;Position().DistanceSquared(pos);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            </div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">if</span>((-1 == BestDistanceSquared)||(CurrentDistance &lt; BestDistanceSquared)){</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                BestDistanceSquared = CurrentDistance;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                BestAsset = Asset;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> BestAsset;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a5f0a1280933f7bb9a65ab256ecff1a69">  281</a></span>&#160;std::weak_ptr&lt; CPlayerAsset &gt; <a class="code" href="classCPlayerData.html#a5f0a1280933f7bb9a65ab256ecff1a69">CPlayerData::FindNearestEnemy</a>(<span class="keyword">const</span> <a class="code" href="classCPosition.html">CPosition</a> &amp;pos, <span class="keywordtype">int</span> range){</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    std::shared_ptr&lt; CPlayerAsset &gt; BestAsset;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">int</span> BestDistanceSquared = -1;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    </div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Assume tile width == tile height</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span>(0 &lt; range){</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        range = <a class="code" href="GameModel_8cpp.html#afd5c111a1369dc53d1b1230506e99f7c">RangeToDistanceSquared</a>(range);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> Asset : <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Assets()){</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span>((Asset-&gt;Color() != <a class="code" href="classCPlayerData.html#a65d69aaa09c8fc0f7ddfa5e858313085">DColor</a>)&amp;&amp;(Asset-&gt;Color() != <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729">pcNone</a>)&amp;&amp;(Asset-&gt;Alive())){</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keyword">auto</span> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670acf9fb164e8abd71c71f4a8c7fda360d4">aaCapability</a> == Command.DAction){</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">if</span>((Command.DAssetTarget)&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == Command.DAssetTarget-&gt;Action())){</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    <span class="keywordflow">continue</span>;   </div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ae80ac4dde60023e0a1794e994db7000a">aaConveyGold</a> != Command.DAction)&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7b0954302f27f46b3fdf6fddd530d154">aaConveyLumber</a> != Command.DAction)&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b">aaMineGold</a> != Command.DAction)){</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordtype">int</span> CurrentDistance = Asset-&gt;ClosestPosition(pos).DistanceSquared( pos );<span class="comment">//Asset-&gt;Position().DistanceSquared(pos);</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                </div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">if</span>((0 &gt; range)||(CurrentDistance &lt;= range)){</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    <span class="keywordflow">if</span>((-1 == BestDistanceSquared)||(CurrentDistance &lt; BestDistanceSquared)){</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        BestDistanceSquared = CurrentDistance;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        BestAsset = Asset;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> BestAsset;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classCPlayerData.html#ac43ee660aa07b2d9d96eb5285d50fab5">  312</a></span>&#160;<a class="code" href="classCPosition.html">CPosition</a> <a class="code" href="classCPlayerData.html#ac43ee660aa07b2d9d96eb5285d50fab5">CPlayerData::FindBestAssetPlacement</a>(<span class="keyword">const</span> <a class="code" href="classCPosition.html">CPosition</a> &amp;pos, std::shared_ptr&lt; CPlayerAsset &gt; builder, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> assettype, <span class="keywordtype">int</span> buffer){</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">auto</span> AssetType = (*DAssetTypes)[<a class="code" href="classCPlayerAssetType.html#a66ce89c35b74940e9fc947a1f4b9e770">CPlayerAssetType::TypeToName</a>(assettype)];</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">int</span> PlacementSize = AssetType-&gt;Size() + 2 * buffer;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordtype">int</span> MaxDistance = <a class="code" href="GameModel_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Width(), <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Height()); </div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    </div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Distance = 1; Distance &lt; MaxDistance; Distance++){</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="classCPosition.html">CPosition</a> BestPosition;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordtype">int</span> BestDistance = -1;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordtype">int</span> LeftX = pos.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>() - Distance;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordtype">int</span> TopY = pos.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>() - Distance;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordtype">int</span> RightX = pos.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>() + Distance;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordtype">int</span> BottomY = pos.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>() + Distance;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordtype">bool</span> LeftValid = <span class="keyword">true</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordtype">bool</span> RightValid = <span class="keyword">true</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordtype">bool</span> TopValid = <span class="keyword">true</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordtype">bool</span> BottomValid = <span class="keyword">true</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        </div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span>(0 &gt; LeftX){</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            LeftValid = <span class="keyword">false</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            LeftX = 0;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">if</span>(0 &gt; TopY){</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            TopValid = <span class="keyword">false</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            TopY = 0;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Width() &lt;= RightX){</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            RightValid = <span class="keyword">false</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            RightX = <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Width() - 1;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Height() &lt;= BottomY){</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            BottomValid = <span class="keyword">false</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            BottomY = <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Height() - 1;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">if</span>(TopValid){</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Index = LeftX; Index &lt;= RightX; Index++){</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> TempPosition(Index, TopY);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;CanPlaceAsset(TempPosition, PlacementSize, builder)){</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    <span class="keywordtype">int</span> CurrentDistance = builder-&gt;TilePosition().DistanceSquared(TempPosition);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    <span class="keywordflow">if</span>((-1 == BestDistance)||(CurrentDistance &lt; BestDistance)){</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        BestDistance = CurrentDistance;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                        BestPosition = TempPosition;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span>(RightValid){</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Index = TopY; Index &lt;= BottomY; Index++){</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> TempPosition(RightX, Index);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;CanPlaceAsset(TempPosition, PlacementSize, builder)){</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    <span class="keywordtype">int</span> CurrentDistance = builder-&gt;TilePosition().DistanceSquared(TempPosition);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    <span class="keywordflow">if</span>((-1 == BestDistance)||(CurrentDistance &lt; BestDistance)){</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        BestDistance = CurrentDistance;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                        BestPosition = TempPosition;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">if</span>(BottomValid){</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Index = LeftX; Index &lt;= RightX; Index++){</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> TempPosition(Index, BottomY);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;CanPlaceAsset(TempPosition, PlacementSize, builder)){</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    <span class="keywordtype">int</span> CurrentDistance = builder-&gt;TilePosition().DistanceSquared(TempPosition);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    <span class="keywordflow">if</span>((-1 == BestDistance)||(CurrentDistance &lt; BestDistance)){</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                        BestDistance = CurrentDistance;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                        BestPosition = TempPosition;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">if</span>(LeftValid){</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Index = TopY; Index &lt;= BottomY; Index++){</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> TempPosition(LeftX, Index);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;CanPlaceAsset(TempPosition, PlacementSize, builder)){</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    <span class="keywordtype">int</span> CurrentDistance = builder-&gt;TilePosition().DistanceSquared(TempPosition);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    <span class="keywordflow">if</span>((-1 == BestDistance)||(CurrentDistance &lt; BestDistance)){</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        BestDistance = CurrentDistance;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        BestPosition = TempPosition;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span>(-1 != BestDistance){</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classCPosition.html">CPosition</a>(BestPosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>() + buffer, BestPosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>() + buffer); </div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    </div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCPosition.html">CPosition</a>(-1, -1);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a3fe55bd902f7a819c0689825d8ad3e4c">  401</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCPlayerData.html#a3fe55bd902f7a819c0689825d8ad3e4c">CPlayerData::PlayerAssetCount</a>(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> type){</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordtype">int</span> Count = 0;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    </div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> Asset : <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Assets()){</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">if</span>((Asset-&gt;Color() == <a class="code" href="classCPlayerData.html#a65d69aaa09c8fc0f7ddfa5e858313085">DColor</a>)&amp;&amp;(type == Asset-&gt;Type())){</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            Count++;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    </div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> Count;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classCPlayerData.html#ac81c0899651bf3f9962b03ef0d7a2415">  413</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCPlayerData.html#ac81c0899651bf3f9962b03ef0d7a2415">CPlayerData::FoundAssetCount</a>(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a> type){</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">int</span> Count = 0;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    </div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> Asset : <a class="code" href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">DPlayerMap</a>-&gt;Assets()){</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">if</span>(type == Asset-&gt;Type()){</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            Count++;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    </div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> Count;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="classCPlayerData.html#a5bd2ebe2e3dc25669bb312226e087fd1">  425</a></span>&#160;std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; <a class="code" href="classCPlayerData.html#a5bd2ebe2e3dc25669bb312226e087fd1">CPlayerData::IdleAssets</a>()<span class="keyword"> const</span>{</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; AssetList;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    </div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> WeakAsset : <a class="code" href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">DAssets</a>){</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">auto</span> Asset = WeakAsset.lock()){</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> == Asset-&gt;Action())&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593">atNone</a> != Asset-&gt;Type())){</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                AssetList.push_back(Asset);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    </div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">return</span> AssetList;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classCPlayerData.html#ae66fe7d594267990adf34f9286925efb">  439</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCPlayerData.html#ae66fe7d594267990adf34f9286925efb">CPlayerData::AddUpgrade</a>(<span class="keyword">const</span> std::string &amp;upgradename){</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keyword">auto</span> Upgrade = <a class="code" href="classCPlayerUpgrade.html#af47a08aba3a1a5b2cefacef24065a82e">CPlayerUpgrade::FindUpgradeFromName</a>(upgradename);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    </div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span>(Upgrade){</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span> AssetType : Upgrade-&gt;AffectedAssets()){</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            std::string AssetName = <a class="code" href="classCPlayerAssetType.html#a66ce89c35b74940e9fc947a1f4b9e770">CPlayerAssetType::TypeToName</a>(AssetType);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keyword">auto</span> AssetIterator = <a class="code" href="classCPlayerData.html#ad922f283c60b1c885dac955815ae2b05">DAssetTypes</a>-&gt;find(AssetName);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            </div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">if</span>(AssetIterator != <a class="code" href="classCPlayerData.html#ad922f283c60b1c885dac955815ae2b05">DAssetTypes</a>-&gt;end()){</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                AssetIterator-&gt;second-&gt;AddUpgrade(Upgrade);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            </div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="classCPlayerData.html#ae7cb90c31ec46b65ba88485368a4b96a">DUpgrades</a>[<a class="code" href="classCPlayerCapability.html#a920a696526e8a839f728192aea0ba1c5">CPlayerCapability::NameToType</a>(upgradename)] = <span class="keyword">true</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="classCGameModel.html#a37858821d1294b21b374cf4f81052f3e">  456</a></span>&#160;<a class="code" href="classCGameModel.html#a37858821d1294b21b374cf4f81052f3e">CGameModel::CGameModel</a>(<span class="keywordtype">int</span> mapindex, uint64_t seed, <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602f">EPlayerColor</a> newcolors[<a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34">pcMax</a>]){</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    DHarvestTime = 5;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    DHarvestSteps = <a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>() * DHarvestTime;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    DMineTime = 5;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    DMineSteps = <a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>() * DMineTime;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    DConveyTime = 1;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    DConveySteps = <a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>() * DConveyTime;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    DDeathTime = 1;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    DDeathSteps = <a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>() * DDeathTime;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    DDecayTime = 4;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    DDecaySteps = <a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>() * DDecayTime;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    DLumberPerHarvest = 100;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    DGoldPerMining = 100;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    </div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    DRandomNumberGenerator.Seed(seed);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a> = <a class="code" href="classCAssetDecoratedMap.html#a9d0fa2b32e4e8add6da83a7ebcfab6d8">CAssetDecoratedMap::DuplicateMap</a>(mapindex, newcolors);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    </div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> PlayerIndex = 0; PlayerIndex &lt; <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34">pcMax</a>; PlayerIndex++){</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        DPlayers[PlayerIndex] = std::make_shared&lt; CPlayerData &gt; (<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>, (<a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602f">EPlayerColor</a>)PlayerIndex);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    DAssetOccupancyMap.resize(<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Height());</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Row : DAssetOccupancyMap){</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        Row.resize(<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Width());</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    DDiagonalOccupancyMap.resize(<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Height());</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Row : DDiagonalOccupancyMap){</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        Row.resize(<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Width());</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    </div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    DLumberAvailable.resize(<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Height());</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Row : DLumberAvailable){</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        Row.resize(<a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Width());</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Row = 0; Row &lt; <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Height(); Row++){</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Col = 0; Col &lt; <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Width(); Col++){</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c">CTerrainMap::ttTree</a> == <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;TileType(Col, Row)){</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                DLumberAvailable[Row][Col] = DPlayers[0]-&gt;Lumber();      </div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                DLumberAvailable[Row][Col] = 0;    </div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    </div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="classCGameModel.html#a5e6e46dd32a655e2a4432aeb134cc7e3">  503</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCGameModel.html#a5e6e46dd32a655e2a4432aeb134cc7e3">CGameModel::ValidAsset</a>(std::shared_ptr&lt; CPlayerAsset &gt; asset){</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Asset : <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Assets()){</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span>(asset == Asset){</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;    </div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="classCGameModel.html#ad9c8def41d5369661fab971b9a4fe786">  512</a></span>&#160;std::shared_ptr&lt; CPlayerData &gt; <a class="code" href="classCGameModel.html#ad9c8def41d5369661fab971b9a4fe786">CGameModel::Player</a>(<a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602f">EPlayerColor</a> color)<span class="keyword"> const</span>{</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span>((0 &gt; color)||(<a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34">pcMax</a> &lt;= color)){</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;   </div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">return</span> DPlayers[color];</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="classCGameModel.html#a699325d41d7ff27bda47bfb3048cfd8f">  519</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCGameModel.html#a699325d41d7ff27bda47bfb3048cfd8f">CGameModel::Timestep</a>(){</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    std::vector&lt; SGameEvent &gt; CurrentEvents;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="structSGameEvent.html">SGameEvent</a> TempEvent;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    </div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Row : DAssetOccupancyMap){</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Cell : Row){</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            Cell = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Row : DDiagonalOccupancyMap){</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> Index = 0; Index &lt; Row.size(); Index++){</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            Row[Index] = <span class="keyword">false</span>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Asset : <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Assets()){</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ae80ac4dde60023e0a1794e994db7000a">aaConveyGold</a> != Asset-&gt;Action())&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7b0954302f27f46b3fdf6fddd530d154">aaConveyLumber</a> != Asset-&gt;Action())&amp;&amp;(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b">aaMineGold</a> != Asset-&gt;Action())){</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            DAssetOccupancyMap[Asset-&gt;TilePositionY()][Asset-&gt;TilePositionX()] = Asset;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> PlayerIndex = 1; PlayerIndex &lt; <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34">pcMax</a>; PlayerIndex++){</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span>(DPlayers[PlayerIndex]-&gt;<a class="code" href="classCPlayerData.html#a46ba3f00069e6da5cf4a1203a7456e1d">IsAlive</a>()){</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            DPlayers[PlayerIndex]-&gt;UpdateVisibility();</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keyword">auto</span> AllAssets = <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;Assets();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;Asset : AllAssets){</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            Asset-&gt;PopCommand(); </div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        </div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670acf9fb164e8abd71c71f4a8c7fda360d4">aaCapability</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">if</span>(Command.<a class="code" href="structSAssetCommand.html#ad8beda19520811cc70fe1eab16c774dd">DActivatedCapability</a>){</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">if</span>(Command.<a class="code" href="structSAssetCommand.html#ad8beda19520811cc70fe1eab16c774dd">DActivatedCapability</a>-&gt;IncrementStep()){</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    <span class="comment">// All Done    </span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <span class="keyword">auto</span> PlayerCapability = <a class="code" href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a>(Command.<a class="code" href="structSAssetCommand.html#a734ea7c6847457b437360f333f570ff9">DCapability</a>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                </div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                Asset-&gt;PopCommand();</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">if</span>(PlayerCapability-&gt;CanApply(Asset, DPlayers[Asset-&gt;Color()], Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>)){</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    PlayerCapability-&gt;ApplyCapability(Asset, DPlayers[Asset-&gt;Color()], Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <span class="keywordflow">else</span>{</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="comment">// Can&#39;t apply notify problem   </span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        } </div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee">aaHarvestLumber</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            <a class="code" href="classCPosition.html">CPosition</a> TilePosition = Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;TilePosition();</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a> HarvestDirection = Asset-&gt;TilePosition().AdjacentTileDirection(TilePosition);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            </div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c">CTerrainMap::ttTree</a> != <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;TileType(TilePosition)){</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                HarvestDirection = <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                TilePosition = Asset-&gt;TilePosition();</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a> == HarvestDirection){</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="keywordflow">if</span>(TilePosition == Asset-&gt;TilePosition()){</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    <a class="code" href="classCPosition.html">CPosition</a> NewPosition = DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;FindNearestReachableTileType(Asset-&gt;TilePosition(), <a class="code" href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c">CTerrainMap::ttTree</a>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                    <span class="comment">// Find new lumber</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                    Asset-&gt;PopCommand();</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                    <span class="keywordflow">if</span>(0 &lt;= NewPosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                        NewPosition.<a class="code" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">SetFromTile</a>(NewPosition);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = DPlayers[Asset-&gt;Color()]-&gt;CreateMarker(NewPosition, <span class="keyword">false</span>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                        Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                        Asset-&gt;ResetStep();</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="keywordflow">else</span>{</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NewCommand = Command;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    </div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    NewCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                    Asset-&gt;PushCommand(NewCommand);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                    Asset-&gt;ResetStep();</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da1e80f7847f187eaf3f313eab1807c66c">etHarvest</a>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = Asset;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                CurrentEvents.push_back(TempEvent);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                Asset-&gt;Direction(HarvestDirection);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                Asset-&gt;IncrementStep();</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="keywordflow">if</span>(DHarvestSteps &lt;= Asset-&gt;Step()){</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    std::weak_ptr&lt; CPlayerAsset &gt; NearestRepository = DPlayers[Asset-&gt;Color()]-&gt;FindNearestOwnedAsset(Asset-&gt;Position(), {<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a">atCastle</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c">atLumberMill</a>});</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                    </div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    DLumberAvailable[TilePosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>()][TilePosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()] -= DLumberPerHarvest;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    <span class="keywordflow">if</span>(0 &gt;= DLumberAvailable[TilePosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>()][TilePosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()]){</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                        <a class="code" href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">DActualMap</a>-&gt;ChangeTileType(TilePosition, <a class="code" href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4ac6008e344fb024b62741b2ffaef042ef">CTerrainMap::ttStump</a>);  </div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    </div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    <span class="keywordflow">if</span>(!NearestRepository.expired()){</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7b0954302f27f46b3fdf6fddd530d154">aaConveyLumber</a>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = NearestRepository.lock();</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                        Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                        Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                        Asset-&gt;Lumber(DLumberPerHarvest);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                        Asset-&gt;ResetStep();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    <span class="keywordflow">else</span>{</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                        Asset-&gt;PopCommand();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                        Asset-&gt;Lumber(DLumberPerHarvest);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                        Asset-&gt;ResetStep();</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b">aaMineGold</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="classCPosition.html">CPosition</a> ClosestPosition = Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClosestPosition(Asset-&gt;Position());</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <a class="code" href="classCPosition.html">CPosition</a> TilePosition;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a> MineDirection;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            </div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            TilePosition.<a class="code" href="classCPosition.html#ae302aa21792de64c97de29e2cbbfeb94">SetToTile</a>(ClosestPosition);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            MineDirection = Asset-&gt;TilePosition().AdjacentTileDirection(TilePosition);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a> == MineDirection)&amp;&amp;(TilePosition != Asset-&gt;TilePosition())){</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NewCommand = Command;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                </div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                NewCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                Asset-&gt;PushCommand(NewCommand);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                Asset-&gt;ResetStep();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="keywordflow">if</span>(0 == Asset-&gt;Step()){</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    <span class="keywordflow">if</span>((Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;CommandCount() + 1) * DGoldPerMining &lt;=  Command.DAssetTarget-&gt;<a class="code" href="classCPlayerData.html#afa5c728fc86335a9ca00b5121c0ec765">Gold</a>()){</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                        <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NewCommand;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                        NewCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a02b95b7163284c6e80c9008073d8480d">aaBuild</a>; <span class="comment">// Pretend active</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                        NewCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = Asset;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        </div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;EnqueueCommand(NewCommand);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        Asset-&gt;IncrementStep();</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                        Asset-&gt;TilePosition(Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;TilePosition());</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                    <span class="keywordflow">else</span>{</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        <span class="comment">// Look for new mine or give up?   </span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        Asset-&gt;PopCommand();</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <span class="keywordflow">else</span>{</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    Asset-&gt;IncrementStep();</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    <span class="keywordflow">if</span>(DMineSteps &lt;= Asset-&gt;Step()){</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                        std::shared_ptr&lt; CPlayerAsset &gt; OldTarget = Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                        std::weak_ptr&lt; CPlayerAsset &gt; NearestRepository = DPlayers[Asset-&gt;Color()]-&gt;FindNearestOwnedAsset(Asset-&gt;Position(), {<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a>, <a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a">atCastle</a>});</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        <a class="code" href="classCPosition.html">CPosition</a> NextTarget(DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;Width()-1,DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;Height()-1);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        </div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;DecrementGold(DGoldPerMining);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;PopCommand();</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                        <span class="keywordflow">if</span>(0 &gt;= Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Gold()){</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NewCommand;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                            NewCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a917cb474275eadda79115015ef00d5df">aaDeath</a>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClearCommand();</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;PushCommand(NewCommand);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ResetStep();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        Asset-&gt;Gold(DGoldPerMining);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        <span class="keywordflow">if</span>(!NearestRepository.expired()){</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ae80ac4dde60023e0a1794e994db7000a">aaConveyGold</a>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = NearestRepository.lock();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                            Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                            Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                            Asset-&gt;ResetStep();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                            NextTarget = Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;TilePosition();</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                        }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                            Asset-&gt;PopCommand();</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                        Asset-&gt;TilePosition(DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;FindAssetPlacement(Asset, OldTarget, NextTarget));</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3">aaStandGround</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keyword">auto</span> NewTarget = DPlayers[Asset-&gt;Color()]-&gt;FindNearestEnemy(Asset-&gt;Position(), Asset-&gt;EffectiveRange());</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            </div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">if</span>(NewTarget.expired()){</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d">aaAttack</a>;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = NewTarget.lock();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            Asset-&gt;ResetStep();</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a85399def907073717f41849c8f09eba5">aaRepair</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> CurrentCommand = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">if</span>(CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Alive()){</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a> RepairDirection = Asset-&gt;TilePosition().AdjacentTileDirection(CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;TilePosition(), CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Size());</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a> == RepairDirection){</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                    <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NextCommand = Asset-&gt;NextCommand();</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    </div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    CurrentCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                    Asset-&gt;PushCommand(CurrentCommand);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                    Asset-&gt;ResetStep();</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                <span class="keywordflow">else</span>{</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                    Asset-&gt;Direction(RepairDirection);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                    Asset-&gt;IncrementStep();</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                    <span class="comment">// Assume same movement as attack</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                    <span class="keywordflow">if</span>(Asset-&gt;Step() == Asset-&gt;AttackSteps()){</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                        <span class="keywordflow">if</span>(DPlayers[Asset-&gt;Color()]-&gt;Gold() &amp;&amp; DPlayers[Asset-&gt;Color()]-&gt;Lumber()){</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                            <span class="keywordtype">int</span> RepairPoints = (CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;MaxHitPoints() * (Asset-&gt;AttackSteps() + Asset-&gt;ReloadSteps())) / (<a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>() * CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;BuildTime());</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                            </div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                            <span class="keywordflow">if</span>(0 == RepairPoints){</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                RepairPoints = 1;   </div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                            }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                            DPlayers[Asset-&gt;Color()]-&gt;DecrementGold(1);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                            DPlayers[Asset-&gt;Color()]-&gt;DecrementLumber(1);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                            CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;IncrementHitPoints(RepairPoints);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                            <span class="keywordflow">if</span>(CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;HitPoints() == CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;MaxHitPoints()){</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da0106cf4227412990140c1d773244b587">etWorkComplete</a>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = Asset;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                DPlayers[Asset-&gt;Color()]-&gt;AddGameEvent(TempEvent);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                Asset-&gt;PopCommand();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                            }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                        }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                            <span class="comment">// Stop repair</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                            Asset-&gt;PopCommand();   </div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                        }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                    }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    <span class="keywordflow">if</span>(Asset-&gt;Step() &gt;= (Asset-&gt;AttackSteps() + Asset-&gt;ReloadSteps())){</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                       Asset-&gt;ResetStep();</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                    }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                Asset-&gt;PopCommand();</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d">aaAttack</a> == Asset-&gt;Action()){</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> CurrentCommand = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593">atNone</a> == Asset-&gt;Type()){</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> ClosestTargetPosition = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClosestPosition(Asset-&gt;Position());</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> DeltaPosition(ClosestTargetPosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>() - Asset-&gt;PositionX(), ClosestTargetPosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>() - Asset-&gt;PositionY());</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <span class="keywordtype">int</span> Movement = <a class="code" href="classCPosition.html#a27a7a8b9a5541da0aa8d97d785650fb8">CPosition::TileWidth</a>() * 5 / <a class="code" href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a>();</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordtype">int</span> TargetDistance = Asset-&gt;Position().Distance(ClosestTargetPosition);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                <span class="keywordtype">int</span> Divisor = (TargetDistance + Movement - 1)/ Movement;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                </div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="keywordflow">if</span>(Divisor){</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    DeltaPosition.X( DeltaPosition.X() / Divisor);    </div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    DeltaPosition.Y( DeltaPosition.Y() / Divisor);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                Asset-&gt;PositionX(Asset-&gt;PositionX() + DeltaPosition.X());</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                Asset-&gt;PositionY(Asset-&gt;PositionY() + DeltaPosition.Y());</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                Asset-&gt;Direction(Asset-&gt;Position().DirectionTo(ClosestTargetPosition));</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classCPosition.html#a4b799a0fb78ddd8bbd8548980e2458af">CPosition::HalfTileWidth</a>() * <a class="code" href="classCPosition.html#a5e371060b1aa0d3d3c5df1e353e0e5fd">CPosition::HalfTileHeight</a>() &gt; Asset-&gt;Position().DistanceSquared(ClosestTargetPosition)){</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da0a45453f61b6c27d3e65b3a2f1441cf1">etMissleHit</a>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = Asset;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    CurrentEvents.push_back(TempEvent);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    </div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <span class="keywordflow">if</span>(CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Alive()){</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                        <a class="code" href="structSAssetCommand.html">SAssetCommand</a> TargetCommand = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;CurrentCommand();</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                        TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da45f0b42495c144eda41b21a49f89e571">etAttacked</a>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                        TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                        DPlayers[CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Color()]-&gt;AddGameEvent(TempEvent);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b">aaMineGold</a> != TargetCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                            </div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                            <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ae80ac4dde60023e0a1794e994db7000a">aaConveyGold</a> == TargetCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>)||(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7b0954302f27f46b3fdf6fddd530d154">aaConveyLumber</a> == TargetCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>)){</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                                <span class="comment">// Damage the target </span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = TargetCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                            }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                            <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670acf9fb164e8abd71c71f4a8c7fda360d4">aaCapability</a> == TargetCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>) &amp;&amp; TargetCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>){</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                <span class="keywordflow">if</span>(CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Speed() &amp;&amp; (<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == TargetCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Action())){</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                                    CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = TargetCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                            }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                            CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;DecrementHitPoints(Asset-&gt;HitPoints());</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                            <span class="keywordflow">if</span>(!CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Alive()){</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                                <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;CurrentCommand();</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                                </div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                                TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da09bf160787410891592fa1e9db2f5235">etDeath</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                                TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                                CurrentEvents.push_back(TempEvent);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                                <span class="comment">// Remove constructing</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                                <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670acf9fb164e8abd71c71f4a8c7fda360d4">aaCapability</a> == Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>)&amp;&amp;(Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>)){</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                                    <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Action()){</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                        DPlayers[Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Color()]-&gt;DeleteAsset(Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                    }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                                    <span class="keywordflow">if</span>(Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>){</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                                        Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClearCommand();</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                                    }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                                }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Direction((<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a>)((Asset-&gt;Direction() + <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a>/2) % <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a>));</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                                Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a917cb474275eadda79115015ef00d5df">aaDeath</a>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClearCommand();</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;PushCommand(Command);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ResetStep();</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                            }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                        }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                    }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                    DPlayers[Asset-&gt;Color()]-&gt;DeleteAsset(Asset);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Alive()){</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                <span class="keywordflow">if</span>(1 == Asset-&gt;EffectiveRange()){</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a> AttackDirection = Asset-&gt;TilePosition().AdjacentTileDirection(CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;TilePosition(), CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Size());</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a> == AttackDirection){</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NextCommand = Asset-&gt;NextCommand();</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                        </div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3">aaStandGround</a> != NextCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                            CurrentCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                            Asset-&gt;PushCommand(CurrentCommand);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                            Asset-&gt;ResetStep();</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                        }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                            Asset-&gt;PopCommand();      </div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                        }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                    <span class="keywordflow">else</span>{</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        Asset-&gt;Direction(AttackDirection);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                        Asset-&gt;IncrementStep();</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        <span class="keywordflow">if</span>(Asset-&gt;Step() == Asset-&gt;AttackSteps()){</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                            <span class="keywordtype">int</span> Damage = Asset-&gt;EffectiveBasicDamage() - CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;EffectiveArmor();</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                            Damage = 0 &gt; Damage ? 0 : Damage;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                            Damage += Asset-&gt;EffectivePiercingDamage();</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                            <span class="keywordflow">if</span>(DRandomNumberGenerator.Random() &amp; 0x1){ <span class="comment">// 50% chance half damage</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                                Damage /= 2;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                            }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                            CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;DecrementHitPoints(Damage);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                            TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da8d8f64940a6b0bbc74f7e75a0e9e6e70">etMeleeHit</a>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                            TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = Asset;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                            CurrentEvents.push_back(TempEvent);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                            TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da45f0b42495c144eda41b21a49f89e571">etAttacked</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                            TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                            DPlayers[CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Color()]-&gt;AddGameEvent(TempEvent);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                            <span class="keywordflow">if</span>(!CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Alive()){</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                                <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;CurrentCommand();</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                </div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                                TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da09bf160787410891592fa1e9db2f5235">etDeath</a>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                                CurrentEvents.push_back(TempEvent);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                                <span class="comment">// Remove constructing</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                                <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670acf9fb164e8abd71c71f4a8c7fda360d4">aaCapability</a> == Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>)&amp;&amp;(Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>)){</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                                    <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Action()){</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                                        DPlayers[Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Color()]-&gt;DeleteAsset(Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                                    }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                                }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                                    <span class="keywordflow">if</span>(Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>){</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                                        Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClearCommand();</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                                    }</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                                }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                Command.<a class="code" href="structSAssetCommand.html#a734ea7c6847457b437360f333f570ff9">DCapability</a> = <a class="code" href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaa8df154ad276f6f62054e9b5b0696f92">actNone</a>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                                Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                                Command.<a class="code" href="structSAssetCommand.html#ad8beda19520811cc70fe1eab16c774dd">DActivatedCapability</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;Direction((<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a>)((AttackDirection + <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a>/2) % <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a>));</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                                Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a917cb474275eadda79115015ef00d5df">aaDeath</a>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClearCommand();</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;PushCommand(Command);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                                CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ResetStep();</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                            }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                        }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                        <span class="keywordflow">if</span>(Asset-&gt;Step() &gt;= (Asset-&gt;AttackSteps() + Asset-&gt;ReloadSteps())){</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                           Asset-&gt;ResetStep();</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                        }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                    }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                <span class="keywordflow">else</span>{ <span class="comment">// EffectiveRanged</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                    <a class="code" href="classCPosition.html">CPosition</a> ClosestTargetPosition = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClosestPosition(Asset-&gt;Position());</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                    <span class="keywordflow">if</span>(ClosestTargetPosition.<a class="code" href="classCPosition.html#acd96d507f44c0fdf13036ebc1a09e59c">DistanceSquared</a>( Asset-&gt;Position() ) &gt; <a class="code" href="GameModel_8cpp.html#afd5c111a1369dc53d1b1230506e99f7c">RangeToDistanceSquared</a>(Asset-&gt;EffectiveRange())){</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                        <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NextCommand = Asset-&gt;NextCommand();</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                        </div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3">aaStandGround</a> != NextCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                            CurrentCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                            Asset-&gt;PushCommand(CurrentCommand);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                            Asset-&gt;ResetStep();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                        }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                            Asset-&gt;PopCommand();</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                        }   </div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                    }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    <span class="keywordflow">else</span>{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        <span class="comment">/*</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">                        CPosition DeltaPosition(ClosestTargetPosition.X() - Asset-&gt;PositionX(), ClosestTargetPosition.Y() - Asset-&gt;PositionY());</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">                        int DivX = DeltaPosition.X() / CPosition::HalfTileWidth();</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">                        int DivY = DeltaPosition.Y() / CPosition::HalfTileHeight();</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">                        int Div;</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">                        EDirection AttackDirection;</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">                        DivX = 0 &gt; DivX ? -DivX : DivX;</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">                        DivY = 0 &gt; DivY ? -DivY : DivY;</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">                        Div = DivX &gt; DivY ? DivX : DivY;</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">                        if(Div){</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">                            DeltaPosition.X(DeltaPosition.X() / Div);</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">                            DeltaPosition.Y(DeltaPosition.Y() / Div);</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">                        }</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">                        DeltaPosition.IncrementX(CPosition::HalfTileWidth());</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">                        DeltaPosition.IncrementY(CPosition::HalfTileHeight());</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">                        if(0 &gt; DeltaPosition.X()){</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">                            DeltaPosition.X(0);</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">                        }</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">                        if(0 &gt; DeltaPosition.Y()){</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">                            DeltaPosition.Y(0);</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">                        }</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">                        if(CPosition::TileWidth() &lt;= DeltaPosition.X()){</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">                            DeltaPosition.X(CPosition::TileWidth() - 1);</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">                        }</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">                        if(CPosition::TileHeight() &lt;= DeltaPosition.Y()){</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">                            DeltaPosition.Y(CPosition::TileHeight() - 1);</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">                        }</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">                        AttackDirection = DeltaPosition.TileOctant();</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">                        */</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                        <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a> AttackDirection = Asset-&gt;Position().DirectionTo(ClosestTargetPosition);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                        Asset-&gt;Direction(AttackDirection);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                        Asset-&gt;IncrementStep();</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                        <span class="keywordflow">if</span>(Asset-&gt;Step() == Asset-&gt;AttackSteps()){</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> AttackCommand; <span class="comment">// Create missle</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                            <span class="keyword">auto</span> ArrowAsset = DPlayers[<a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729">pcNone</a>]-&gt;CreateAsset(<span class="stringliteral">&quot;None&quot;</span>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                            <span class="keywordtype">int</span> Damage = Asset-&gt;EffectiveBasicDamage() - CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;EffectiveArmor();</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                            Damage = 0 &gt; Damage ? 0 : Damage;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                            Damage += Asset-&gt;EffectivePiercingDamage();</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                            <span class="keywordflow">if</span>(DRandomNumberGenerator.Random() &amp; 0x1){ <span class="comment">// 50% chance half damage</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                                Damage /= 2;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                            }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                            </div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                            TempEvent.<a class="code" href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">DType</a> = <a class="code" href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656dae891b2dee1677bb6a343c0ca8c01fa0e">etMissleFire</a>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                            TempEvent.<a class="code" href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">DAsset</a> = Asset;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                            CurrentEvents.push_back(TempEvent);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                            </div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                            ArrowAsset-&gt;HitPoints(Damage);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                            ArrowAsset-&gt;Position(Asset-&gt;Position());</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                            <span class="keywordflow">if</span>(ArrowAsset-&gt;PositionX() &lt; ClosestTargetPosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                ArrowAsset-&gt;PositionX(ArrowAsset-&gt;PositionX() + <a class="code" href="classCPosition.html#a4b799a0fb78ddd8bbd8548980e2458af">CPosition::HalfTileWidth</a>());</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                            }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ArrowAsset-&gt;PositionX() &gt; ClosestTargetPosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                                ArrowAsset-&gt;PositionX(ArrowAsset-&gt;PositionX() - <a class="code" href="classCPosition.html#a4b799a0fb78ddd8bbd8548980e2458af">CPosition::HalfTileWidth</a>());</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                            }</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                            </div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                            <span class="keywordflow">if</span>(ArrowAsset-&gt;PositionY() &lt; ClosestTargetPosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>()){</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                                ArrowAsset-&gt;PositionY(ArrowAsset-&gt;PositionY() + <a class="code" href="classCPosition.html#a5e371060b1aa0d3d3c5df1e353e0e5fd">CPosition::HalfTileHeight</a>());</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                            }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ArrowAsset-&gt;PositionY() &gt; ClosestTargetPosition.<a class="code" href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">Y</a>()){</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                ArrowAsset-&gt;PositionY(ArrowAsset-&gt;PositionY() - <a class="code" href="classCPosition.html#a5e371060b1aa0d3d3c5df1e353e0e5fd">CPosition::HalfTileHeight</a>());</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                            }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                            ArrowAsset-&gt;Direction(AttackDirection);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                            AttackCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                            AttackCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = Asset;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                            ArrowAsset-&gt;PushCommand(AttackCommand);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                            AttackCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d">aaAttack</a>;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                            AttackCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                            ArrowAsset-&gt;PushCommand(AttackCommand);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                        }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                        <span class="keywordflow">if</span>(Asset-&gt;Step() &gt;= (Asset-&gt;AttackSteps() + Asset-&gt;ReloadSteps())){</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                           Asset-&gt;ResetStep();</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                        }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                    }</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NextCommand = Asset-&gt;NextCommand();</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                </div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                Asset-&gt;PopCommand();</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3">aaStandGround</a> != NextCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                    <span class="keyword">auto</span> NewTarget = DPlayers[Asset-&gt;Color()]-&gt;FindNearestEnemy(Asset-&gt;Position(), Asset-&gt;EffectiveSight());</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                    <span class="keywordflow">if</span>(!NewTarget.expired()){</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                        CurrentCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = NewTarget.lock();</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                        Asset-&gt;PushCommand(CurrentCommand);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                        Asset-&gt;ResetStep();</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                    }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7b0954302f27f46b3fdf6fddd530d154">aaConveyLumber</a> == Asset-&gt;Action())||(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ae80ac4dde60023e0a1794e994db7000a">aaConveyGold</a> == Asset-&gt;Action())){</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            Asset-&gt;IncrementStep();</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="keywordflow">if</span>(DConveySteps &lt;= Asset-&gt;Step()){</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> NextTarget(DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;Width()-1,DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;Height()-1);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                </div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                DPlayers[Asset-&gt;Color()]-&gt;IncrementGold(Asset-&gt;Gold());</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                DPlayers[Asset-&gt;Color()]-&gt;IncrementLumber(Asset-&gt;Lumber());</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                Asset-&gt;Gold(0);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                Asset-&gt;Lumber(0);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                Asset-&gt;PopCommand();</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                Asset-&gt;ResetStep();</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a> != Asset-&gt;Action()){</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    NextTarget = Asset-&gt;CurrentCommand().DAssetTarget-&gt;TilePosition();</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                Asset-&gt;TilePosition(DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;FindAssetPlacement(Asset, Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>, NextTarget));</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a> == Asset-&gt;Action()){</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">if</span>(Command.<a class="code" href="structSAssetCommand.html#ad8beda19520811cc70fe1eab16c774dd">DActivatedCapability</a>){</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                <span class="keywordflow">if</span>(Command.<a class="code" href="structSAssetCommand.html#ad8beda19520811cc70fe1eab16c774dd">DActivatedCapability</a>-&gt;IncrementStep()){</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                    <span class="comment">// All Done    </span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            }   </div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a917cb474275eadda79115015ef00d5df">aaDeath</a> == Asset-&gt;Action()){</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            Asset-&gt;IncrementStep();</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;Step() &gt; DDeathSteps){</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                <span class="keywordflow">if</span>(Asset-&gt;Speed()){</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                    <a class="code" href="structSAssetCommand.html">SAssetCommand</a> DecayCommand;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                    <span class="comment">// Create corpse</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                    <span class="keyword">auto</span> CorpseAsset = DPlayers[<a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729">pcNone</a>]-&gt;CreateAsset(<span class="stringliteral">&quot;None&quot;</span>);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                    </div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                    DecayCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a5529d58a84a26b10744433d7bf171451">aaDecay</a>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                    CorpseAsset-&gt;Position(Asset-&gt;Position());</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                    CorpseAsset-&gt;Direction(Asset-&gt;Direction());</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                    CorpseAsset-&gt;PushCommand(DecayCommand);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                    </div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                DPlayers[Asset-&gt;Color()]-&gt;DeleteAsset(Asset);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a5529d58a84a26b10744433d7bf171451">aaDecay</a> == Asset-&gt;Action()){</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            Asset-&gt;IncrementStep();</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;Step() &gt; DDecaySteps){</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                DPlayers[Asset-&gt;Color()]-&gt;DeleteAsset(Asset);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        </div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a> == Asset-&gt;Action()){</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="keywordflow">if</span>(Asset-&gt;TileAligned()){</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <a class="code" href="structSAssetCommand.html">SAssetCommand</a> Command = Asset-&gt;CurrentCommand();</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <a class="code" href="structSAssetCommand.html">SAssetCommand</a> NextCommand = Asset-&gt;NextCommand();</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a> TravelDirection;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                <a class="code" href="classCPosition.html">CPosition</a> MapTarget = Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClosestPosition(Asset-&gt;Position());</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                </div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d">aaAttack</a> == NextCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <span class="comment">// Check to see if can attack now</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                    <span class="keywordflow">if</span>(NextCommand.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a>-&gt;ClosestPosition(Asset-&gt;Position()).DistanceSquared( Asset-&gt;Position() ) &lt;= <a class="code" href="GameModel_8cpp.html#afd5c111a1369dc53d1b1230506e99f7c">RangeToDistanceSquared</a>(Asset-&gt;EffectiveRange())){</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                        Asset-&gt;PopCommand();</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                        Asset-&gt;ResetStep();</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                        <span class="keywordflow">continue</span>;   </div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                    }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                }</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                TravelDirection = DRouterMap.FindRoute(*DPlayers[Asset-&gt;Color()]-&gt;PlayerMap(), *Asset, MapTarget);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a> != TravelDirection){</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                    Asset-&gt;Direction(TravelDirection);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                <span class="keywordflow">else</span>{</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    <a class="code" href="classCPosition.html">CPosition</a> TilePosition;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                    TilePosition.<a class="code" href="classCPosition.html#ae302aa21792de64c97de29e2cbbfeb94">SetToTile</a>(MapTarget);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                    <span class="keywordflow">if</span>((TilePosition == Asset-&gt;TilePosition())||(<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a> != Asset-&gt;TilePosition().AdjacentTileDirection(TilePosition))){</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                        Asset-&gt;PopCommand();</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                        Asset-&gt;ResetStep();</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                        <span class="keywordflow">continue</span>;    </div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                    }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee">aaHarvestLumber</a> == NextCommand.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a>){</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                        <a class="code" href="classCPosition.html">CPosition</a> NewPosition = DPlayers[Asset-&gt;Color()]-&gt;PlayerMap()-&gt;FindNearestReachableTileType(Asset-&gt;TilePosition(), <a class="code" href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c">CTerrainMap::ttTree</a>);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                        <span class="comment">// Find new lumber</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                        Asset-&gt;PopCommand();</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                        Asset-&gt;PopCommand();</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                        <span class="keywordflow">if</span>(0 &lt;= NewPosition.<a class="code" href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">X</a>()){</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                            NewPosition.<a class="code" href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">SetFromTile</a>(NewPosition);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee">aaHarvestLumber</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">DAssetTarget</a> = DPlayers[Asset-&gt;Color()]-&gt;CreateMarker(NewPosition, <span class="keyword">false</span>);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                            Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                            Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a>;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                            Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                            Asset-&gt;ResetStep();</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                        }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                    <span class="keywordflow">else</span>{</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                        Command.<a class="code" href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">DAction</a> = <a class="code" href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                        Asset-&gt;PushCommand(Command);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                        Asset-&gt;ResetStep();</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                        <span class="keywordflow">continue</span>;    </div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">if</span>(!Asset-&gt;MoveStep(DAssetOccupancyMap, DDiagonalOccupancyMap)){</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                Asset-&gt;Direction((<a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a>)((Asset-&gt;Position().TileOctant() + <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a>/2) % <a class="code" href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a>));</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;         </div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="classCPlayerData.html#ae92ca06a63a01681dd9f3ddc17c0e106">DGameCycle</a>++;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> PlayerIndex = 0; PlayerIndex &lt; <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34">pcMax</a>; PlayerIndex++){</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        DPlayers[PlayerIndex]-&gt;IncrementCycle();</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        DPlayers[PlayerIndex]-&gt;AppendGameEvents(CurrentEvents);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"><a class="line" href="classCGameModel.html#a7591a4e79f91a048462bce532fd4eca1"> 1107</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCGameModel.html#a7591a4e79f91a048462bce532fd4eca1">CGameModel::ClearGameEvents</a>(){</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> PlayerIndex = 0; PlayerIndex &lt; <a class="code" href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34">pcMax</a>; PlayerIndex++){</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        DPlayers[PlayerIndex]-&gt;ClearGameEvents();</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;}</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="ttc" id="classCGameModel_html_a699325d41d7ff27bda47bfb3048cfd8f"><div class="ttname"><a href="classCGameModel.html#a699325d41d7ff27bda47bfb3048cfd8f">CGameModel::Timestep</a></div><div class="ttdeci">void Timestep()</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00519">GameModel.cpp:519</a></div></div>
<div class="ttc" id="classCPlayerData_html_a46ba3f00069e6da5cf4a1203a7456e1d"><div class="ttname"><a href="classCPlayerData.html#a46ba3f00069e6da5cf4a1203a7456e1d">CPlayerData::IsAlive</a></div><div class="ttdeci">bool IsAlive() const</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00086">GameModel.h:86</a></div></div>
<div class="ttc" id="classCPlayerData_html_a5bd2ebe2e3dc25669bb312226e087fd1"><div class="ttname"><a href="classCPlayerData.html#a5bd2ebe2e3dc25669bb312226e087fd1">CPlayerData::IdleAssets</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; IdleAssets() const</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00425">GameModel.cpp:425</a></div></div>
<div class="ttc" id="Debug_8h_html_a3a5f3fc09784650d8388cb854882f840"><div class="ttname"><a href="Debug_8h.html#a3a5f3fc09784650d8388cb854882f840">DEBUG_LOW</a></div><div class="ttdeci">#define DEBUG_LOW</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00055">Debug.h:55</a></div></div>
<div class="ttc" id="classCGameModel_html_a37858821d1294b21b374cf4f81052f3e"><div class="ttname"><a href="classCGameModel.html#a37858821d1294b21b374cf4f81052f3e">CGameModel::CGameModel</a></div><div class="ttdeci">CGameModel(int mapindex, uint64_t seed, EPlayerColor newcolors[pcMax])</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00456">GameModel.cpp:456</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classCPlayerData_html_a5f0a1280933f7bb9a65ab256ecff1a69"><div class="ttname"><a href="classCPlayerData.html#a5f0a1280933f7bb9a65ab256ecff1a69">CPlayerData::FindNearestEnemy</a></div><div class="ttdeci">std::weak_ptr&lt; CPlayerAsset &gt; FindNearestEnemy(const CPosition &amp;pos, int range)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00281">GameModel.cpp:281</a></div></div>
<div class="ttc" id="GameModel_8h_html_abfcf510bafec7c6429906a6ecaac656da1e80f7847f187eaf3f313eab1807c66c"><div class="ttname"><a href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da1e80f7847f187eaf3f313eab1807c66c">etHarvest</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00036">GameModel.h:36</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_aafb0ca75933357ff28a6d7efbdd7602f"><div class="ttname"><a href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602f">EPlayerColor</a></div><div class="ttdeci">EPlayerColor</div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00020">GameDataTypes.h:20</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a">atCastle</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00101">GameDataTypes.h:101</a></div></div>
<div class="ttc" id="classCPosition_html_ae302aa21792de64c97de29e2cbbfeb94"><div class="ttname"><a href="classCPosition.html#ae302aa21792de64c97de29e2cbbfeb94">CPosition::SetToTile</a></div><div class="ttdeci">void SetToTile(const CPosition &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8cpp_source.html#l00134">Position.cpp:134</a></div></div>
<div class="ttc" id="classCPosition_html_acd96d507f44c0fdf13036ebc1a09e59c"><div class="ttname"><a href="classCPosition.html#acd96d507f44c0fdf13036ebc1a09e59c">CPosition::DistanceSquared</a></div><div class="ttdeci">int DistanceSquared(const CPosition &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8cpp_source.html#l00223">Position.cpp:223</a></div></div>
<div class="ttc" id="classCPlayerAssetType_html_a66ce89c35b74940e9fc947a1f4b9e770"><div class="ttname"><a href="classCPlayerAssetType.html#a66ce89c35b74940e9fc947a1f4b9e770">CPlayerAssetType::TypeToName</a></div><div class="ttdeci">static std::string TypeToName(EAssetType type)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00476">PlayerAsset.cpp:476</a></div></div>
<div class="ttc" id="GameModel_8h_html_abfcf510bafec7c6429906a6ecaac656da8d8f64940a6b0bbc74f7e75a0e9e6e70"><div class="ttname"><a href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da8d8f64940a6b0bbc74f7e75a0e9e6e70">etMeleeHit</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00037">GameModel.h:37</a></div></div>
<div class="ttc" id="classCPlayerData_html_a45b5ba15a17796acdbaca7eacc7532d0"><div class="ttname"><a href="classCPlayerData.html#a45b5ba15a17796acdbaca7eacc7532d0">CPlayerData::FoodConsumption</a></div><div class="ttdeci">int FoodConsumption() const</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00067">GameModel.cpp:67</a></div></div>
<div class="ttc" id="GameModel_8cpp_html_afd5c111a1369dc53d1b1230506e99f7c"><div class="ttname"><a href="GameModel_8cpp.html#afd5c111a1369dc53d1b1230506e99f7c">RangeToDistanceSquared</a></div><div class="ttdeci">int RangeToDistanceSquared(int range)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00027">GameModel.cpp:27</a></div></div>
<div class="ttc" id="GameModel_8h_html_abfcf510bafec7c6429906a6ecaac656da45f0b42495c144eda41b21a49f89e571"><div class="ttname"><a href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da45f0b42495c144eda41b21a49f89e571">etAttacked</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00033">GameModel.h:33</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778ceaa8df154ad276f6f62054e9b5b0696f92"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778ceaa8df154ad276f6f62054e9b5b0696f92">actNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00051">GameDataTypes.h:51</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34"><div class="ttname"><a href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa594a5c8dd3987f24e8a0f23f1a72cd34">pcMax</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00030">GameDataTypes.h:30</a></div></div>
<div class="ttc" id="classCPlayerData_html_adf3bf2fa49b5c8a4fb9a478d95f688c4"><div class="ttname"><a href="classCPlayerData.html#adf3bf2fa49b5c8a4fb9a478d95f688c4">CPlayerData::DLumber</a></div><div class="ttdeci">int DLumber</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00060">GameModel.h:60</a></div></div>
<div class="ttc" id="structSRectangle_html_abcbddb03b3ee416cc33109833b5f075c"><div class="ttname"><a href="structSRectangle.html#abcbddb03b3ee416cc33109833b5f075c">SRectangle::DXPosition</a></div><div class="ttdeci">int DXPosition</div><div class="ttdef"><b>Definition:</b> <a href="Rectangle_8h_source.html#l00021">Rectangle.h:21</a></div></div>
<div class="ttc" id="classCPlayerData_html_afb3303a53687383e4101d4de37391d84"><div class="ttname"><a href="classCPlayerData.html#afb3303a53687383e4101d4de37391d84">CPlayerData::SelectAssets</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; SelectAssets(const SRectangle &amp;selectarea, EAssetType assettype, bool selectidentical=false)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00174">GameModel.cpp:174</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a5529d58a84a26b10744433d7bf171451"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a5529d58a84a26b10744433d7bf171451">aaDecay</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00046">GameDataTypes.h:46</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a917cb474275eadda79115015ef00d5df"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a917cb474275eadda79115015ef00d5df">aaDeath</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00045">GameDataTypes.h:45</a></div></div>
<div class="ttc" id="classCPosition_html"><div class="ttname"><a href="classCPosition.html">CPosition</a></div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00022">Position.h:22</a></div></div>
<div class="ttc" id="classCPlayerData_html_ae7cb90c31ec46b65ba88485368a4b96a"><div class="ttname"><a href="classCPlayerData.html#ae7cb90c31ec46b65ba88485368a4b96a">CPlayerData::DUpgrades</a></div><div class="ttdeci">std::vector&lt; bool &gt; DUpgrades</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00057">GameModel.h:57</a></div></div>
<div class="ttc" id="GameModel_8h_html_abfcf510bafec7c6429906a6ecaac656da09bf160787410891592fa1e9db2f5235"><div class="ttname"><a href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da09bf160787410891592fa1e9db2f5235">etDeath</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00032">GameModel.h:32</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670ae80ac4dde60023e0a1794e994db7000a"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ae80ac4dde60023e0a1794e994db7000a">aaConveyGold</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00044">GameDataTypes.h:44</a></div></div>
<div class="ttc" id="classCPlayerCapability_html_a920a696526e8a839f728192aea0ba1c5"><div class="ttname"><a href="classCPlayerCapability.html#a920a696526e8a839f728192aea0ba1c5">CPlayerCapability::NameToType</a></div><div class="ttdeci">static EAssetCapabilityType NameToType(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00115">PlayerAsset.cpp:115</a></div></div>
<div class="ttc" id="structSAssetCommand_html_a3d9b43f6e59c386c48c41a65448a0c39"><div class="ttname"><a href="structSAssetCommand.html#a3d9b43f6e59c386c48c41a65448a0c39">SAssetCommand::DAssetTarget</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerAsset &gt; DAssetTarget</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8h_source.html#l00317">PlayerAsset.h:317</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee">aaHarvestLumber</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00041">GameDataTypes.h:41</a></div></div>
<div class="ttc" id="classCPosition_html_a9a6b94d3b91df1492d166d9964c865fc"><div class="ttname"><a href="classCPosition.html#a9a6b94d3b91df1492d166d9964c865fc">CPosition::X</a></div><div class="ttdeci">int X() const</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00062">Position.h:62</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319"><div class="ttname"><a href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42af6546049275557ce0ade2ceee042a319">dMax</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00121">GameDataTypes.h:121</a></div></div>
<div class="ttc" id="classCPlayerData_html_ac43ee660aa07b2d9d96eb5285d50fab5"><div class="ttname"><a href="classCPlayerData.html#ac43ee660aa07b2d9d96eb5285d50fab5">CPlayerData::FindBestAssetPlacement</a></div><div class="ttdeci">CPosition FindBestAssetPlacement(const CPosition &amp;pos, std::shared_ptr&lt; CPlayerAsset &gt; builder, EAssetType assettype, int buffer)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00312">GameModel.cpp:312</a></div></div>
<div class="ttc" id="structSGameEvent_html_afa10562e243f4ac2b473b655cc58fee7"><div class="ttname"><a href="structSGameEvent.html#afa10562e243f4ac2b473b655cc58fee7">SGameEvent::DType</a></div><div class="ttdeci">EEventType DType</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00044">GameModel.h:44</a></div></div>
<div class="ttc" id="classCTerrainMap_html_aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c"><div class="ttname"><a href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c">CTerrainMap::ttTree</a></div><div class="ttdef"><b>Definition:</b> <a href="TerrainMap_8h_source.html#l00031">TerrainMap.h:31</a></div></div>
<div class="ttc" id="classCPlayerData_html_a943801106af1d7ad52abd73d32552186"><div class="ttname"><a href="classCPlayerData.html#a943801106af1d7ad52abd73d32552186">CPlayerData::DActualMap</a></div><div class="ttdeci">std::shared_ptr&lt; CAssetDecoratedMap &gt; DActualMap</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00053">GameModel.h:53</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c">atLumberMill</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00104">GameDataTypes.h:104</a></div></div>
<div class="ttc" id="classCPlayerCapability_html_a881ba4b87385d7cfe5cb6ced2d26f226"><div class="ttname"><a href="classCPlayerCapability.html#a881ba4b87385d7cfe5cb6ced2d26f226">CPlayerCapability::FindCapability</a></div><div class="ttdeci">static std::shared_ptr&lt; CPlayerCapability &gt; FindCapability(EAssetCapabilityType type)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00097">PlayerAsset.cpp:97</a></div></div>
<div class="ttc" id="classCPlayerData_html_a1d7dd355facf52db6242e3554373906c"><div class="ttname"><a href="classCPlayerData.html#a1d7dd355facf52db6242e3554373906c">CPlayerData::DAssets</a></div><div class="ttdeci">std::list&lt; std::weak_ptr&lt; CPlayerAsset &gt; &gt; DAssets</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00056">GameModel.h:56</a></div></div>
<div class="ttc" id="structSAssetCommand_html"><div class="ttname"><a href="structSAssetCommand.html">SAssetCommand</a></div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8h_source.html#l00314">PlayerAsset.h:314</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670acf9fb164e8abd71c71f4a8c7fda360d4"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670acf9fb164e8abd71c71f4a8c7fda360d4">aaCapability</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00047">GameDataTypes.h:47</a></div></div>
<div class="ttc" id="classCPosition_html_a46994e6a8b8e3b4237edd7259ad844b6"><div class="ttname"><a href="classCPosition.html#a46994e6a8b8e3b4237edd7259ad844b6">CPosition::SetFromTile</a></div><div class="ttdeci">void SetFromTile(const CPosition &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="Position_8cpp_source.html#l00121">Position.cpp:121</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d">aaConstruct</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00035">GameDataTypes.h:35</a></div></div>
<div class="ttc" id="classCPlayerData_html_ad922f283c60b1c885dac955815ae2b05"><div class="ttname"><a href="classCPlayerData.html#ad922f283c60b1c885dac955815ae2b05">CPlayerData::DAssetTypes</a></div><div class="ttdeci">std::shared_ptr&lt; std::unordered_map&lt; std::string, std::shared_ptr&lt; CPlayerAssetType &gt; &gt; &gt; DAssetTypes</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00055">GameModel.h:55</a></div></div>
<div class="ttc" id="GameModel_8h_html_abfcf510bafec7c6429906a6ecaac656da0a45453f61b6c27d3e65b3a2f1441cf1"><div class="ttname"><a href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da0a45453f61b6c27d3e65b3a2f1441cf1">etMissleHit</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00035">GameModel.h:35</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca92fbf60b4e5c335160f915b6a1c17c05"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca92fbf60b4e5c335160f915b6a1c17c05">atMax</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00109">GameDataTypes.h:109</a></div></div>
<div class="ttc" id="classCPosition_html_a1aa8a30e2f08dda1f797736ba8c13a87"><div class="ttname"><a href="classCPosition.html#a1aa8a30e2f08dda1f797736ba8c13a87">CPosition::Y</a></div><div class="ttdeci">int Y() const</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00080">Position.h:80</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31">atKeep</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00100">GameDataTypes.h:100</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729"><div class="ttname"><a href="GameDataTypes_8h.html#aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729">pcNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00021">GameDataTypes.h:21</a></div></div>
<div class="ttc" id="classCPlayerData_html_a53c9e046c6f43fd83a0feb32b4fe999d"><div class="ttname"><a href="classCPlayerData.html#a53c9e046c6f43fd83a0feb32b4fe999d">CPlayerData::FindNearestOwnedAsset</a></div><div class="ttdeci">std::weak_ptr&lt; CPlayerAsset &gt; FindNearestOwnedAsset(const CPosition &amp;pos, const std::vector&lt; EAssetType &gt; assettypes)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00242">GameModel.cpp:242</a></div></div>
<div class="ttc" id="classCPosition_html_a4b799a0fb78ddd8bbd8548980e2458af"><div class="ttname"><a href="classCPosition.html#a4b799a0fb78ddd8bbd8548980e2458af">CPosition::HalfTileWidth</a></div><div class="ttdeci">static int HalfTileWidth()</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00054">Position.h:54</a></div></div>
<div class="ttc" id="classCGameModel_html_a5e6e46dd32a655e2a4432aeb134cc7e3"><div class="ttname"><a href="classCGameModel.html#a5e6e46dd32a655e2a4432aeb134cc7e3">CGameModel::ValidAsset</a></div><div class="ttdeci">bool ValidAsset(std::shared_ptr&lt; CPlayerAsset &gt; asset)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00503">GameModel.cpp:503</a></div></div>
<div class="ttc" id="classCPlayerAsset_html_a0aff85b9552967a42f4f3f42cb59c19f"><div class="ttname"><a href="classCPlayerAsset.html#a0aff85b9552967a42f4f3f42cb59c19f">CPlayerAsset::UpdateFrequency</a></div><div class="ttdeci">static int UpdateFrequency()</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8h_source.html#l00342">PlayerAsset.h:342</a></div></div>
<div class="ttc" id="classCPosition_html_a5e371060b1aa0d3d3c5df1e353e0e5fd"><div class="ttname"><a href="classCPosition.html#a5e371060b1aa0d3d3c5df1e353e0e5fd">CPosition::HalfTileHeight</a></div><div class="ttdeci">static int HalfTileHeight()</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00058">Position.h:58</a></div></div>
<div class="ttc" id="classCPlayerData_html_a4d203da2adbd6d00b0cd5b334bddba4f"><div class="ttname"><a href="classCPlayerData.html#a4d203da2adbd6d00b0cd5b334bddba4f">CPlayerData::CreateAsset</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerAsset &gt; CreateAsset(const std::string &amp;assettypename)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00108">GameModel.cpp:108</a></div></div>
<div class="ttc" id="structSRectangle_html_a84ea3c2314c43cab6186170662188899"><div class="ttname"><a href="structSRectangle.html#a84ea3c2314c43cab6186170662188899">SRectangle::DHeight</a></div><div class="ttdeci">int DHeight</div><div class="ttdef"><b>Definition:</b> <a href="Rectangle_8h_source.html#l00024">Rectangle.h:24</a></div></div>
<div class="ttc" id="classCPlayerData_html_a65d69aaa09c8fc0f7ddfa5e858313085"><div class="ttname"><a href="classCPlayerData.html#a65d69aaa09c8fc0f7ddfa5e858313085">CPlayerData::DColor</a></div><div class="ttdeci">EPlayerColor DColor</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00051">GameModel.h:51</a></div></div>
<div class="ttc" id="GameModel_8h_html"><div class="ttname"><a href="GameModel_8h.html">GameModel.h</a></div></div>
<div class="ttc" id="GameModel_8cpp_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="GameModel_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00024">GameModel.cpp:24</a></div></div>
<div class="ttc" id="structSRectangle_html"><div class="ttname"><a href="structSRectangle.html">SRectangle</a></div><div class="ttdef"><b>Definition:</b> <a href="Rectangle_8h_source.html#l00020">Rectangle.h:20</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593">atNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00093">GameDataTypes.h:93</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d">aaAttack</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00040">GameDataTypes.h:40</a></div></div>
<div class="ttc" id="classCPlayerData_html_a804ea65e7ec7c90b2e335414d106cc78"><div class="ttname"><a href="classCPlayerData.html#a804ea65e7ec7c90b2e335414d106cc78">CPlayerData::DVisibilityMap</a></div><div class="ttdeci">std::shared_ptr&lt; CVisibilityMap &gt; DVisibilityMap</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00052">GameModel.h:52</a></div></div>
<div class="ttc" id="classCPlayerData_html_ae66fe7d594267990adf34f9286925efb"><div class="ttname"><a href="classCPlayerData.html#ae66fe7d594267990adf34f9286925efb">CPlayerData::AddUpgrade</a></div><div class="ttdeci">void AddUpgrade(const std::string &amp;upgradename)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00439">GameModel.cpp:439</a></div></div>
<div class="ttc" id="classCPlayerData_html_a3fe55bd902f7a819c0689825d8ad3e4c"><div class="ttname"><a href="classCPlayerData.html#a3fe55bd902f7a819c0689825d8ad3e4c">CPlayerData::PlayerAssetCount</a></div><div class="ttdeci">int PlayerAssetCount(EAssetType type)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00401">GameModel.cpp:401</a></div></div>
<div class="ttc" id="classCGameModel_html_a7591a4e79f91a048462bce532fd4eca1"><div class="ttname"><a href="classCGameModel.html#a7591a4e79f91a048462bce532fd4eca1">CGameModel::ClearGameEvents</a></div><div class="ttdeci">void ClearGameEvents()</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l01107">GameModel.cpp:1107</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a60ca9010aa62b73c1aab838ff4bf7276">aaWalk</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00038">GameDataTypes.h:38</a></div></div>
<div class="ttc" id="classCPlayerData_html_a24f56e033f6d68ceba0f876d854201f0"><div class="ttname"><a href="classCPlayerData.html#a24f56e033f6d68ceba0f876d854201f0">CPlayerData::DeleteAsset</a></div><div class="ttdeci">void DeleteAsset(std::shared_ptr&lt; CPlayerAsset &gt; asset)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00117">GameModel.cpp:117</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3">aaStandGround</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00039">GameDataTypes.h:39</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a7b0954302f27f46b3fdf6fddd530d154"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a7b0954302f27f46b3fdf6fddd530d154">aaConveyLumber</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00043">GameDataTypes.h:43</a></div></div>
<div class="ttc" id="classCPlayerAssetType_html_a6dfbccbbed7fecec6b7e2c51ac22fe5a"><div class="ttname"><a href="classCPlayerAssetType.html#a6dfbccbbed7fecec6b7e2c51ac22fe5a">CPlayerAssetType::DuplicateRegistry</a></div><div class="ttdeci">static std::shared_ptr&lt; std::unordered_map&lt; std::string, std::shared_ptr&lt; CPlayerAssetType &gt; &gt; &gt; DuplicateRegistry(EPlayerColor color)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00684">PlayerAsset.cpp:684</a></div></div>
<div class="ttc" id="structSRectangle_html_a4150898b3f7d90f6e4b0d44bf1ae3bd2"><div class="ttname"><a href="structSRectangle.html#a4150898b3f7d90f6e4b0d44bf1ae3bd2">SRectangle::DWidth</a></div><div class="ttdeci">int DWidth</div><div class="ttdef"><b>Definition:</b> <a href="Rectangle_8h_source.html#l00023">Rectangle.h:23</a></div></div>
<div class="ttc" id="structSAssetCommand_html_ad8beda19520811cc70fe1eab16c774dd"><div class="ttname"><a href="structSAssetCommand.html#ad8beda19520811cc70fe1eab16c774dd">SAssetCommand::DActivatedCapability</a></div><div class="ttdeci">std::shared_ptr&lt; CActivatedPlayerCapability &gt; DActivatedCapability</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8h_source.html#l00318">PlayerAsset.h:318</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a35b98ce26aca678b03c6f9f76e4778cea77dccd39fc9e5ee854223444006a6f70"><div class="ttname"><a href="GameDataTypes_8h.html#a35b98ce26aca678b03c6f9f76e4778cea77dccd39fc9e5ee854223444006a6f70">actMax</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00089">GameDataTypes.h:89</a></div></div>
<div class="ttc" id="classCPlayerData_html_ad3fcb8740d4e37b4654c01c8c595e6d5"><div class="ttname"><a href="classCPlayerData.html#ad3fcb8740d4e37b4654c01c8c595e6d5">CPlayerData::DIsAI</a></div><div class="ttdeci">bool DIsAI</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00050">GameModel.h:50</a></div></div>
<div class="ttc" id="classCPlayerData_html_afa5c728fc86335a9ca00b5121c0ec765"><div class="ttname"><a href="classCPlayerData.html#afa5c728fc86335a9ca00b5121c0ec765">CPlayerData::Gold</a></div><div class="ttdeci">int Gold() const</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00089">GameModel.h:89</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a85399def907073717f41849c8f09eba5"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a85399def907073717f41849c8f09eba5">aaRepair</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00037">GameDataTypes.h:37</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507">aaNone</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00034">GameDataTypes.h:34</a></div></div>
<div class="ttc" id="classCPlayerData_html_af60332b967ddb3044bd71376656bcdc0"><div class="ttname"><a href="classCPlayerData.html#af60332b967ddb3044bd71376656bcdc0">CPlayerData::CPlayerData</a></div><div class="ttdeci">CPlayerData(std::shared_ptr&lt; CAssetDecoratedMap &gt; map, EPlayerColor color)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00034">GameModel.cpp:34</a></div></div>
<div class="ttc" id="structSRectangle_html_a120aa0a90033bc6e07c36c151a3bbc71"><div class="ttname"><a href="structSRectangle.html#a120aa0a90033bc6e07c36c151a3bbc71">SRectangle::DYPosition</a></div><div class="ttdeci">int DYPosition</div><div class="ttdef"><b>Definition:</b> <a href="Rectangle_8h_source.html#l00022">Rectangle.h:22</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477fec"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477fec">EAssetType</a></div><div class="ttdeci">EAssetType</div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00092">GameDataTypes.h:92</a></div></div>
<div class="ttc" id="classCPlayerData_html_a4ef7c98c3b0f28354a2bccc2782b57ad"><div class="ttname"><a href="classCPlayerData.html#a4ef7c98c3b0f28354a2bccc2782b57ad">CPlayerData::CreateMarker</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerAsset &gt; CreateMarker(const CPosition &amp;pos, bool addtomap)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00095">GameModel.cpp:95</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3">atGoldMine</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00098">GameDataTypes.h:98</a></div></div>
<div class="ttc" id="GameModel_8h_html_abfcf510bafec7c6429906a6ecaac656da0106cf4227412990140c1d773244b587"><div class="ttname"><a href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656da0106cf4227412990140c1d773244b587">etWorkComplete</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00028">GameModel.h:28</a></div></div>
<div class="ttc" id="structSGameEvent_html_a40c85eeac83b96887b7449c9bdc5d624"><div class="ttname"><a href="structSGameEvent.html#a40c85eeac83b96887b7449c9bdc5d624">SGameEvent::DAsset</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerAsset &gt; DAsset</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00045">GameModel.h:45</a></div></div>
<div class="ttc" id="classCPlayerData_html_a21238056db09447e0ed054aafbd953c1"><div class="ttname"><a href="classCPlayerData.html#a21238056db09447e0ed054aafbd953c1">CPlayerData::AssetRequirementsMet</a></div><div class="ttdeci">bool AssetRequirementsMet(const std::string &amp;assettypename)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00129">GameModel.cpp:129</a></div></div>
<div class="ttc" id="GameModel_8h_html_abfcf510bafec7c6429906a6ecaac656dae891b2dee1677bb6a343c0ca8c01fa0e"><div class="ttname"><a href="GameModel_8h.html#abfcf510bafec7c6429906a6ecaac656dae891b2dee1677bb6a343c0ca8c01fa0e">etMissleFire</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00034">GameModel.h:34</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321"><div class="ttname"><a href="GameDataTypes_8h.html#a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321">atTownHall</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00099">GameDataTypes.h:99</a></div></div>
<div class="ttc" id="classCTerrainMap_html_aff2ab991e237269941416dd79d8871d4ac6008e344fb024b62741b2ffaef042ef"><div class="ttname"><a href="classCTerrainMap.html#aff2ab991e237269941416dd79d8871d4ac6008e344fb024b62741b2ffaef042ef">CTerrainMap::ttStump</a></div><div class="ttdef"><b>Definition:</b> <a href="TerrainMap_8h_source.html#l00032">TerrainMap.h:32</a></div></div>
<div class="ttc" id="classCPlayerData_html_afa66ff31262c9b287ae8c13259aae6f3"><div class="ttname"><a href="classCPlayerData.html#afa66ff31262c9b287ae8c13259aae6f3">CPlayerData::DGold</a></div><div class="ttdeci">int DGold</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00059">GameModel.h:59</a></div></div>
<div class="ttc" id="structSAssetCommand_html_a734ea7c6847457b437360f333f570ff9"><div class="ttname"><a href="structSAssetCommand.html#a734ea7c6847457b437360f333f570ff9">SAssetCommand::DCapability</a></div><div class="ttdeci">EAssetCapabilityType DCapability</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8h_source.html#l00316">PlayerAsset.h:316</a></div></div>
<div class="ttc" id="classCPlayerData_html_a1c926b101513f871ec85e34ac3c83ec4"><div class="ttname"><a href="classCPlayerData.html#a1c926b101513f871ec85e34ac3c83ec4">CPlayerData::SelectAsset</a></div><div class="ttdeci">std::weak_ptr&lt; CPlayerAsset &gt; SelectAsset(const CPosition &amp;pos, EAssetType assettype)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00221">GameModel.cpp:221</a></div></div>
<div class="ttc" id="classCGameModel_html_ad9c8def41d5369661fab971b9a4fe786"><div class="ttname"><a href="classCGameModel.html#ad9c8def41d5369661fab971b9a4fe786">CGameModel::Player</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerData &gt; Player(EPlayerColor color) const</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00512">GameModel.cpp:512</a></div></div>
<div class="ttc" id="classCPosition_html_a27a7a8b9a5541da0aa8d97d785650fb8"><div class="ttname"><a href="classCPosition.html#a27a7a8b9a5541da0aa8d97d785650fb8">CPosition::TileWidth</a></div><div class="ttdeci">static int TileWidth()</div><div class="ttdef"><b>Definition:</b> <a href="Position_8h_source.html#l00046">Position.h:46</a></div></div>
<div class="ttc" id="classCPlayerData_html_ae71ad19439d31ba0eb7f59809885ed6d"><div class="ttname"><a href="classCPlayerData.html#ae71ad19439d31ba0eb7f59809885ed6d">CPlayerData::FoodProduction</a></div><div class="ttdeci">int FoodProduction() const</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00081">GameModel.cpp:81</a></div></div>
<div class="ttc" id="classCPlayerData_html_ac81c0899651bf3f9962b03ef0d7a2415"><div class="ttname"><a href="classCPlayerData.html#ac81c0899651bf3f9962b03ef0d7a2415">CPlayerData::FoundAssetCount</a></div><div class="ttdeci">int FoundAssetCount(EAssetType type)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00413">GameModel.cpp:413</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670a02b95b7163284c6e80c9008073d8480d"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670a02b95b7163284c6e80c9008073d8480d">aaBuild</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00036">GameDataTypes.h:36</a></div></div>
<div class="ttc" id="classCPlayerAssetType_html_a42d55b6d7606e021c063fce3a14c56de"><div class="ttname"><a href="classCPlayerAssetType.html#a42d55b6d7606e021c063fce3a14c56de">CPlayerAssetType::NameToType</a></div><div class="ttdeci">static EAssetType NameToType(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00468">PlayerAsset.cpp:468</a></div></div>
<div class="ttc" id="Debug_8h_html_aa5f00f5537c9760f6ae1782460748ab9"><div class="ttname"><a href="Debug_8h.html#aa5f00f5537c9760f6ae1782460748ab9">PrintDebug</a></div><div class="ttdeci">#define PrintDebug(level, format,...)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00051">Debug.h:51</a></div></div>
<div class="ttc" id="classCPlayerData_html_a5f70ad16e9b4e8aa9edc6e8fc4136527"><div class="ttname"><a href="classCPlayerData.html#a5f70ad16e9b4e8aa9edc6e8fc4136527">CPlayerData::FindNearestAsset</a></div><div class="ttdeci">std::shared_ptr&lt; CPlayerAsset &gt; FindNearestAsset(const CPosition &amp;pos, EAssetType assettype)</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00264">GameModel.cpp:264</a></div></div>
<div class="ttc" id="classCPlayerData_html_ae92ca06a63a01681dd9f3ddc17c0e106"><div class="ttname"><a href="classCPlayerData.html#ae92ca06a63a01681dd9f3ddc17c0e106">CPlayerData::DGameCycle</a></div><div class="ttdeci">int DGameCycle</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00061">GameModel.h:61</a></div></div>
<div class="ttc" id="classCPlayerData_html_a452163191cd4603e1e38dd8d4bb9691c"><div class="ttname"><a href="classCPlayerData.html#a452163191cd4603e1e38dd8d4bb9691c">CPlayerData::DPlayerMap</a></div><div class="ttdeci">std::shared_ptr&lt; CAssetDecoratedMap &gt; DPlayerMap</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00054">GameModel.h:54</a></div></div>
<div class="ttc" id="classCPlayerUpgrade_html_af47a08aba3a1a5b2cefacef24065a82e"><div class="ttname"><a href="classCPlayerUpgrade.html#af47a08aba3a1a5b2cefacef24065a82e">CPlayerUpgrade::FindUpgradeFromName</a></div><div class="ttdeci">static std::shared_ptr&lt; CPlayerUpgrade &gt; FindUpgradeFromName(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8cpp_source.html#l00349">PlayerAsset.cpp:349</a></div></div>
<div class="ttc" id="structSAssetCommand_html_a8edd3b3d59a76d5514ba403bc8076a75"><div class="ttname"><a href="structSAssetCommand.html#a8edd3b3d59a76d5514ba403bc8076a75">SAssetCommand::DAction</a></div><div class="ttdeci">EAssetAction DAction</div><div class="ttdef"><b>Definition:</b> <a href="PlayerAsset_8h_source.html#l00315">PlayerAsset.h:315</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b"><div class="ttname"><a href="GameDataTypes_8h.html#ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b">aaMineGold</a></div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00042">GameDataTypes.h:42</a></div></div>
<div class="ttc" id="classCPlayerData_html_a3ac1393306e8a3f7c95d13ca01e429a7"><div class="ttname"><a href="classCPlayerData.html#a3ac1393306e8a3f7c95d13ca01e429a7">CPlayerData::UpdateVisibility</a></div><div class="ttdeci">void UpdateVisibility()</div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8cpp_source.html#l00155">GameModel.cpp:155</a></div></div>
<div class="ttc" id="GameDataTypes_8h_html_acb2b033915f6659a71a38b5aa6e4eb42"><div class="ttname"><a href="GameDataTypes_8h.html#acb2b033915f6659a71a38b5aa6e4eb42">EDirection</a></div><div class="ttdeci">EDirection</div><div class="ttdef"><b>Definition:</b> <a href="GameDataTypes_8h_source.html#l00112">GameDataTypes.h:112</a></div></div>
<div class="ttc" id="classCAssetDecoratedMap_html_a9d0fa2b32e4e8add6da83a7ebcfab6d8"><div class="ttname"><a href="classCAssetDecoratedMap.html#a9d0fa2b32e4e8add6da83a7ebcfab6d8">CAssetDecoratedMap::DuplicateMap</a></div><div class="ttdeci">static std::shared_ptr&lt; CAssetDecoratedMap &gt; DuplicateMap(int index, EPlayerColor newcolors[pcMax])</div><div class="ttdef"><b>Definition:</b> <a href="AssetDecoratedMap_8cpp_source.html#l00115">AssetDecoratedMap.cpp:115</a></div></div>
<div class="ttc" id="structSGameEvent_html"><div class="ttname"><a href="structSGameEvent.html">SGameEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="GameModel_8h_source.html#l00043">GameModel.h:43</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
