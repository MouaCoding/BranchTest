<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECS 160 Project: AI Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ECS 160 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AI Main Page </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#intro_sec">How the AI Works</a><ul><li class="level2"><a href="#gdm_sec">General Decision Making</a></li>
<li class="level2"><a href="#bdm_sec">Battle Decision Making</a></li>
<li class="level2"><a href="#c_sec">How to Improve the AI</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
How the AI Works</h1>
<p>The game AI is contained in two files: <a class="el" href="AIPlayer_8h.html">AIPlayer.h</a> and <a class="el" href="AIPlayer_8cpp.html">AIPlayer.cpp</a>.</p>
<p>The class <a class="el" href="classCAIPlayer.html">CAIPlayer</a> is used to make all the decisions for the AI. The AI Player may only decide which actions to take and when. It cannot do anything that the Human player can't do. This keeps the game balanced and fair.</p>
<p>The function in <a class="el" href="classCAIPlayer.html">CAIPlayer</a> that decides what actions the AI should take is <a class="el" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3">CAIPlayer::CalculateCommand</a>. One of the first things that this function does is determine whether it is allowed to perform an action yet. To manage difficulty, the AI is only allowed to perform an action every so often. To determine when the AI is allowed to perform an action, <a class="el" href="classCAIPlayer.html">CAIPlayer</a> has a member variable DCycle, which is an int that is set to zero in the constructor (<a class="el" href="classCAIPlayer.html#ab8b156d5fdce4d5ecf24624523fe5337">CAIPlayer::CAIPlayer</a>) and is incremented whenever <a class="el" href="classCAIPlayer.html#ae2742efd250c7d6c00b659ccc29c4be3">CAIPlayer::CalculateCommand</a> is called. The AI is only allowed to perform an action if DCycle is currently a multiple of another member variable: DDownSample. By adjusting the value of DDownSample you change the APM (Actions Per Minute) of the AI and therefore you adjust the difficulty.</p>
<h2><a class="anchor" id="gdm_sec"></a>
General Decision Making</h2>
<p>If the AI is allowed to take an action, it first checks whether it has any gold left at its gold mine; if not it does a <a class="el" href="classCAIPlayer.html#afafbe8fc589e09a16ae1f02f2794d7b0">CAIPlayer::SearchMap</a> to try to find another gold mine.</p>
<p>If it still has gold in the gold mine, the AI next checks whether it has a Town Hall (this is the building that produces peasants, which are used to gather resources and construct buildings). Even though you usually start by default with a Town Hall, if it gets destroyed you must build another one. So if the AI doesn't have a Town Hall it will <a class="el" href="classCAIPlayer.html#a41cdefbe14210fb70b793a32778c5141">CAIPlayer::BuildTownHall</a> next to a gold mine.</p>
<p>If the AI has gold in the mine, a Town Hall and fewer than 5 peasants, the AI calls <a class="el" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819">CAIPlayer::ActivatePeasants</a> which makes peasants gather resources and produce more peasants.</p>
<p>If the AI has at least 5 peasants and doesn't have enough visibility of the map, it will send a unit to explore.</p>
<p>If the AI has enough map visibility it will start getting ready for battle.</p>
<h2><a class="anchor" id="bdm_sec"></a>
Battle Decision Making</h2>
<p>To get ready for battle, the AI will first check whether it has enough food to produce more units. Producing a unit costs a certain amount of food, and you get food by building farms. If the AI doesn't have enough food, it will build (<a class="el" href="classCAIPlayer.html#a2ff5263cbaa6bfc62ffec4dbce87ba88">CAIPlayer::BuildBuilding</a>) a farm.</p>
<p>If the AI has enough food, it will <a class="el" href="classCAIPlayer.html#a3fab1c955fd68bb53fa80bb1872d2819">CAIPlayer::ActivatePeasants</a>, so they get back to gathering resources after building.</p>
<p>When the peasants are gathering again, the AI will check if it has a Barracks. The Barracks is the building used to produce melee units. If there is no Barracks, the AI will build one next to a Farm. After the Barracks is built, the AI will train a Footman if it has fewer than five.</p>
<p>Next it will build a Lumber Mill, which is used to produce ranged units. If the AI doesn't already have one, it will build one next to the Barracks. Once that is done, it will train an archer if it has fewer than five.</p>
<p>If the AI has a Footman, the AI will try to <a class="el" href="classCAIPlayer.html#a33b1533570e7a00114d1b85b3551e395">CAIPlayer::FindEnemies</a>. Then it will <a class="el" href="classCAIPlayer.html#a4216d7e76315234a4fe22fb3a0a89c1d">CAIPlayer::ActivateFighters</a> and if it still has five of each fighter unit it will <a class="el" href="classCAIPlayer.html#adf7feeba7debf9f19b000887616d7bfb">CAIPlayer::AttackEnemies</a>.</p>
<h2><a class="anchor" id="c_sec"></a>
How to Improve the AI</h2>
<p>We need to create different difficulty levels by making the following changes:</p>
<p>-Increase or decrease AI APM.</p>
<p>-Change how many of each type of building the AI should build. (Currently it only builds one Barracks and one Lumber Mill, but if you want to produce more units faster, you need to build more buildings. Also once it runs out of gold and mines from another gold mine, it needs to build another Town Hall close to that mine so the peasants can gather gold faster).</p>
<p>-Change how many of each type of unit the AI produces.</p>
<p>-Give the AI access to the buildings, units and upgrades the player has.(Currently the AI only has access to four buildings and three units, whereas the player has access to all of them).</p>
<p>-Make a way for the AI to use upgrades.</p>
<p>-Make the AI spend more of its money. (Holding on to resources is bad, because it isn't being used to produce anything, and doing anything takes time. So, the AI should keep producing units or building buildings if it can afford to). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
