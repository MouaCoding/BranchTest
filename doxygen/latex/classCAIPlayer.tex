\hypertarget{classCAIPlayer}{}\section{C\+A\+I\+Player Class Reference}
\label{classCAIPlayer}\index{C\+A\+I\+Player@{C\+A\+I\+Player}}


{\ttfamily \#include $<$A\+I\+Player.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classCAIPlayer_ab8b156d5fdce4d5ecf24624523fe5337}{C\+A\+I\+Player} (std\+::shared\+\_\+ptr$<$ \hyperlink{classCPlayerData}{C\+Player\+Data} $>$ playerdata, int downsample)
\begin{DoxyCompactList}\small\item\em Constructor for \hyperlink{classCAIPlayer}{C\+A\+I\+Player}. \end{DoxyCompactList}\item 
void \hyperlink{classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3}{Calculate\+Command} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{Search\+Map} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\item 
bool \hyperlink{classCAIPlayer_a33b1533570e7a00114d1b85b3551e395}{Find\+Enemies} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\item 
bool \hyperlink{classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb}{Attack\+Enemies} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\item 
bool \hyperlink{classCAIPlayer_a41cdefbe14210fb70b793a32778c5141}{Build\+Town\+Hall} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\item 
bool \hyperlink{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88}{Build\+Building} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command, \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fec}{E\+Asset\+Type} buildingtype, \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fec}{E\+Asset\+Type} neartype)
\item 
bool \hyperlink{classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819}{Activate\+Peasants} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command, bool trainmore)
\item 
bool \hyperlink{classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d}{Activate\+Fighters} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\item 
bool \hyperlink{classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0}{Train\+Footman} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\item 
bool \hyperlink{classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6}{Train\+Archer} (\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&command)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \hyperlink{classCPlayerData}{C\+Player\+Data} $>$ \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{D\+Player\+Data}
\item 
int \hyperlink{classCAIPlayer_adf12a7afe7ea86410b18eff47fa95253}{D\+Cycle}
\item 
int \hyperlink{classCAIPlayer_a091aed92cb9ad1a789900a6394d2f352}{D\+Down\+Sample}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 23 of file A\+I\+Player.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classCAIPlayer_ab8b156d5fdce4d5ecf24624523fe5337}{}\label{classCAIPlayer_ab8b156d5fdce4d5ecf24624523fe5337} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{C\+A\+I\+Player()}{CAIPlayer()}}
{\footnotesize\ttfamily C\+A\+I\+Player\+::\+C\+A\+I\+Player (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \hyperlink{classCPlayerData}{C\+Player\+Data} $>$}]{playerdata,  }\item[{int}]{downsample }\end{DoxyParamCaption})}



Constructor for \hyperlink{classCAIPlayer}{C\+A\+I\+Player}. 


\begin{DoxyParams}{Parameters}
{\em D\+Player\+Data} & -\/ Holds data about the AI player (gold, lumber, etc.).\\
\hline
{\em D\+Cycle} & -\/ Clock that increments whenever the AI tries to make a decision.\\
\hline
{\em D\+Down\+Sample} & -\/ Determines how often the AI can perform an action.\\
\hline
\end{DoxyParams}
\hypertarget{classCAIPlayer_constrhow_sec}{}\subsection{How It Works}\label{classCAIPlayer_constrhow_sec}
First the constructor sets {\bfseries D\+Player\+Data} equal to {\bfseries playerdata} which is passed in as an argument. Typically these are the default values for both AI and the human players. For example starting gold and lumber is set to 0.

Next {\bfseries D\+Cycle} is set to 0 and {\bfseries D\+Down\+Sample} is set to {\bfseries downsample} which is passed in as an argument. {\bfseries D\+Cycle} is incremented whenever \hyperlink{classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3}{C\+A\+I\+Player\+::\+Calculate\+Command} is called. If {\bfseries D\+Cycle} is a multiple of {\bfseries D\+Down\+Sample}, then the AI is allowed to perform an action. 

Definition at line 100 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
100                                                                            \{
101     \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData} = playerdata;
102     \hyperlink{classCAIPlayer_adf12a7afe7ea86410b18eff47fa95253}{DCycle} = 0;
103     \hyperlink{classCAIPlayer_a091aed92cb9ad1a789900a6394d2f352}{DDownSample} = downsample;
104 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d}{}\label{classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Activate\+Fighters@{Activate\+Fighters}}
\index{Activate\+Fighters@{Activate\+Fighters}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Activate\+Fighters()}{ActivateFighters()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Activate\+Fighters (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 387 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
387                                                               \{
388     \textcolor{keyword}{auto} IdleAssets = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->IdleAssets();
389     
390     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : IdleAssets)\{
391         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
392             \textcolor{keywordflow}{if}(Asset->Speed() && (\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61}{atPeasant} != Asset->Type()))\{
393                 \textcolor{keywordflow}{if}(!Asset->HasAction(\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670abd8a4e07a8f888148ed62ddd46719af3}{aaStandGround}) && !Asset->HasActiveCapability(
      \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea60ecb1b155c04190174a46d8053b5a04}{actStandGround}))\{
394                     command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(Asset);
395                 \}
396             \}
397         \}
398     \}
399     \textcolor{keywordflow}{if}(command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.size())\{
400         command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea60ecb1b155c04190174a46d8053b5a04}{actStandGround};
401         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
402     \}
403     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
404 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819}{}\label{classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Activate\+Peasants@{Activate\+Peasants}}
\index{Activate\+Peasants@{Activate\+Peasants}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Activate\+Peasants()}{ActivatePeasants()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Activate\+Peasants (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command,  }\item[{bool}]{trainmore }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 297 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
297                                                                               \{
298     \textcolor{comment}{// Mine and build peasants}
299     \textcolor{comment}{//auto IdleAssets = DPlayerData->IdleAssets();}
300     std::shared\_ptr< CPlayerAsset > MiningAsset;
301     std::shared\_ptr< CPlayerAsset > InterruptibleAsset;
302     std::shared\_ptr< CPlayerAsset > TownHallAsset;
303     \textcolor{keywordtype}{int} GoldMiners = 0;
304     \textcolor{keywordtype}{int} LumberHarvesters = 0;
305     \textcolor{keywordtype}{bool} SwitchToGold = \textcolor{keyword}{false};
306     \textcolor{keywordtype}{bool} SwitchToLumber = \textcolor{keyword}{false};
307     
308     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->Assets())\{
309         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
310             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b}{actMine}))\{
311                 \textcolor{keywordflow}{if}(!MiningAsset && (\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507}{aaNone} == Asset->Action()))\{
312                     MiningAsset = Asset;
313                 \}
314                 
315                 \textcolor{keywordflow}{if}(Asset->HasAction(\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670abc45b1c4fbca1481e373a780a69bd56b}{aaMineGold}))\{
316                     GoldMiners++; 
317                     \textcolor{keywordflow}{if}(Asset->Interruptible() && (\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507}{aaNone} != Asset->Action()))\{
318                         InterruptibleAsset = Asset;
319                     \}
320                 \}
321                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Asset->HasAction(\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670a4c44c3d83b3b67a8dd2248d11bedd0ee}{aaHarvestLumber}))\{
322                     LumberHarvesters++;
323                     \textcolor{keywordflow}{if}(Asset->Interruptible() && (\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507}{aaNone} != Asset->Action()))\{
324                         InterruptibleAsset = Asset;
325                     \}
326                 \}
327             \}
328             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71}{actBuildPeasant}) && (\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507}{aaNone} == Asset->Action()))\{
329                 TownHallAsset = Asset;
330             \}
331         \}
332     \}
333     \textcolor{keywordflow}{if}((2 <= GoldMiners)&&(0 == LumberHarvesters))\{
334         SwitchToLumber = \textcolor{keyword}{true}; 
335     \}
336     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}((2 <= LumberHarvesters)&&(0 == GoldMiners))\{
337         SwitchToGold = \textcolor{keyword}{true}; 
338     \}
339     \textcolor{keywordflow}{if}(MiningAsset || (InterruptibleAsset && (SwitchToLumber || SwitchToGold)))\{
340         \textcolor{keywordflow}{if}(MiningAsset && (MiningAsset->Lumber() || MiningAsset->Gold()))\{
341             command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cead52ccba78becf1f7411bcea19f1276a8}{actConvey};
342             command.\hyperlink{structSPlayerCommandRequest_a3690a5117efe6214d92f18d672b5714f}{DTargetColor} = TownHallAsset->Color();
343             command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(MiningAsset);
344             command.\hyperlink{structSPlayerCommandRequest_a864e47c641127665751091876a6d3c5e}{DTargetType} = TownHallAsset->Type();
345             command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation} = TownHallAsset->Position();
346         \}
347         \textcolor{keywordflow}{else}\{
348             \textcolor{keywordflow}{if}(!MiningAsset)\{
349                 MiningAsset = InterruptibleAsset;   
350             \}
351             \textcolor{keyword}{auto} GoldMineAsset = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FindNearestAsset(MiningAsset->Position(), 
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3}{atGoldMine});
352             \textcolor{keywordflow}{if}(GoldMiners && ((\hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->Gold() > \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->Lumber() * 3) || 
      SwitchToLumber))\{
353                 \hyperlink{classCPosition}{CPosition} LumberLocation = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerMap()->
      FindNearestReachableTileType(MiningAsset->TilePosition(), \hyperlink{classCTerrainMap_aff2ab991e237269941416dd79d8871d4a15600fc22dc08ff5a3aec20930112f8c}{CTerrainMap::ttTree});
354                 \textcolor{keywordflow}{if}(0 <= LumberLocation.\hyperlink{classCPosition_a9a6b94d3b91df1492d166d9964c865fc}{X}())\{
355                     command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b}{actMine};
356                     command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(MiningAsset);
357                     command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation}.\hyperlink{classCPosition_a46994e6a8b8e3b4237edd7259ad844b6}{SetFromTile}(LumberLocation);
358                 \}
359                 \textcolor{keywordflow}{else}\{
360                     \textcolor{keywordflow}{return} \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{SearchMap}(command);
361                 \}
362             \}
363             \textcolor{keywordflow}{else}\{
364                 command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea2e0db284fd05caa56e3867c661ccdd8b}{actMine};
365                 command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(MiningAsset);
366                 command.\hyperlink{structSPlayerCommandRequest_a864e47c641127665751091876a6d3c5e}{DTargetType} = \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3}{atGoldMine};
367                 command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation} = GoldMineAsset->Position();
368             \}
369         \}
370         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
371     \}
372     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(TownHallAsset && trainmore)\{
373         \textcolor{keyword}{auto} PlayerCapability = \hyperlink{classCPlayerCapability_a881ba4b87385d7cfe5cb6ced2d26f226}{CPlayerCapability::FindCapability}(
      \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71}{actBuildPeasant}); 
374         
375         \textcolor{keywordflow}{if}(PlayerCapability)\{
376             \textcolor{keywordflow}{if}(PlayerCapability->CanApply(TownHallAsset, \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}, TownHallAsset))\{
377                 command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71}{actBuildPeasant};
378                 command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(TownHallAsset);       
379                 command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation} = TownHallAsset->Position();
380                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};
381             \}
382         \}
383     \}
384     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
385 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb}{}\label{classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Attack\+Enemies@{Attack\+Enemies}}
\index{Attack\+Enemies@{Attack\+Enemies}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Attack\+Enemies()}{AttackEnemies()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Attack\+Enemies (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 150 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
150                                                            \{
151     \hyperlink{classCPosition}{CPosition} AverageLocation(0,0);
152     
153     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->Assets())\{
154         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
155             \textcolor{keywordflow}{if}((\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2}{atFootman} == Asset->Type())||(\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8}{atArcher} == Asset->Type())||(
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0}{atRanger} == Asset->Type()))\{
156                 \textcolor{keywordflow}{if}(!Asset->HasAction(\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670a948eefd20b9e43d3b4cfcf613774716d}{aaAttack}))\{
157                     command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(Asset);
158                     AverageLocation.IncrementX(Asset->PositionX());
159                     AverageLocation.IncrementY(Asset->PositionY());
160                 \}
161             \}
162         \}
163     \}
164     \textcolor{keywordflow}{if}(command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.size())\{
165         AverageLocation.X(AverageLocation.X() / command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.size());
166         AverageLocation.Y(AverageLocation.Y() / command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.size());
167         
168         \textcolor{keyword}{auto} TargetEnemy = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FindNearestEnemy(AverageLocation, -1).lock();
169         \textcolor{keywordflow}{if}(!TargetEnemy)\{
170             command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.clear();
171             \textcolor{keywordflow}{return} \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{SearchMap}(command);
172         \}
173         command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceaf90bc0c36c70d816217d0d4b08b0ba4c}{actAttack};
174         command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation} = TargetEnemy->Position();
175         command.\hyperlink{structSPlayerCommandRequest_a3690a5117efe6214d92f18d672b5714f}{DTargetColor} = TargetEnemy->Color();
176         command.\hyperlink{structSPlayerCommandRequest_a864e47c641127665751091876a6d3c5e}{DTargetType} = TargetEnemy->Type(); 
177         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
178     \}
179     \textcolor{keywordflow}{return} \textcolor{keyword}{false};    
180 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88}{}\label{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Build\+Building@{Build\+Building}}
\index{Build\+Building@{Build\+Building}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Build\+Building()}{BuildBuilding()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Build\+Building (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command,  }\item[{\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fec}{E\+Asset\+Type}}]{buildingtype,  }\item[{\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fec}{E\+Asset\+Type}}]{neartype }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 211 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
211                                                                                                          \{
212     std::shared\_ptr< CPlayerAsset > BuilderAsset;
213     std::shared\_ptr< CPlayerAsset > TownHallAsset;
214     std::shared\_ptr< CPlayerAsset > NearAsset;
215     \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ce}{EAssetCapabilityType} BuildAction;
216     \textcolor{keywordtype}{bool} AssetIsIdle = \textcolor{keyword}{false};
217     
218     \textcolor{keywordflow}{switch}(buildingtype)\{
219         \textcolor{keywordflow}{case} \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230}{atBarracks}:    BuildAction = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceaea47e79df21160eb97064a18e6d36cac}{actBuildBarracks};
220                             \textcolor{keywordflow}{break};
221         \textcolor{keywordflow}{case} \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c}{atLumberMill}:  BuildAction = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceaea7fb8009561a58e7b9f2cf741989242}{actBuildLumberMill};
222                             \textcolor{keywordflow}{break};
223         \textcolor{keywordflow}{case} \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca2b2badd6cba3212eef87ac295bf9642e}{atBlacksmith}:  BuildAction = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea45224b077989530810879da4e225eac7}{actBuildBlacksmith};
224                             \textcolor{keywordflow}{break};
225         \textcolor{keywordflow}{default}:            BuildAction = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea4de8df4d0a9c3bb6fe33e380bc407078}{actBuildFarm};
226                             \textcolor{keywordflow}{break};
227     \}
228 
229     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->Assets())\{
230         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
231             \textcolor{keywordflow}{if}(Asset->HasCapability(BuildAction) && Asset->Interruptible())\{
232                 \textcolor{keywordflow}{if}(!BuilderAsset || (!AssetIsIdle && (\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507}{aaNone} == Asset->Action())))\{
233                     BuilderAsset = Asset;
234                     AssetIsIdle = \hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670ac17cc5a0035320c060d7f8074143b507}{aaNone} == Asset->Action();
235                 \}
236             \}
237             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71}{actBuildPeasant}))\{
238                 TownHallAsset = Asset;
239             \}
240             \textcolor{keywordflow}{if}(Asset->HasActiveCapability(BuildAction))\{
241                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};    
242             \}
243             \textcolor{keywordflow}{if}((neartype == Asset->Type())&&(\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d}{aaConstruct} != Asset->Action()))\{
244                 NearAsset = Asset;
245             \}
246             \textcolor{keywordflow}{if}(buildingtype == Asset->Type())\{
247                 \textcolor{keywordflow}{if}(\hyperlink{GameDataTypes_8h_ab47668e651a3032cfb9c40ea2d60d670a7ef6b863f66dd7dcc95a199cd758ae1d}{aaConstruct} == Asset->Action())\{
248                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};   
249                 \}
250             \}
251         \}
252     \}
253     \textcolor{keywordflow}{if}((buildingtype != neartype) && !NearAsset)\{
254         \textcolor{keywordflow}{return} \textcolor{keyword}{false};    
255     \}
256     \textcolor{keywordflow}{if}(BuilderAsset)\{
257         \textcolor{keyword}{auto} PlayerCapability = \hyperlink{classCPlayerCapability_a881ba4b87385d7cfe5cb6ced2d26f226}{CPlayerCapability::FindCapability}(
      BuildAction); 
258         \hyperlink{classCPosition}{CPosition} SourcePosition = TownHallAsset->TilePosition();
259         \hyperlink{classCPosition}{CPosition} MapCenter(\hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerMap()->Width()/2, 
      \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerMap()->Height()/2);
260         
261         
262         \textcolor{keywordflow}{if}(NearAsset)\{
263             SourcePosition = NearAsset->TilePosition();
264         \}
265         \textcolor{keywordflow}{if}(MapCenter.X() < SourcePosition.\hyperlink{classCPosition_a9a6b94d3b91df1492d166d9964c865fc}{X}())\{
266             SourcePosition.\hyperlink{classCPosition_a64f0d8ef8ca26c8b66b0997b3b132416}{DecrementX}(TownHallAsset->Size()/2);   
267         \}
268         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(MapCenter.X() > SourcePosition.\hyperlink{classCPosition_a9a6b94d3b91df1492d166d9964c865fc}{X}())\{
269             SourcePosition.\hyperlink{classCPosition_aa5955d67d5ab7ca74d80cb7303b6eaa9}{IncrementX}(TownHallAsset->Size()/2);
270         \}
271         \textcolor{keywordflow}{if}(MapCenter.Y() < SourcePosition.\hyperlink{classCPosition_a1aa8a30e2f08dda1f797736ba8c13a87}{Y}())\{
272             SourcePosition.\hyperlink{classCPosition_a51ee44d9e0457d6277567fd8a66fdec7}{DecrementY}(TownHallAsset->Size()/2);   
273         \}
274         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(MapCenter.Y() > SourcePosition.\hyperlink{classCPosition_a1aa8a30e2f08dda1f797736ba8c13a87}{Y}())\{
275             SourcePosition.\hyperlink{classCPosition_a3f2a26798bb27b1252ff1be303b3adfc}{IncrementY}(TownHallAsset->Size()/2);
276         \}
277 
278         \hyperlink{classCPosition}{CPosition} Placement = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FindBestAssetPlacement(SourcePosition, 
      BuilderAsset, buildingtype, 1);
279         \textcolor{keywordflow}{if}(0 > Placement.\hyperlink{classCPosition_a9a6b94d3b91df1492d166d9964c865fc}{X}())\{
280             \textcolor{keywordflow}{return} \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{SearchMap}(command);
281         \}
282         \textcolor{keywordflow}{if}(PlayerCapability)\{
283             \textcolor{keywordflow}{if}(PlayerCapability->CanInitiate(BuilderAsset, \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}))\{
284                 \textcolor{keywordflow}{if}(0 <= Placement.\hyperlink{classCPosition_a9a6b94d3b91df1492d166d9964c865fc}{X}())\{
285                     command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = BuildAction;
286                     command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(BuilderAsset);
287                     command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation}.\hyperlink{classCPosition_a46994e6a8b8e3b4237edd7259ad844b6}{SetFromTile}(Placement);
288                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
289                 \}
290             \}
291         \}
292     \}
293 
294     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
295 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_a41cdefbe14210fb70b793a32778c5141}{}\label{classCAIPlayer_a41cdefbe14210fb70b793a32778c5141} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Build\+Town\+Hall@{Build\+Town\+Hall}}
\index{Build\+Town\+Hall@{Build\+Town\+Hall}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Build\+Town\+Hall()}{BuildTownHall()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Build\+Town\+Hall (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 182 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
182                                                            \{
183     \textcolor{comment}{// Build Town Hall}
184     \textcolor{keyword}{auto} IdleAssets = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->IdleAssets();
185     std::shared\_ptr< CPlayerAsset > BuilderAsset;
186     
187     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : IdleAssets)\{
188         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
189             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea0b5f001e8c77b8a87998da6320595498}{actBuildTownHall}))\{
190                 BuilderAsset = Asset;
191                 \textcolor{keywordflow}{break};
192             \}
193         \}
194     \}
195     \textcolor{keywordflow}{if}(BuilderAsset)\{
196         \textcolor{keyword}{auto} GoldMineAsset = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FindNearestAsset(BuilderAsset->Position(), 
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3}{atGoldMine});
197         \hyperlink{classCPosition}{CPosition} Placement = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FindBestAssetPlacement(GoldMineAsset->
      TilePosition(), BuilderAsset, \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321}{atTownHall}, 1);
198         \textcolor{keywordflow}{if}(0 <= Placement.\hyperlink{classCPosition_a9a6b94d3b91df1492d166d9964c865fc}{X}())\{
199             command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea0b5f001e8c77b8a87998da6320595498}{actBuildTownHall};
200             command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(BuilderAsset);
201             command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation}.\hyperlink{classCPosition_a46994e6a8b8e3b4237edd7259ad844b6}{SetFromTile}(Placement);
202             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
203         \}
204         \textcolor{keywordflow}{else}\{
205             \textcolor{keywordflow}{return} \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{SearchMap}(command);  
206         \}
207     \}
208     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
209 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a41cdefbe14210fb70b793a32778c5141_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3}{}\label{classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Calculate\+Command@{Calculate\+Command}}
\index{Calculate\+Command@{Calculate\+Command}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Calculate\+Command()}{CalculateCommand()}}
{\footnotesize\ttfamily void C\+A\+I\+Player\+::\+Calculate\+Command (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})}

\hypertarget{classCAIPlayer_cchow_sec}{}\subsection{How It Works}\label{classCAIPlayer_cchow_sec}
Explanation of how it works on \hyperlink{index}{AI Main Page}. 

Definition at line 473 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
473                                                               \{
474     command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceaa8df154ad276f6f62054e9b5b0696f92}{actNone};
475     command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.clear();    
476     command.\hyperlink{structSPlayerCommandRequest_a3690a5117efe6214d92f18d672b5714f}{DTargetColor} = \hyperlink{GameDataTypes_8h_aafb0ca75933357ff28a6d7efbdd7602fa88767aa8e02c7b3192bbab4127b3d729}{pcNone};
477     command.\hyperlink{structSPlayerCommandRequest_a864e47c641127665751091876a6d3c5e}{DTargetType} = \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca82fb51718e2c00981a2d37bc6fe92593}{atNone};   
478     \textcolor{keywordflow}{if}((\hyperlink{classCAIPlayer_adf12a7afe7ea86410b18eff47fa95253}{DCycle} % \hyperlink{classCAIPlayer_a091aed92cb9ad1a789900a6394d2f352}{DDownSample}) == 0)\{
479         \textcolor{comment}{// Do decision   }
480 
481         \textcolor{keywordflow}{if}(0 == \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FoundAssetCount(\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca243d9ba44092eadd561db058d742b3b3}{atGoldMine}))\{
482             \textcolor{comment}{// Search for gold mine}
483             \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{SearchMap}(command);
484         \}
485         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}((0 == \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca5c0fa8a0f367f3358365536d3c7aa321}{atTownHall}))&&(0 == 
      \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecaaed39451bedb0392ad95fbc9c95bef31}{atKeep}))&&(0 == \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca6727b47855e74f3f7b6e4a96d0c2a42a}{atCastle})))\{
486             \hyperlink{classCAIPlayer_a41cdefbe14210fb70b793a32778c5141}{BuildTownHall}(command);
487         \}
488         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(5 > \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecaf5e570c7e5a2266810f610e7f945ea61}{atPeasant}))\{
489             \hyperlink{classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819}{ActivatePeasants}(command, \textcolor{keyword}{true});
490         \}
491         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(12 > \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->VisibilityMap()->SeenPercent(100))\{
492             \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{SearchMap}(command);
493         \}
494         \textcolor{keywordflow}{else}\{
495             \textcolor{keywordtype}{bool} CompletedAction = \textcolor{keyword}{false};
496             \textcolor{keywordtype}{int} BarracksCount = 0;
497             \textcolor{keywordtype}{int} FootmanCount = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2}{atFootman});
498             \textcolor{keywordtype}{int} ArcherCount = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca7fad0074234068ff0af4092a75b929f8}{atArcher})+
      \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(\hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecaafd2b1e0ca34872bb06098dbec9939e0}{atRanger});
499             
500             \textcolor{keywordflow}{if}(!CompletedAction && (\hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FoodConsumption() >= 
      \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FoodProduction()))\{
501                 CompletedAction = \hyperlink{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88}{BuildBuilding}(command, \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5}{atFarm}, 
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5}{atFarm});
502             \}
503             \textcolor{keywordflow}{if}(!CompletedAction)\{
504                 CompletedAction = \hyperlink{classCAIPlayer_a3fab1c955fd68bb53fa80bb1872d2819}{ActivatePeasants}(command, \textcolor{keyword}{false});
505             \}
506             \textcolor{keywordflow}{if}(!CompletedAction && (0 == (BarracksCount = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230}{atBarracks}))))\{
507                 CompletedAction = \hyperlink{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88}{BuildBuilding}(command, \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230}{atBarracks}, 
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca406eab24dcbad1858522aca11b1088f5}{atFarm});
508             \}
509             \textcolor{keywordflow}{if}(!CompletedAction && (5 > FootmanCount))\{
510                 CompletedAction = \hyperlink{classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0}{TrainFootman}(command);
511             \}
512             \textcolor{keywordflow}{if}(!CompletedAction && (0 == \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c}{atLumberMill})))\{
513                 CompletedAction = \hyperlink{classCAIPlayer_a2ff5263cbaa6bfc62ffec4dbce87ba88}{BuildBuilding}(command, 
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca7bb38316bc3193b5c9ec67ea6aad549c}{atLumberMill}, \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477feca1cbf6c944f30d615a247eef1f57b2230}{atBarracks});
514             \}
515             \textcolor{keywordflow}{if}(!CompletedAction &&  (5 > ArcherCount))\{
516                 CompletedAction = \hyperlink{classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6}{TrainArcher}(command);
517             \}
518             \textcolor{keywordflow}{if}(!CompletedAction && \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerAssetCount(
      \hyperlink{GameDataTypes_8h_a5600d4fc433b83300308921974477fecad586e8ff9ee846d22630c2066e8fb7c2}{atFootman}))\{
519                 CompletedAction = \hyperlink{classCAIPlayer_a33b1533570e7a00114d1b85b3551e395}{FindEnemies}(command);
520             \}
521             \textcolor{keywordflow}{if}(!CompletedAction)\{
522                 CompletedAction = \hyperlink{classCAIPlayer_a4216d7e76315234a4fe22fb3a0a89c1d}{ActivateFighters}(command);
523             \}
524             \textcolor{keywordflow}{if}(!CompletedAction && ((5 <= FootmanCount) && (5 <= ArcherCount)))\{
525                 CompletedAction = \hyperlink{classCAIPlayer_adf7feeba7debf9f19b000887616d7bfb}{AttackEnemies}(command);
526             \}
527         \}
528     \}
529     \hyperlink{classCAIPlayer_adf12a7afe7ea86410b18eff47fa95253}{DCycle}++;
530 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_ae2742efd250c7d6c00b659ccc29c4be3_cgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_a33b1533570e7a00114d1b85b3551e395}{}\label{classCAIPlayer_a33b1533570e7a00114d1b85b3551e395} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Find\+Enemies@{Find\+Enemies}}
\index{Find\+Enemies@{Find\+Enemies}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Find\+Enemies()}{FindEnemies()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Find\+Enemies (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 132 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
132                                                          \{
133     std::shared\_ptr< CPlayerAsset > TownHallAsset;
134     
135     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->Assets())\{
136         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
137             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea66c601dce0fc095460b3c2c25f66ee71}{actBuildPeasant}))\{
138                 TownHallAsset = Asset;
139                 \textcolor{keywordflow}{break};
140             \}
141         \}
142     \}
143     \textcolor{keywordflow}{if}(\hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->FindNearestEnemy(TownHallAsset->Position(), -1).expired())\{
144         \textcolor{keywordflow}{return} \hyperlink{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{SearchMap}(command);
145     \}
146     \textcolor{keywordflow}{return} \textcolor{keyword}{false};    
147 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_a33b1533570e7a00114d1b85b3551e395_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0}{}\label{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Search\+Map@{Search\+Map}}
\index{Search\+Map@{Search\+Map}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Search\+Map()}{SearchMap()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Search\+Map (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 106 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
106                                                        \{
107     \textcolor{keyword}{auto} IdleAssets = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->IdleAssets();
108     std::shared\_ptr< CPlayerAsset > MovableAsset;
109     
110     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : IdleAssets)\{
111         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
112             \textcolor{keywordflow}{if}(Asset->Speed())\{
113                 MovableAsset = Asset;
114                 \textcolor{keywordflow}{break};
115             \}
116         \}
117     \}
118     \textcolor{keywordflow}{if}(MovableAsset)\{
119         \hyperlink{classCPosition}{CPosition} UnknownPosition = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->PlayerMap()->
      FindNearestReachableTileType(MovableAsset->TilePosition(), \hyperlink{classCTerrainMap_aff2ab991e237269941416dd79d8871d4a481e779132fb16414d17870bd6229eb5}{CTerrainMap::ttNone});
120         
121         \textcolor{keywordflow}{if}(0 <= UnknownPosition.\hyperlink{classCPosition_a9a6b94d3b91df1492d166d9964c865fc}{X}())\{
122             \textcolor{comment}{//printf("Unkown Position (%d, %d)\(\backslash\)n", UnknownPosition.X(), UnknownPosition.Y());}
123             command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceaac071f5baee87f2a5ce94c03750a44af}{actMove};
124             command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(MovableAsset);
125             command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation}.\hyperlink{classCPosition_a46994e6a8b8e3b4237edd7259ad844b6}{SetFromTile}(UnknownPosition);
126             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
127         \}
128     \}
129     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
130 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_afafbe8fc589e09a16ae1f02f2794d7b0_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6}{}\label{classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Train\+Archer@{Train\+Archer}}
\index{Train\+Archer@{Train\+Archer}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Train\+Archer()}{TrainArcher()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Train\+Archer (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 433 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
433                                                          \{
434     \textcolor{keyword}{auto} IdleAssets = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->IdleAssets();
435     std::shared\_ptr< CPlayerAsset > TrainingAsset;
436     \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ce}{EAssetCapabilityType} BuildType = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b}{actBuildArcher};
437     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : IdleAssets)\{
438         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
439             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b}{actBuildArcher}))\{
440                 TrainingAsset = Asset;
441                 BuildType = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778ceae3af0123db77607fb381df7e49c5b48b}{actBuildArcher};
442                 \textcolor{keywordflow}{break};
443             \}
444             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cead539d31a3eb945161800e6342a05fb11}{actBuildRanger}))\{
445                 TrainingAsset = Asset;
446                 BuildType = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cead539d31a3eb945161800e6342a05fb11}{actBuildRanger};
447                 \textcolor{keywordflow}{break};
448             \}
449             
450         \}
451     \}
452     \textcolor{keywordflow}{if}(TrainingAsset)\{
453         \textcolor{keyword}{auto} PlayerCapability = \hyperlink{classCPlayerCapability_a881ba4b87385d7cfe5cb6ced2d26f226}{CPlayerCapability::FindCapability}(
      BuildType); 
454         \textcolor{keywordflow}{if}(PlayerCapability)\{
455             \textcolor{keywordflow}{if}(PlayerCapability->CanApply(TrainingAsset, \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}, TrainingAsset))\{
456                 command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = BuildType;
457                 command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(TrainingAsset);       
458                 command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation} = TrainingAsset->Position();
459                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};
460             \}
461         \}
462     \}
463     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
464 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_af2edf1e3c54d6af693f768f86d484fd6_icgraph}
\end{center}
\end{figure}
\hypertarget{classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0}{}\label{classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!Train\+Footman@{Train\+Footman}}
\index{Train\+Footman@{Train\+Footman}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{Train\+Footman()}{TrainFootman()}}
{\footnotesize\ttfamily bool C\+A\+I\+Player\+::\+Train\+Footman (\begin{DoxyParamCaption}\item[{\hyperlink{structSPlayerCommandRequest}{S\+Player\+Command\+Request} \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 406 of file A\+I\+Player.\+cpp.


\begin{DoxyCode}
406                                                           \{
407     \textcolor{keyword}{auto} IdleAssets = \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}->IdleAssets();
408     std::shared\_ptr< CPlayerAsset > TrainingAsset;
409     
410     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} WeakAsset : IdleAssets)\{
411         \textcolor{keywordflow}{if}(\textcolor{keyword}{auto} Asset = WeakAsset.lock())\{
412             \textcolor{keywordflow}{if}(Asset->HasCapability(\hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662}{actBuildFootman}))\{
413                 TrainingAsset = Asset;
414                 \textcolor{keywordflow}{break};
415             \}
416         \}
417     \}
418     \textcolor{keywordflow}{if}(TrainingAsset)\{
419         \textcolor{keyword}{auto} PlayerCapability = \hyperlink{classCPlayerCapability_a881ba4b87385d7cfe5cb6ced2d26f226}{CPlayerCapability::FindCapability}(
      \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662}{actBuildFootman}); 
420         
421         \textcolor{keywordflow}{if}(PlayerCapability)\{
422             \textcolor{keywordflow}{if}(PlayerCapability->CanApply(TrainingAsset, \hyperlink{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{DPlayerData}, TrainingAsset))\{
423                 command.\hyperlink{structSPlayerCommandRequest_a80897bbccf2c4e0b148a7aa815a926c6}{DAction} = \hyperlink{GameDataTypes_8h_a35b98ce26aca678b03c6f9f76e4778cea48885d6af1b7c05c5887978f88556662}{actBuildFootman};
424                 command.\hyperlink{structSPlayerCommandRequest_aa37fc01519676345703d78b9f573894a}{DActors}.push\_back(TrainingAsset);       
425                 command.\hyperlink{structSPlayerCommandRequest_a701702b94ca2fd2738e95ef6711dd41a}{DTargetLocation} = TrainingAsset->Position();
426                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};
427             \}
428         \}
429     \}
430     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
431 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCAIPlayer_aa3f9c1d0d449a45a24e065d2086527b0_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\hypertarget{classCAIPlayer_adf12a7afe7ea86410b18eff47fa95253}{}\label{classCAIPlayer_adf12a7afe7ea86410b18eff47fa95253} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!D\+Cycle@{D\+Cycle}}
\index{D\+Cycle@{D\+Cycle}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{D\+Cycle}{DCycle}}
{\footnotesize\ttfamily int C\+A\+I\+Player\+::\+D\+Cycle\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 26 of file A\+I\+Player.\+h.

\hypertarget{classCAIPlayer_a091aed92cb9ad1a789900a6394d2f352}{}\label{classCAIPlayer_a091aed92cb9ad1a789900a6394d2f352} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!D\+Down\+Sample@{D\+Down\+Sample}}
\index{D\+Down\+Sample@{D\+Down\+Sample}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{D\+Down\+Sample}{DDownSample}}
{\footnotesize\ttfamily int C\+A\+I\+Player\+::\+D\+Down\+Sample\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 27 of file A\+I\+Player.\+h.

\hypertarget{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6}{}\label{classCAIPlayer_a83b5113c8f7e80df54940b647c5ee2e6} 
\index{C\+A\+I\+Player@{C\+A\+I\+Player}!D\+Player\+Data@{D\+Player\+Data}}
\index{D\+Player\+Data@{D\+Player\+Data}!C\+A\+I\+Player@{C\+A\+I\+Player}}
\subsubsection{\texorpdfstring{D\+Player\+Data}{DPlayerData}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \hyperlink{classCPlayerData}{C\+Player\+Data} $>$ C\+A\+I\+Player\+::\+D\+Player\+Data\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 25 of file A\+I\+Player.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{AIPlayer_8h}{A\+I\+Player.\+h}\item 
src/\hyperlink{AIPlayer_8cpp}{A\+I\+Player.\+cpp}\end{DoxyCompactItemize}
